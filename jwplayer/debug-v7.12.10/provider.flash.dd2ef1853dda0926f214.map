{"version":3,"sources":["webpack:///./src/js/providers/data-normalizer.js?7f88","webpack:///./src/js/providers/tracks-mixin.js?b3f1","webpack:///./src/js/providers/flash.js"],"names":["qualityLevel","level","bitrate","label","width","height","_","ID3Parser","utils","tracksLoader","tracksHelper","Tracks","_itemTracks","_textTracks","_tracksById","_cuesByTrackId","_cachedVTTCues","_metaCuesByTextTime","_currentTextTrackIndex","_unknownCount","_activeCuePosition","_initTextTracks","addTracksListener","clearTracks","clearCueData","disableTextTrack","enableTextTrack","getSubtitlesTrack","removeTracksListener","addTextTracks","setTextTracks","setupSideloadedTracks","setSubtitlesTrack","textTrackChangeHandler","addTrackHandler","addCuesToTrack","addCaptionsCue","addVTTCue","addVTTCuesToTrack","renderNatively","tracks","reject","track","_id","nativemetadata","length","i","len","kind","labelInfo","createLabel","name","unknownCount","createId","inuse","mode","oncuechange","_cueChangeHandler","bind","_kindSupported","cue","cues","embedded","loaded","shift","_addCueToTrack","_addTrackToList","call","video","textTracks","isEdge","isFF","isSafari","trigger","itemTracks","alreadyLoaded","cancelXhr","_clearSideloadedTextTracks","menuIndex","setCurrentSubtitleTrack","each","currentTrack","cueData","text","begin","end","trackId","trackid","toString","data","cueId","useDTS","source","vttCue","convertToVTTCues","push","type","itemTrack","_createTrack","_cacheVTTCue","captions","cuesToConvert","sort","a","b","vttCues","Array","prototype","apply","eventType","handler","instreamMode","addEventListener","removeEventListener","metadataTrack","_removeCues","inUseTracks","filter","_tracksModified","selectedTextTrackIndex","tracksArray","textTrackAny","file","loadFile","_errorHandler","textTrack","isIE","window","TextTrackCue","addCue","textTrackCue","startTime","endTime","test","removeCue","findWhere","language","addTextTrack","default","nonSideloadedTracks","groupid","e","activeCues","currentTarget","dataCues","value","metadataTime","metadata","JSON","parse","id3Data","parseID3","trackKind","cachedCues","cacheKeyTime","Math","floor","cacheLine","line","cacheValue","cueExists","abs","Uint8Array","join","error","log","events","states","EmbedSwf","DefaultProvider","Events","_providerId","getObjectId","playerId","flashThrottleTarget","config","document","createElement","href","flashplayer","sameHost","host","location","isChrome","FlashProvider","_playerId","_playerConfig","_container","_swf","_item","_flashBlockedTimeout","_currentQuality","_qualityLevels","_currentAudioTrack","_audioTracks","_flashProviderType","_fullscreen","_this","_ready","__ready","_flashCommand","triggerFlash","arguments","checkFlashBlocked","setTimeout","once","removeBlockedCheck","onFocus","clearTimeout","_updateLevelsEvent","levels","index","generateLabel","qualityLabels","_sortedLevels","currentQuality","_getSortedIndex","obj1","obj2","originalIndex","extend","init","item","preload","autostart","load","setState","LOADING","sources","sendMediaType","play","pause","PAUSED","stop","IDLE","seek","seekPos","volume","vol","isNumber","min","max","mute","getSwfObject","parent","found","querySelector","off","embed","wmode","getContainer","setContainer","hasFocus","__commandQueue","result","JWPLAYER_MEDIA_ERROR","forwardEventsWithData","JWPLAYER_MEDIA_SEEK","JWPLAYER_MEDIA_SEEKED","forwardEventsWithDataDuration","JWPLAYER_MEDIA_BUFFER","JWPLAYER_MEDIA_TIME","forwardEvents","JWPLAYER_MEDIA_BUFFER_FULL","on","JWPLAYER_MEDIA_LEVELS","JWPLAYER_MEDIA_LEVEL_CHANGED","JWPLAYER_AUDIO_TRACKS","JWPLAYER_AUDIO_TRACK_CHANGED","JWPLAYER_PLAYER_STATE","state","newstate","duration","Infinity","JWPLAYER_MEDIA_BEFORECOMPLETE","JWPLAYER_MEDIA_COMPLETE","sortedIndex","reason","JWPLAYER_PROVIDER_CHANGED","message","JWPLAYER_ERROR","event","JWPLAYER_MEDIA_META","remove","setVisibility","visible","style","opacity","resize","stretching","setControls","show","setFullscreen","getFullScreen","setCurrentQuality","quality","getCurrentQuality","getName","getQualityLevels","map","getAudioTracks","getCurrentAudioTrack","setCurrentAudioTrack","audioTrack","destroy","F"],"mappings":"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","file":"provider.flash.js","sourcesContent":["export function qualityLevel(level) {\r\n    return {\r\n        bitrate: level.bitrate,\r\n        label: level.label,\r\n        width: level.width,\r\n        height: level.height\r\n    };\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/providers/data-normalizer.js\n **/","define(['utils/underscore',\r\n    'utils/id3Parser',\r\n    'utils/helpers',\r\n    'controller/tracks-loader',\r\n    'controller/tracks-helper'\r\n], function(_, ID3Parser, utils, tracksLoader, tracksHelper) {\r\n    /**\r\n     * Used across all providers for loading tracks and handling browser track-related events\r\n     */\r\n    var Tracks = {\r\n        _itemTracks: null,\r\n        _textTracks: null,\r\n        _tracksById: null,\r\n        _cuesByTrackId: null,\r\n        _cachedVTTCues: null,\r\n        _metaCuesByTextTime: null,\r\n        _currentTextTrackIndex: -1,\r\n        _unknownCount: 0,\r\n        _activeCuePosition: null,\r\n        _initTextTracks: _initTextTracks,\r\n        addTracksListener: addTracksListener,\r\n        clearTracks: clearTracks,\r\n        clearCueData: clearCueData,\r\n        disableTextTrack: disableTextTrack,\r\n        enableTextTrack: enableTextTrack,\r\n        getSubtitlesTrack: getSubtitlesTrack,\r\n        removeTracksListener: removeTracksListener,\r\n        addTextTracks: addTextTracks,\r\n        setTextTracks: setTextTracks,\r\n        setupSideloadedTracks: setupSideloadedTracks,\r\n        setSubtitlesTrack: setSubtitlesTrack,\r\n        textTrackChangeHandler: null,\r\n        addTrackHandler: null,\r\n        addCuesToTrack: addCuesToTrack,\r\n        addCaptionsCue: addCaptionsCue,\r\n        addVTTCue: addVTTCue,\r\n        addVTTCuesToTrack: addVTTCuesToTrack,\r\n        renderNatively: false\r\n    };\r\n\r\n    function setTextTracks(tracks) {\r\n        this._currentTextTrackIndex = -1;\r\n        if (!tracks) {\r\n            return;\r\n        }\r\n\r\n        if (!this._textTracks) {\r\n            this._initTextTracks();\r\n        } else {\r\n            // Remove the 608 captions track that was mutated by the browser\r\n            this._textTracks = _.reject(this._textTracks, function(track) {\r\n                if ((this.renderNatively && track._id === 'nativecaptions')) {\r\n                    delete this._tracksById[track._id];\r\n                    return true;\r\n                }\r\n            }, this);\r\n\r\n            // Remove the ID3 track from the cache\r\n            delete this._tracksById.nativemetadata;\r\n        }\r\n\r\n        // filter for 'subtitles' or 'captions' tracks\r\n        if (tracks.length) {\r\n            var i = 0;\r\n            var len = tracks.length;\r\n\r\n            for (i; i < len; i++) {\r\n                var track = tracks[i];\r\n                if (!track._id) {\r\n                    if (track.kind === 'captions' || track.kind === 'metadata') {\r\n                        track._id = 'native' + track.kind;\r\n                        if (!track.label && track.kind === 'captions') {\r\n                            // track label is read only in Safari\r\n                            // 'captions' tracks without a label need a name in order for the cc menu to work\r\n                            var labelInfo = tracksHelper.createLabel(track, this._unknownCount);\r\n                            track.name = labelInfo.label;\r\n                            this._unknownCount = labelInfo.unknownCount;\r\n                        }\r\n                    } else {\r\n                        track._id = tracksHelper.createId(track, this._textTracks.length);\r\n                    }\r\n                    if (this._tracksById[track._id]) {\r\n                        // tracks without unique ids must not be marked as \"inuse\"\r\n                        continue;\r\n                    }\r\n                    track.inuse = true;\r\n                }\r\n                if (!track.inuse || this._tracksById[track._id]) {\r\n                    continue;\r\n                }\r\n                // setup TextTrack\r\n                if (track.kind === 'metadata') {\r\n                    // track mode needs to be \"hidden\", not \"showing\", so that cues don't display as captions in Firefox\r\n                    track.mode = 'hidden';\r\n                    track.oncuechange = _cueChangeHandler.bind(this);\r\n                    this._tracksById[track._id] = track;\r\n                } else if (_kindSupported(track.kind)) {\r\n                    var mode = track.mode;\r\n                    var cue;\r\n\r\n                    // By setting the track mode to 'hidden', we can determine if the track has cues\r\n                    track.mode = 'hidden';\r\n\r\n                    if (!track.cues.length && track.embedded) {\r\n                        // There's no method to remove tracks added via: video.addTextTrack.\r\n                        // This ensures the 608 captions track isn't added to the CC menu until it has cues\r\n                        continue;\r\n                    }\r\n\r\n                    track.mode = mode;\r\n\r\n                    // Parsed cues may not have been added to this track yet\r\n                    if (this._cuesByTrackId[track._id] && !this._cuesByTrackId[track._id].loaded) {\r\n                        var cues = this._cuesByTrackId[track._id].cues;\r\n                        while ((cue = cues.shift())) {\r\n                            _addCueToTrack(this.renderNatively, track, cue);\r\n                        }\r\n                        track.mode = mode;\r\n                        this._cuesByTrackId[track._id].loaded = true;\r\n                    }\r\n\r\n                    _addTrackToList.call(this, track);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.renderNatively) {\r\n            // Only bind and set this.textTrackChangeHandler once so that removeEventListener works\r\n            this.textTrackChangeHandler = this.textTrackChangeHandler || textTrackChangeHandler.bind(this);\r\n            this.addTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler);\r\n\r\n            if (utils.isEdge() || utils.isFF() || utils.isSafari()) {\r\n                // Listen for TextTracks added to the videotag after the onloadeddata event in Edge and Firefox\r\n                this.addTrackHandler = this.addTrackHandler || addTrackHandler.bind(this);\r\n                this.addTracksListener(this.video.textTracks, 'addtrack', this.addTrackHandler);\r\n            }\r\n        }\r\n\r\n        if (this._textTracks.length) {\r\n            this.trigger('subtitlesTracks', { tracks: this._textTracks });\r\n        }\r\n    }\r\n\r\n    function setupSideloadedTracks(itemTracks) {\r\n        // Add tracks if we're starting playback or resuming after a midroll\r\n\r\n        if (!this.renderNatively) {\r\n            return;\r\n        }\r\n        // Determine if the tracks are the same and the embedded + sideloaded count = # of tracks in the controlbar\r\n        var alreadyLoaded = itemTracks === this._itemTracks;\r\n        if (!alreadyLoaded) {\r\n            tracksLoader.cancelXhr(this._itemTracks);\r\n        }\r\n        this._itemTracks = itemTracks;\r\n        if (!itemTracks) {\r\n            return;\r\n        }\r\n\r\n        if (!alreadyLoaded) {\r\n            this.disableTextTrack();\r\n            _clearSideloadedTextTracks.call(this);\r\n            this.addTextTracks(itemTracks);\r\n        }\r\n    }\r\n\r\n    function getSubtitlesTrack() {\r\n        return this._currentTextTrackIndex;\r\n    }\r\n\r\n    function setSubtitlesTrack(menuIndex) {\r\n        if (!this.renderNatively) {\r\n            if (this.setCurrentSubtitleTrack) {\r\n                this.setCurrentSubtitleTrack(menuIndex - 1);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (!this._textTracks) {\r\n            return;\r\n        }\r\n\r\n        // 0 = 'Off'\r\n        if (menuIndex === 0) {\r\n            _.each(this._textTracks, function (track) {\r\n                track.mode = track.embedded ? 'hidden' : 'disabled';\r\n            });\r\n        }\r\n\r\n        // Track index is 1 less than controlbar index to account for 'Off' = 0.\r\n        // Prevent unnecessary track change events\r\n        if (this._currentTextTrackIndex === menuIndex - 1) {\r\n            return;\r\n        }\r\n\r\n        // Turn off current track\r\n        this.disableTextTrack();\r\n\r\n        // Set the provider's index to the model's index, then show the selected track if it exists\r\n        this._currentTextTrackIndex = menuIndex - 1;\r\n\r\n        if (this._textTracks[this._currentTextTrackIndex]) {\r\n            this._textTracks[this._currentTextTrackIndex].mode = 'showing';\r\n        }\r\n\r\n        // Update the model index since the track change may have come from a browser event\r\n        this.trigger('subtitlesTrackChanged', {\r\n            currentTrack: this._currentTextTrackIndex + 1,\r\n            tracks: this._textTracks\r\n        });\r\n    }\r\n\r\n    function addCaptionsCue(cueData) {\r\n        if (!cueData.text || !cueData.begin || !cueData.end) {\r\n            return;\r\n        }\r\n        var trackId = cueData.trackid.toString();\r\n        var track = this._tracksById && this._tracksById[trackId];\r\n        if (!track) {\r\n            track = {\r\n                kind: 'captions',\r\n                _id: trackId,\r\n                data: []\r\n            };\r\n            this.addTextTracks([track]);\r\n            this.trigger('subtitlesTracks', { tracks: this._textTracks });\r\n        }\r\n\r\n        var cueId;\r\n\r\n        if (cueData.useDTS) {\r\n            // There may not be any 608 captions when the track is first created\r\n            // Need to set the source so position is determined from metadata\r\n            if (!track.source) {\r\n                track.source = cueData.source || 'mpegts';\r\n            }\r\n\r\n        }\r\n        cueId = cueData.begin + '_' + cueData.text;\r\n\r\n        var cue = this._metaCuesByTextTime[cueId];\r\n        if (!cue) {\r\n            cue = {\r\n                begin: cueData.begin,\r\n                end: cueData.end,\r\n                text: cueData.text\r\n            };\r\n            this._metaCuesByTextTime[cueId] = cue;\r\n            var vttCue = tracksLoader.convertToVTTCues([cue])[0];\r\n            track.data.push(vttCue);\r\n        }\r\n    }\r\n\r\n    function addVTTCue(cueData) {\r\n        if (!this._tracksById) {\r\n            this._initTextTracks();\r\n        }\r\n\r\n        var trackId = cueData.track ? cueData.track : 'native' + cueData.type;\r\n        var track = this._tracksById[trackId];\r\n        var label = cueData.type === 'captions' ? 'Unknown CC' : 'ID3 Metadata';\r\n        var vttCue = cueData.cue;\r\n\r\n        if (!track) {\r\n            var itemTrack = {\r\n                kind: cueData.type,\r\n                _id: trackId,\r\n                label: label,\r\n                embedded: true\r\n            };\r\n\r\n            track = _createTrack.call(this, itemTrack);\r\n\r\n            if (this.renderNatively || track.kind === 'metadata') {\r\n                this.setTextTracks(this.video.textTracks);\r\n            } else {\r\n                addTextTracks.call(this, [track]);\r\n            }\r\n        }\r\n        if (_cacheVTTCue.call(this, track, vttCue)) {\r\n            if (this.renderNatively || track.kind === 'metadata') {\r\n                _addCueToTrack(this.renderNatively, track, vttCue);\r\n            } else {\r\n                track.data.push(vttCue);\r\n            }\r\n        }\r\n    }\r\n\r\n    function addCuesToTrack(cueData) {\r\n        // convert cues coming from the flash provider into VTTCues, then append them to track\r\n        var track = this._tracksById[cueData.name];\r\n        if (!track) {\r\n            return;\r\n        }\r\n\r\n        track.source = cueData.source;\r\n        var cues = cueData.captions || [];\r\n        var cuesToConvert = [];\r\n        var sort = false;\r\n\r\n        for (var i = 0; i < cues.length; i++) {\r\n            var cue = cues[i];\r\n            var cueId = cueData.name + '_' + cue.begin + '_' + cue.end;\r\n            if (!this._metaCuesByTextTime[cueId]) {\r\n                this._metaCuesByTextTime[cueId] = cue;\r\n                cuesToConvert.push(cue);\r\n                sort = true;\r\n            }\r\n        }\r\n        if (sort) {\r\n            cuesToConvert.sort(function(a, b) {\r\n                return a.begin - b.begin;\r\n            });\r\n        }\r\n        var vttCues = tracksLoader.convertToVTTCues(cuesToConvert);\r\n        Array.prototype.push.apply(track.data, vttCues);\r\n    }\r\n\r\n    function addTracksListener(tracks, eventType, handler) {\r\n        if (!tracks) {\r\n            return;\r\n        }\r\n        // Always remove existing listener\r\n        removeTracksListener(tracks, eventType, handler);\r\n\r\n        if (this.instreamMode) {\r\n            return;\r\n        }\r\n\r\n        if (tracks.addEventListener) {\r\n            tracks.addEventListener(eventType, handler);\r\n        } else {\r\n            tracks['on' + eventType] = handler;\r\n        }\r\n    }\r\n\r\n    function removeTracksListener(tracks, eventType, handler) {\r\n        if (!tracks) {\r\n            return;\r\n        }\r\n        if (tracks.removeEventListener) {\r\n            tracks.removeEventListener(eventType, handler);\r\n        } else {\r\n            tracks['on' + eventType] = null;\r\n        }\r\n    }\r\n\r\n    function clearTracks() {\r\n        tracksLoader.cancelXhr(this._itemTracks);\r\n        var metadataTrack = this._tracksById && this._tracksById.nativemetadata;\r\n        if (this.renderNatively || metadataTrack) {\r\n            _removeCues(this.renderNatively, this.video.textTracks);\r\n            if (metadataTrack) {\r\n                metadataTrack.oncuechange = null;\r\n            }\r\n        }\r\n\r\n        this._itemTracks = null;\r\n        this._textTracks = null;\r\n        this._tracksById = null;\r\n        this._cuesByTrackId = null;\r\n        this._metaCuesByTextTime = null;\r\n        this._unknownCount = 0;\r\n        this._activeCuePosition = null;\r\n        if (this.renderNatively) {\r\n            // Removing listener first to ensure that removing cues does not trigger it unnecessarily\r\n            this.removeTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler);\r\n            _removeCues(this.renderNatively, this.video.textTracks);\r\n        }\r\n    }\r\n\r\n    // Clear track cues to prevent duplicates\r\n    function clearCueData(trackId) {\r\n        if (this._cachedVTTCues[trackId]) {\r\n            this._cachedVTTCues[trackId] = {};\r\n            this._tracksById[trackId].data = [];\r\n        }\r\n    }\r\n\r\n    function disableTextTrack() {\r\n        if (this._textTracks) {\r\n            var track = this._textTracks[this._currentTextTrackIndex];\r\n            if (track) {\r\n                // FF does not remove the active cue from the dom when the track is hidden, so we must disable it\r\n                track.mode = 'disabled';\r\n                if (track.embedded || track._id === 'nativecaptions') {\r\n                    track.mode = 'hidden';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function enableTextTrack() {\r\n        if (this._textTracks) {\r\n            var track = this._textTracks[this._currentTextTrackIndex];\r\n            if (track) {\r\n                track.mode = 'showing';\r\n            }\r\n        }\r\n    }\r\n\r\n    function textTrackChangeHandler() {\r\n        var textTracks = this.video.textTracks;\r\n        var inUseTracks = _.filter(textTracks, function (track) {\r\n            return (track.inuse || !track._id) && _kindSupported(track.kind);\r\n        });\r\n        if (!this._textTracks || _tracksModified.call(this, inUseTracks)) {\r\n            this.setTextTracks(textTracks);\r\n            return;\r\n        }\r\n        // If a caption/subtitle track is showing, find its index\r\n        var selectedTextTrackIndex = -1;\r\n        for (var i = 0; i < this._textTracks.length; i++) {\r\n            if (this._textTracks[i].mode === 'showing') {\r\n                selectedTextTrackIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // Notifying the model when the index changes keeps the current index in sync in iOS Fullscreen mode\r\n        if (selectedTextTrackIndex !== this._currentTextTrackIndex) {\r\n            this.setSubtitlesTrack(selectedTextTrackIndex + 1);\r\n        }\r\n    }\r\n\r\n    // Used in MS Edge to get tracks from the videotag as they're added\r\n    function addTrackHandler() {\r\n        this.setTextTracks(this.video.textTracks);\r\n    }\r\n\r\n    function addTextTracks(tracksArray) {\r\n        if (!tracksArray) {\r\n            return;\r\n        }\r\n\r\n        if (!this._textTracks) {\r\n            this._initTextTracks();\r\n        }\r\n\r\n        for (var i = 0; i < tracksArray.length; i++) {\r\n            var itemTrack = tracksArray[i];\r\n            // only add valid and supported kinds https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track\r\n            if (itemTrack.kind && !_kindSupported(itemTrack.kind)) {\r\n                continue;\r\n            }\r\n            var textTrackAny = _createTrack.call(this, itemTrack);\r\n            _addTrackToList.call(this, textTrackAny);\r\n            if (itemTrack.file) {\r\n                itemTrack.data = [];\r\n                tracksLoader.loadFile(itemTrack,\r\n                    this.addVTTCuesToTrack.bind(this, textTrackAny),\r\n                    _errorHandler);\r\n            }\r\n        }\r\n\r\n        if (this._textTracks && this._textTracks.length) {\r\n            this.trigger('subtitlesTracks', { tracks: this._textTracks });\r\n        }\r\n    }\r\n\r\n    function addVTTCuesToTrack(track, vttCues) {\r\n        if (!this.renderNatively) {\r\n            return;\r\n        }\r\n\r\n        var textTrack = this._tracksById[track._id];\r\n        // the track may not be on the video tag yet\r\n        if (!textTrack) {\r\n\r\n            if (!this._cuesByTrackId) {\r\n                this._cuesByTrackId = {};\r\n            }\r\n            this._cuesByTrackId[track._id] = { cues: vttCues, loaded: false };\r\n            return;\r\n        }\r\n        // Cues already added\r\n        if (this._cuesByTrackId[track._id] && this._cuesByTrackId[track._id].loaded) {\r\n            return;\r\n        }\r\n\r\n        var cue;\r\n        this._cuesByTrackId[track._id] = { cues: vttCues, loaded: true };\r\n\r\n        while ((cue = vttCues.shift())) {\r\n            _addCueToTrack(this.renderNatively, textTrack, cue);\r\n        }\r\n    }\r\n\r\n    // ////////////////////\r\n    // //// PRIVATE METHODS\r\n    // ////////////////////\r\n\r\n    function _addCueToTrack(renderNatively, track, vttCue) {\r\n        if (!(utils.isIE() && renderNatively) || !window.TextTrackCue) {\r\n            track.addCue(vttCue);\r\n            return;\r\n        }\r\n        // There's no support for the VTTCue interface in IE/Edge.\r\n        // We need to convert VTTCue to TextTrackCue before adding them to the TextTrack\r\n        // This unfortunately removes positioning properties from the cues\r\n        var textTrackCue = new window.TextTrackCue(vttCue.startTime, vttCue.endTime, vttCue.text);\r\n        track.addCue(textTrackCue);\r\n    }\r\n\r\n    function _removeCues(renderNatively, tracks) {\r\n        if (tracks && tracks.length) {\r\n            _.each(tracks, function(track) {\r\n                // Let IE & Edge handle cleanup of non-sideloaded text tracks for native rendering\r\n                if (utils.isIE() && renderNatively && /^(native|subtitle|cc)/.test(track._id)) {\r\n                    return;\r\n                }\r\n                \r\n                // Cues are inaccessible if the track is disabled. While hidden,\r\n                // we can remove cues while the track is in a non-visible state\r\n                // Set to disabled before hidden to ensure active cues disappear\r\n                track.mode = 'disabled';\r\n                track.mode = 'hidden';\r\n                for (var i = track.cues.length; i--;) {\r\n                    track.removeCue(track.cues[i]);\r\n                }\r\n                if (!track.embedded) {\r\n                    track.mode = 'disabled';\r\n                }\r\n                track.inuse = false;\r\n            });\r\n        }\r\n    }\r\n\r\n    function _kindSupported(kind) {\r\n        return kind === 'subtitles' || kind === 'captions';\r\n    }\r\n\r\n    function _initTextTracks() {\r\n        this._textTracks = [];\r\n        this._tracksById = {};\r\n        this._metaCuesByTextTime = {};\r\n        this._cuesByTrackId = {};\r\n        this._cachedVTTCues = {};\r\n        this._unknownCount = 0;\r\n    }\r\n\r\n    function _createTrack(itemTrack) {\r\n        var track;\r\n        var labelInfo = tracksHelper.createLabel(itemTrack, this._unknownCount);\r\n        var label = labelInfo.label;\r\n        this._unknownCount = labelInfo.unknownCount;\r\n\r\n        if (this.renderNatively || itemTrack.kind === 'metadata') {\r\n            var tracks = this.video.textTracks;\r\n            // TextTrack label is read only, so we'll need to create a new track if we don't\r\n            // already have one with the same label\r\n            track = _.findWhere(tracks, { label: label });\r\n\r\n            if (track) {\r\n                track.kind = itemTrack.kind;\r\n                track.language = itemTrack.language || '';\r\n            } else {\r\n                track = this.video.addTextTrack(itemTrack.kind, label, itemTrack.language || '');\r\n            }\r\n\r\n            track.default = itemTrack.default;\r\n            track.mode = 'disabled';\r\n            track.inuse = true;\r\n        } else {\r\n            track = itemTrack;\r\n            track.data = track.data || [];\r\n        }\r\n\r\n        if (!track._id) {\r\n            track._id = tracksHelper.createId(itemTrack, this._textTracks.length);\r\n        }\r\n\r\n        return track;\r\n    }\r\n\r\n    function _addTrackToList(track) {\r\n        this._textTracks.push(track);\r\n        this._tracksById[track._id] = track;\r\n    }\r\n\r\n    function _clearSideloadedTextTracks() {\r\n        // Clear VTT textTracks\r\n        if (!this._textTracks) {\r\n            return;\r\n        }\r\n        var nonSideloadedTracks = _.filter(this._textTracks, function (track) {\r\n            return track.embedded || track.groupid === 'subs';\r\n        });\r\n        this._initTextTracks();\r\n        _.each(nonSideloadedTracks, function (track) {\r\n            this._tracksById[track._id] = track;\r\n        });\r\n        this._textTracks = nonSideloadedTracks;\r\n    }\r\n\r\n    function _cueChangeHandler(e) {\r\n        var activeCues = e.currentTarget.activeCues;\r\n        if (!activeCues || !activeCues.length) {\r\n            return;\r\n        }\r\n\r\n        // Get the most recent start time. Cues are sorted by start time in ascending order by the browser\r\n        var startTime = activeCues[activeCues.length - 1].startTime;\r\n        // Prevent duplicate meta events for the same list of cues since the cue change handler fires once\r\n        // for each activeCue in Safari\r\n        if (this._activeCuePosition === startTime) {\r\n            return;\r\n        }\r\n        var dataCues = [];\r\n\r\n        _.each(activeCues, function(cue) {\r\n            if (cue.startTime < startTime) {\r\n                return;\r\n            }\r\n            if (cue.data || cue.value) {\r\n                dataCues.push(cue);\r\n            } else if (cue.text) {\r\n                this.trigger('meta', {\r\n                    metadataTime: startTime,\r\n                    metadata: JSON.parse(cue.text)\r\n                });\r\n            }\r\n        }, this);\r\n\r\n        if (dataCues.length) {\r\n            var id3Data = ID3Parser.parseID3(dataCues);\r\n            this.trigger('meta', {\r\n                metadataTime: startTime,\r\n                metadata: id3Data\r\n            });\r\n        }\r\n        this._activeCuePosition = startTime;\r\n    }\r\n\r\n    function _cacheVTTCue(track, vttCue) {\r\n        var trackKind = track.kind;\r\n        if (!this._cachedVTTCues[track._id]) {\r\n            this._cachedVTTCues[track._id] = {};\r\n        }\r\n        var cachedCues = this._cachedVTTCues[track._id];\r\n        var cacheKeyTime;\r\n\r\n        switch (trackKind) {\r\n            case 'captions':\r\n            case 'subtitles':\r\n                // VTTCues should have unique start and end times, even in cases where there are multiple\r\n                // active cues. This is safer than ensuring text is unique, which may be violated on seek.\r\n                // Captions within .05s of each other are treated as unique to account for\r\n                // quality switches where start/end times are slightly different.\r\n                cacheKeyTime = Math.floor(vttCue.startTime * 20);\r\n                var cacheLine = '_' + vttCue.line;\r\n                var cacheValue = Math.floor(vttCue.endTime * 20);\r\n                var cueExists = cachedCues[cacheKeyTime + cacheLine] || cachedCues[(cacheKeyTime + 1) + cacheLine] || cachedCues[(cacheKeyTime - 1) + cacheLine];\r\n\r\n                if (cueExists && Math.abs(cueExists - cacheValue) <= 1) {\r\n                    return false;\r\n                }\r\n\r\n                cachedCues[cacheKeyTime + cacheLine] = cacheValue;\r\n                return true;\r\n            case 'metadata':\r\n                var text = vttCue.data ? new Uint8Array(vttCue.data).join('') : vttCue.text;\r\n                cacheKeyTime = vttCue.startTime + text;\r\n                if (cachedCues[cacheKeyTime]) {\r\n                    return false;\r\n                }\r\n\r\n                cachedCues[cacheKeyTime] = vttCue.endTime;\r\n                return true;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n\r\n    function _tracksModified(inUseTracks) {\r\n        // Need to add new textTracks coming from the video tag\r\n        if (inUseTracks.length > this._textTracks.length) {\r\n            return true;\r\n        }\r\n\r\n        // Tracks may have changed in Safari after an ad\r\n        for (var i = 0; i < inUseTracks.length; i++) {\r\n            var track = inUseTracks[i];\r\n            if (!track._id || !this._tracksById[track._id]) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    function _errorHandler(error) {\r\n        utils.log('CAPTIONS(' + error + ')');\r\n    }\r\n\r\n    return Tracks;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/providers/tracks-mixin.js\n **/","import { qualityLevel } from 'providers/data-normalizer';\r\n\r\ndefine([\r\n    'utils/helpers',\r\n    'utils/underscore',\r\n    'events/events',\r\n    'events/states',\r\n    'utils/embedswf',\r\n    'providers/default',\r\n    'utils/backbone.events',\r\n    'providers/tracks-mixin'\r\n], function(utils, _, events, states, EmbedSwf, DefaultProvider, Events, Tracks) {\r\n    var _providerId = 0;\r\n    function getObjectId(playerId) {\r\n        return playerId + '_swf_' + (_providerId++);\r\n    }\r\n\r\n    function flashThrottleTarget(config) {\r\n        var a = document.createElement('a');\r\n        a.href = config.flashplayer;\r\n\r\n        var sameHost = (a.host === window.location.host);\r\n\r\n        return utils.isChrome() && !sameHost;\r\n    }\r\n\r\n    function FlashProvider(_playerId, _playerConfig) {\r\n        // private properties\r\n        var _container;\r\n        var _swf;\r\n        var _item = null;\r\n        var _flashBlockedTimeout = -1;\r\n        var _currentQuality = -1;\r\n        var _qualityLevels = null;\r\n        var _currentAudioTrack = -1;\r\n        var _audioTracks = null;\r\n        var _flashProviderType;\r\n        var _fullscreen = false;\r\n        var _this = this;\r\n\r\n        var _ready = function() {\r\n            return _swf && _swf.__ready;\r\n        };\r\n\r\n        var _flashCommand = function() {\r\n            if (_swf) {\r\n                _swf.triggerFlash.apply(_swf, arguments);\r\n            }\r\n        };\r\n\r\n        function checkFlashBlocked() {\r\n            _flashBlockedTimeout = setTimeout(function() {\r\n                Events.trigger.call(_this, 'flashBlocked');\r\n            }, 4000);\r\n            _swf.once('embedded', function() {\r\n                removeBlockedCheck();\r\n                Events.trigger.call(_this, 'flashUnblocked');\r\n            }, _this);\r\n        }\r\n\r\n        function onFocus() {\r\n            removeBlockedCheck();\r\n            checkFlashBlocked();\r\n        }\r\n\r\n        function removeBlockedCheck() {\r\n            clearTimeout(_flashBlockedTimeout);\r\n            window.removeEventListener('focus', onFocus);\r\n        }\r\n\r\n        function _updateLevelsEvent(e) {\r\n            var levels = e.levels;\r\n            for (var i = 0; i < levels.length; i++) {\r\n                var level = levels[i];\r\n                // Set original index\r\n                level.index = i;\r\n                if (level.label !== 'Auto') {\r\n                    level.label = utils.generateLabel(level, _playerConfig.qualityLabels);\r\n                }\r\n            }\r\n            e.levels =\r\n                _qualityLevels = _sortedLevels(e.levels);\r\n            e.currentQuality =\r\n                _currentQuality = _getSortedIndex(_qualityLevels, e.currentQuality);\r\n        }\r\n\r\n        function _sortedLevels(levels) {\r\n            return levels.sort(function(obj1, obj2) {\r\n                if (obj1.height && obj2.height) {\r\n                    return obj2.height - obj1.height;\r\n                }\r\n                return obj2.bitrate - obj1.bitrate;\r\n            });\r\n        }\r\n\r\n        function _getSortedIndex(levels, originalIndex) {\r\n            for (var i = 0; i < levels.length; i++) {\r\n                if (levels[i].index === originalIndex) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        _.extend(this, Events, Tracks, {\r\n            init: function(item) {\r\n                // if not preloading or autostart is true, do nothing\r\n                if (item.preload && item.preload !== 'none' && !_playerConfig.autostart) {\r\n                    _item = item;\r\n                }\r\n            },\r\n            load: function(item) {\r\n                _item = item;\r\n                this.setState(states.LOADING);\r\n                _flashCommand('load', item);\r\n                    // HLS mediaType comes from the AdaptiveProvider\r\n                if (item.sources.length && item.sources[0].type !== 'hls') {\r\n                    this.sendMediaType(item.sources);\r\n                }\r\n            },\r\n            play: function() {\r\n                _flashCommand('play');\r\n            },\r\n            pause: function() {\r\n                _flashCommand('pause');\r\n                this.setState(states.PAUSED);\r\n            },\r\n            stop: function() {\r\n                _flashCommand('stop');\r\n                _currentQuality = -1;\r\n                _item = null;\r\n                this.clearTracks();\r\n                this.setState(states.IDLE);\r\n            },\r\n            seek: function(seekPos) {\r\n                _flashCommand('seek', seekPos);\r\n            },\r\n            volume: function(vol) {\r\n                if (!_.isNumber(vol)) {\r\n                    return;\r\n                }\r\n                var volume = Math.min(Math.max(0, vol), 100);\r\n                if (_ready()) {\r\n                    _flashCommand('volume', volume);\r\n                }\r\n            },\r\n            mute: function(mute) {\r\n                if (_ready()) {\r\n                    _flashCommand('mute', mute);\r\n                }\r\n            },\r\n            setState: function() {\r\n                return DefaultProvider.setState.apply(this, arguments);\r\n            },\r\n            getSwfObject: function(parent) {\r\n                var found = parent.querySelector('object');\r\n                if (found) {\r\n                    found.off(null, null, this);\r\n                    return found;\r\n                }\r\n                return EmbedSwf.embed(_playerConfig.flashplayer, parent, getObjectId(_playerId),\r\n                        _playerConfig.wmode);\r\n            },\r\n\r\n            getContainer: function() {\r\n                return _container;\r\n            },\r\n\r\n            setContainer: function(parent) {\r\n                if (_container === parent) {\r\n                        // ignore instream's attempt to put provider back in it's place\r\n                    return;\r\n                }\r\n                _container = parent;\r\n\r\n                _swf = this.getSwfObject(parent);\r\n\r\n                    // Wait until the window gets focus to see check flash is blocked\r\n                if (document.hasFocus()) {\r\n                    checkFlashBlocked();\r\n                } else {\r\n                    window.addEventListener('focus', onFocus);\r\n                }\r\n\r\n                    // listen to events sendEvented from flash\r\n                _swf.once('ready', function() {\r\n                    removeBlockedCheck();\r\n                        // After plugins load, then execute commandqueue\r\n                    _swf.once('pluginsLoaded', function() {\r\n                        _flashCommand('setupCommandQueue', _swf.__commandQueue);\r\n                        _swf.__commandQueue = [];\r\n                    });\r\n\r\n                        // setup flash player\r\n                    var config = _.extend({}, _playerConfig);\r\n                    var result = _swf.triggerFlash('setup', config);\r\n                    if (result === _swf) {\r\n                        _swf.__ready = true;\r\n                    } else {\r\n                        this.trigger(events.JWPLAYER_MEDIA_ERROR, result);\r\n                    }\r\n\r\n                        // init if _item is defined\r\n                    if (_item) {\r\n                        _flashCommand('init', _item);\r\n                    }\r\n\r\n                }, this);\r\n\r\n                var forwardEventsWithData = [\r\n                    events.JWPLAYER_MEDIA_ERROR,\r\n                    events.JWPLAYER_MEDIA_SEEK,\r\n                    events.JWPLAYER_MEDIA_SEEKED,\r\n                    'subtitlesTrackChanged',\r\n                    'mediaType'\r\n                ];\r\n\r\n                var forwardEventsWithDataDuration = [\r\n                    events.JWPLAYER_MEDIA_BUFFER,\r\n                    events.JWPLAYER_MEDIA_TIME\r\n                ];\r\n\r\n                var forwardEvents = [\r\n                    events.JWPLAYER_MEDIA_BUFFER_FULL\r\n                ];\r\n\r\n                    // jwplayer 6 flash player events (forwarded from AS3 Player, Controller, Model)\r\n                _swf.on([events.JWPLAYER_MEDIA_LEVELS, events.JWPLAYER_MEDIA_LEVEL_CHANGED].join(' '), function(e) {\r\n                    _updateLevelsEvent(e);\r\n                    this.trigger(e.type, e);\r\n                }, this);\r\n\r\n                _swf.on(events.JWPLAYER_AUDIO_TRACKS, function(e) {\r\n                    _currentAudioTrack = e.currentTrack;\r\n                    _audioTracks = e.tracks;\r\n                    this.trigger(e.type, e);\r\n                }, this);\r\n\r\n                _swf.on(events.JWPLAYER_AUDIO_TRACK_CHANGED, function(e) {\r\n                    _currentAudioTrack = e.currentTrack;\r\n                    _audioTracks = e.tracks;\r\n                    this.trigger(e.type, e);\r\n                }, this);\r\n\r\n                _swf.on(events.JWPLAYER_PLAYER_STATE, function(e) {\r\n                    var state = e.newstate;\r\n                    if (state === states.IDLE) {\r\n                        return;\r\n                    }\r\n                    this.setState(state);\r\n                }, this);\r\n\r\n                _swf.on(forwardEventsWithDataDuration.join(' '), function(e) {\r\n                    if (e.duration === 'Infinity') {\r\n                        e.duration = Infinity;\r\n                    }\r\n                    this.trigger(e.type, e);\r\n                }, this);\r\n\r\n                _swf.on(forwardEventsWithData.join(' '), function(e) {\r\n                    this.trigger(e.type, e);\r\n                }, this);\r\n\r\n                _swf.on(forwardEvents.join(' '), function(e) {\r\n                    this.trigger(e.type);\r\n                }, this);\r\n\r\n                _swf.on(events.JWPLAYER_MEDIA_BEFORECOMPLETE, function() {\r\n                    this.trigger(events.JWPLAYER_MEDIA_COMPLETE);\r\n                }, this);\r\n\r\n                _swf.on('visualQuality', function(e) {\r\n                        // Get index from sorted levels from the level's index + 1 to take Auto into account\r\n                    var sortedIndex = 0;\r\n                    if (_qualityLevels.length > 1) {\r\n                        sortedIndex = _getSortedIndex(_qualityLevels, e.level.index + 1);\r\n                    }\r\n                        // Use extend so that the actual level's index is not modified\r\n                    e.level = _.extend(e.level, { index: sortedIndex });\r\n                    e.reason = e.reason || 'api'; // or 'user selected';\r\n                    this.trigger('visualQuality', e);\r\n                    this.trigger('providerFirstFrame', {});\r\n                }, this);\r\n\r\n                _swf.on(events.JWPLAYER_PROVIDER_CHANGED, function(e) {\r\n                    _flashProviderType = e.message;\r\n                    this.trigger(events.JWPLAYER_PROVIDER_CHANGED, e);\r\n                }, this);\r\n\r\n                _swf.on(events.JWPLAYER_ERROR, function(event) {\r\n                    this.trigger(events.JWPLAYER_MEDIA_ERROR, event);\r\n                }, this);\r\n\r\n                _swf.on('subtitlesTracks', function(e) {\r\n                    this.addTextTracks(e.tracks);\r\n                }, this);\r\n\r\n                _swf.on('subtitlesTrackData', function(e) {\r\n                    this.addCuesToTrack(e);\r\n                }, this);\r\n\r\n                _swf.on(events.JWPLAYER_MEDIA_META, function(e) {\r\n                    if (!e) {\r\n                        return;\r\n                    }\r\n                    if (e.metadata && e.metadata.type === 'textdata') {\r\n                        this.addCaptionsCue(e.metadata);\r\n                    } else {\r\n                        this.trigger(e.type, e);\r\n                    }\r\n                }, this);\r\n\r\n                if (flashThrottleTarget(_playerConfig)) {\r\n                    _swf.on('throttle', function(e) {\r\n                        removeBlockedCheck();\r\n\r\n                        if (e.state === 'resume') {\r\n                            Events.trigger.call(_this, 'flashThrottle', e);\r\n                        } else {\r\n                            _flashBlockedTimeout = setTimeout(function () {\r\n                                Events.trigger.call(_this, 'flashThrottle', e);\r\n                            }, 250);\r\n                        }\r\n                    }, this);\r\n                }\r\n            },\r\n            remove: function() {\r\n                _currentQuality = -1;\r\n                _qualityLevels = null;\r\n                EmbedSwf.remove(_swf);\r\n            },\r\n            setVisibility: function(visible) {\r\n                visible = !!visible;\r\n                _container.style.opacity = visible ? 1 : 0;\r\n            },\r\n            resize: function(width, height, stretching) {\r\n                if (stretching) {\r\n                    _flashCommand('stretch', stretching);\r\n                }\r\n            },\r\n            setControls: function(show) {\r\n                _flashCommand('setControls', show);\r\n            },\r\n            setFullscreen: function(value) {\r\n                _fullscreen = value;\r\n                _flashCommand('fullscreen', value);\r\n            },\r\n            getFullScreen: function() {\r\n                return _fullscreen;\r\n            },\r\n            setCurrentQuality: function(quality) {\r\n                _flashCommand('setCurrentQuality', _qualityLevels[quality].index);\r\n            },\r\n            getCurrentQuality: function() {\r\n                return _currentQuality;\r\n            },\r\n            setSubtitlesTrack: function(index) {\r\n                _flashCommand('setSubtitlesTrack', index);\r\n            },\r\n            getName: function() {\r\n                if (_flashProviderType) {\r\n                    return { name: 'flash_' + _flashProviderType };\r\n                }\r\n                return { name: 'flash' };\r\n            },\r\n            getQualityLevels: function() {\r\n                return _.map(_qualityLevels || (_item && _item.sources), level => qualityLevel(level));\r\n            },\r\n            getAudioTracks: function() {\r\n                return _audioTracks;\r\n            },\r\n            getCurrentAudioTrack: function () {\r\n                return _currentAudioTrack;\r\n            },\r\n            setCurrentAudioTrack: function(audioTrack) {\r\n                _flashCommand('setCurrentAudioTrack', audioTrack);\r\n            },\r\n            destroy: function() {\r\n                removeBlockedCheck();\r\n                this.remove();\r\n                if (_swf) {\r\n                    _swf.off();\r\n                    _swf = null;\r\n                }\r\n                _container = null;\r\n                _item = null;\r\n                this.off();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    // Register provider\r\n    var F = function() {};\r\n    F.prototype = DefaultProvider;\r\n    FlashProvider.prototype = new F();\r\n\r\n    FlashProvider.getName = function() {\r\n        return { name: 'flash' };\r\n    };\r\n\r\n    return FlashProvider;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/providers/flash.js\n **/"],"sourceRoot":""}