{"version":3,"sources":["webpack:///./src/js/view/controls/controls.js","webpack:///./src/js/controller/controller.js","webpack:///./src/js/providers/html5.js","webpack:///./src/js/utils/ui.js","webpack:///./src/js/view/controls/icons.js","webpack:///./src/js/view/controls/components/button.js","webpack:///./src/js/utils/svgParser.js","webpack:///./src/js/parsers/captions/srt.js","webpack:///./src/js/view/constants.js","webpack:///./src/js/events/change-state-event.js","webpack:///./src/js/controller/model.js","webpack:///./src/js/utils/request-animation-frame.js","webpack:///./src/js/view/utils/breakpoint.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./src/js/utils/aria.js","webpack:///./src/js/view/controls/components/slider.js","webpack:///./src/js/view/controls/components/tooltip.js","webpack:///./src/js/view/controls/components/simple-tooltip.js","webpack:///./src/js/utils/cancelable.js","webpack:///./src/js/utils/active-tab.js","webpack:///./src/js/controller/tracks-loader.js","webpack:///./src/js/controller/tracks-helper.js","webpack:///./src/js/parsers/captions/vttcue.js","webpack:///./src/js/parsers/captions/dfxp.js","webpack:///./src/js/view/controls/controlbar.js","webpack:///./src/assets/SVG/buffer.svg","webpack:///./src/assets/SVG/replay.svg","webpack:///./src/assets/SVG/playback-error.svg","webpack:///./src/assets/SVG/play.svg","webpack:///./src/assets/SVG/pause.svg","webpack:///./src/assets/SVG/rewind-10.svg","webpack:///./src/assets/SVG/next.svg","webpack:///./src/assets/SVG/volume-0.svg","webpack:///./src/assets/SVG/volume-50.svg","webpack:///./src/assets/SVG/volume-100.svg","webpack:///./src/assets/SVG/captions-on.svg","webpack:///./src/assets/SVG/captions-off.svg","webpack:///./src/assets/SVG/airplay-on.svg","webpack:///./src/assets/SVG/airplay-off.svg","webpack:///./src/assets/SVG/dvr.svg","webpack:///./src/assets/SVG/live.svg","webpack:///./src/assets/SVG/playback-rate.svg","webpack:///./src/assets/SVG/settings.svg","webpack:///./src/assets/SVG/audio-tracks.svg","webpack:///./src/assets/SVG/quality-100.svg","webpack:///./src/assets/SVG/fullscreen-not.svg","webpack:///./src/assets/SVG/fullscreen.svg","webpack:///./src/assets/SVG/close.svg","webpack:///./src/assets/SVG/jw-logo.svg","webpack:///./src/js/view/controls/components/custom-button.js","webpack:///./src/js/view/controls/components/timeslider.js","webpack:///./src/js/view/controls/templates/slider.js","webpack:///./src/js/view/controls/components/chapters.mixin.js","webpack:///./src/js/view/controls/components/thumbnails.mixin.js","webpack:///./src/js/view/controls/components/volumetooltip.js","webpack:///./src/js/view/controls/display-container.js","webpack:///./src/js/view/controls/templates/display-container.js","webpack:///./src/js/view/controls/templates/display-icon.js","webpack:///./src/js/view/controls/rewind-display-icon.js","webpack:///./src/js/view/controls/play-display-icon.js","webpack:///./src/js/view/controls/next-display-icon.js","webpack:///./src/js/view/controls/nextuptooltip.js","webpack:///./src/js/view/controls/templates/nextup.js","webpack:///./src/js/view/controls/rightclick.js","webpack:///./src/js/view/controls/templates/rightclick.js","webpack:///./src/js/view/controls/settings-menu.js","webpack:///./src/js/view/controls/components/settings/menu.js","webpack:///./src/js/view/controls/templates/settings/menu.js","webpack:///./src/js/view/utils/submenu-factory.js","webpack:///./src/js/view/controls/components/settings/submenu.js","webpack:///./src/js/view/controls/templates/settings/submenu.js","webpack:///./src/js/view/controls/components/settings/content-item.js","webpack:///./src/js/view/controls/templates/settings/content-item.js","webpack:///./src/css/controls.less?b048","webpack:///./src/css/controls.less","webpack:///./src/js/api/set-config.js","webpack:///./src/js/controller/instream-adapter.js","webpack:///./src/js/controller/instream-html5.js","webpack:///./src/js/controller/qoe.js","webpack:///./src/js/controller/instream-flash.js","webpack:///./src/js/controller/captions.js","webpack:///./src/js/view/view.js","webpack:///./src/templates/player.js","webpack:///./src/js/view/utils/audio-mode.js","webpack:///./src/js/view/utils/views-manager.js","webpack:///./src/js/view/utils/visibility.js","webpack:///./src/js/view/utils/skin.js","webpack:///./src/js/view/utils/request-fullscreen-helper.js","webpack:///./src/js/view/utils/flag-no-focus.js","webpack:///./src/js/view/utils/clickhandler.js","webpack:///./src/js/view/captionsrenderer.js","webpack:///./src/js/view/logo.js","webpack:///./src/templates/logo.js","webpack:///./src/js/view/preview.js","webpack:///./src/js/view/title.js","webpack:///./src/css/jwplayer.less?586a","webpack:///./src/css/jwplayer.less","webpack:///./src/js/controller/events-middleware.js","webpack:///./src/js/providers/utils/stream-type.js","webpack:///./src/js/utils/time-ranges.js","webpack:///./src/js/providers/data-normalizer.js","webpack:///./src/js/providers/video-listener-mixin.js","webpack:///./src/js/providers/video-actions-mixin.js","webpack:///./src/js/providers/video-attached-mixin.js","webpack:///./src/js/providers/tracks-mixin.js","webpack:///./src/js/providers/utils/id3Parser.js","webpack:///./src/js/providers/utils/play-promise.js"],"names":["require","ACTIVE_TIMEOUT","mobile","cloneIcon","forEach","api","getState","errorIconContainer","getContainer","querySelector","hasChildNodes","appendChild","reasonInteraction","reason","Controls","context","playerContainer","activeTimeout","controlbar","displayContainer","backdrop","enabled","instreamState","keydownCallback","keyupCallback","blurCallback","mute","nextUpToolTip","rightClickMenu","settingsMenu","showing","unmuteCallback","div","right","activeListeners","mousemove","clearTimeout","mouseout","userActive","dimensions","model","element","createElement","className","touchMode","get","buttons","display","on","trigger","playToggle","addClass","change","modelChanged","isBlocked","destroy","setup","data","addActiveListeners","lastState","visibilityChangeHandler","visible","evt","state","settingsInteraction","isKeyEvent","sourceEvent","type","toggleClass","pause","play","settingsButton","elements","focus","insertBefore","unmuteAutoplay","unmute","show","renderVolume","adjustSeek","amount","min","max","position","Math","newSeek","between","seek","adjustVolume","newVol","setVolume","handleKeydown","ctrlKey","metaKey","keyCode","setFullscreen","blur","userInactive","captionsList","getCaptionsList","listLength","length","nextIndex","getCurrentCaptions","setCurrentCaptions","setMute","number","test","preventDefault","addEventListener","handleKeyup","isTab","insideContainer","contains","target","relatedTarget","addBackdrop","off","mediaModel","parentNode","removeClass","removeChild","removeActiveListeners","removeEventListener","removeBackdrop","cbHeight","clientHeight","autostartSucceeded","set","undefined","hide","timeout","isKeyDown","setTimeout","parent","instreamModel","useInstreamTime","close","syncPlaybackTime","normalizeState","newstate","Controller","prototype","config","_api","originalContainer","eventListeners","commandQueue","_this","_model","_view","_captions","_preplay","_actionOnAttach","_stopPlaylist","_interruptPlay","checkAutoStartCancelable","_checkAutoStart","updatePlaylistCancelable","currentContainer","_events","_eventQueuedUntilReady","_triggerAfterReady","mediaController","then","_completeHandler","triggerError","throttled","errorEvent","message","duration","minDvrWindow","setStreamType","bool","fullscreen","vol","volume","rate","playbackRate","_pause","_play","triggerAfterReady","tracks","track","_video","getVideo","e","triggerControls","enable","controls","viewSetup","playerReady","related","getPlugin","nextUp","once","_playerReadyNotify","init","_updateViewable","setupTime","playlist","eventData","feedData","eventFeedData","playlistItem","index","item","i","event","args","viewableChange","_checkPlayOnViewable","visibility","isUndefined","round","apiQueue","_autoStart","flush","viewable","preloadVideo","push","_load","_stop","cancel","_primeMediaElementForPlayback","loadPromise","loadPlaylistPromise","_loadPlaylist","catch","error","_updatePlaylist","async","_setItem","reject","toLoad","resolve","loader","load","_getAdState","_instreamAdapter","_getState","adState","isString","meta","playReason","_getReason","pauseAd","playVideo","_inInteraction","window","mediaElement","src","internal","empty","fromApi","provider","stopVideo","pauseReason","_isIdle","_seek","pos","_item","setItemIndex","_prev","_next","idx","iOS","_setFullscreen","triggerAdvanceEvent","_setCurrentQuality","parseInt","setCurrentQuality","_getCurrentQuality","getCurrentQuality","_getConfig","getConfiguration","_getVisualQuality","qualityLevels","_getQualityLevels","levelIndex","level","mode","getQualityLevels","_setCurrentAudioTrack","setCurrentAudioTrack","_getCurrentAudioTrack","getCurrentAudioTrack","_getAudioTracks","getAudioTracks","_setCurrentCaptions","persistVideoSubtitleTrack","_getCaptionsList","_getCurrentCaptions","getCurrentIndex","_detachMedia","detachMedia","_attachMedia","attachMedia","isBoolean","_adModel","_nextUp","next","cb","ui","itemsShown","stop","playlistNext","playlistPrev","getVisualQuality","getConfig","setConfig","newConfig","bind","setPlaybackRate","getProvider","getWidth","getHeight","getItemQoe","_qoeItem","isBeforeComplete","checkComplete","addButton","img","tooltip","callback","id","btnClass","customButtons","added","newButton","reduce","button","unshift","removeButton","filter","call","resize","getSafeRegion","setCues","addCues","setCaptions","checkBeforePlay","setControls","playerDestroy","instreamDestroy","isBeforePlay","createInstream","skipAd","queue","apply","property","getMute","MIN_DVR_DURATION","_name","_setupListeners","eventsHash","videoTag","Object","keys","eventName","_removeListeners","VideoProvider","_playerId","_playerConfig","seeking","renderNatively","configRenderNatively","safari","chrome","MediaEvents","progress","checkStaleStream","timeupdate","_positionBeforeSeek","_videotag","currentTime","_setPositionBeforeSeek","checkVisualQuality","ended","_currentQuality","clearTimeouts","loadedmetadata","getDuration","_androidHls","Infinity","metadata","height","videoHeight","width","videoWidth","durationchange","loadeddata","_setAudioTracks","audioTracks","_checkDelayedSeek","canplay","_canSeek","_setMediaType","ie","version","major","setTextTracks","_textTracks","offset","_seekOffset","getCurrentTime","_delayedSeek","setLoadingState","seeked","webkitbeginfullscreen","_fullscreenState","_sendFullscreen","webkitendfullscreen","mixinEventHandler","renderCaptionsNatively","eventsOn_","eventsOff_","removeTracksListener","textTracks","textTrackChangeHandler","disableTextTrack","loop","enableTextTrack","video","addTracksListener","stalledHandler","checkStartTime","isLive","visualQuality","_staleStreamDuration","_levels","_beforeResumeHandler","noop","_audioTracks","_currentAudioTrackIndex","_staleStreamTimeout","_stale","_lastEndOfBuffer","_setAttribute","name","value","setAttribute","isSDK","sdkplatform","supportsPlaybackRate","bitrate","label","setState","_convertTime","_getSeekableEnd","isNaN","end","seekableDuration","_getSeekableStart","_getPublicLevels","levels","publicLevels","typeOf","map","_setLevels","_pickInitialQuality","currentQuality","qualityLabel","default","_completeLoad","startTime","previousSource","sourceElement","document","file","sourceChanged","_setVideotagSource","sendMediaType","source","_clearVideotagSource","removeAttribute","objectFit","msie","seekable","start","clearTracks","_audioTrackChangeHandler","sources","preload","starttime","setupSideloadedTracks","unpausing","paused","isLiveNotDvr","behindLiveEdge","seekPos","firefox","_selectedAudioTrackIndex","jwstate","setVisibility","android","container","opacity","stretching","styles","playerAspectRatio","videoAspectRatio","abs","fitVideoUsingTransforms","androidNative","x","floor","y","scaleX","ceil","scaleY","top","left","margin","toFixed","status","tryCatch","enterFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","Error","getFullScreen","exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitDisplayingFullscreen","quality","time","defaultPlaybackRate","getPlaybackRate","getName","_track","language","currentTrack","mediaType","endOfBuffer","buffered","live","checkStreamEnded","atEdgeOfLiveStream","_supportsPointerEvents","_supportsTouchEvents","_useMouseEvents","_isOSXFirefox","mac","getCoord","c","originalEvent","changedTouches","isRightClick","MouseEvent","which","isEnterKey","KeyboardEvent","stopPropagation","normalizeUIEvent","srcEvent","touches","currentTarget","pageX","pageY","TouchEvent","preventManipulation","UI","elem","options","_elem","_hasMoved","_startX","_startY","_lastClickTime","_doubleClickDelay","_touchListenerTarget","_pointerId","interactStartHandler","useHover","overHandler","outHandler","useMove","moveHandler","keyHandler","useFocus","pointerType","triggerEvent","elementFromPoint","setEventListener","isPrimary","preventScrolling","pointerId","setPointerCapture","interactDragHandler","interactEndHandler","nodeName","toLowerCase","movementThreshold","endX","endY","moveX","moveY","isPointerEvent","releasePointerCapture","directSelect","indexOf","self","enableDoubleTap","doubleType","getPointerType","PointerEvent","cloneIcons","collection","icon","getCollection","nameToClass","clone","names","icons","querySelectorAll","split","join","__DEBUG__","Array","cloneNode","parseCollection","apiAction","ariaText","svgIcons","style","svgIcon","toggle","m","svgParse","parser","svgXml","DOMParser","parseFromString","documentElement","Srt","list","entry","_entry","text","array","line","begin","substr","slice","dvrSeekLimit","ChangeStateEvent","normalizeApiState","oldstate","eventType","replace","Model","_providers","_provider","_beforecompleted","_attached","thenPlayPromise","providerPromise","MediaModel","attributes","updateProviders","setAutoStart","_videoEventHandler","srcReset","previousState","bufferPercent","isNumber","setQualityLevel","persistQualityLevel","playbackComplete","currentLevel","onMediaContainer","setContainer","changeVideoProvider","Provider","remove","instreamMode","resetProvider","isAndroidSdk","autoStartOnMobile","_destroyed","chooseProvider","choose","setActiveItem","resetItem","setProvider","mediaModelState","replaceMediaElement","mediaModelContext","syncPlayerWithMediaModel","lastMediaElement","muted","getProviders","streamType","loadAndPlay","playWithProvider","providerSetupPromise","playAttempt","playPromise","itemContext","videoTagUnpaused","videoTagPaused","mediaState","persistCaptionsTrack","setVideoSubtitleTrack","trackIndex","setSubtitlesTrack","_autoStartSupportedIOS","platformCanAutostart","autostartAdsIsEnabled","autoplayadsmuted","iosBrowserIsSupported","facebook","androidBrowserIsSupported","mobileBrowserIsSupported","autoStart","started","preloaded","requestAnimationFrame","cancelAnimationFrame","getBreakpoint","setBreakpoint","breakpoint","playerElement","breakpointNumber","breakpointClass","ariaLabel","getRailBounds","elementRail","bounds","pageXOffset","body","parentElement","getBoundingClientRect","Slider","orientation","dragStartListener","dragStart","dragMoveListener","dragMove","dragEndListener","dragEnd","tapListener","tap","el","getElementsByClassName","elementBuffer","elementProgress","elementThumb","userInteract","railBounds","dimension","percentage","bottom","updatedPercent","limit","render","update","Tooltip","elementShown","openClass","componentType","content","removeContent","isOpen","closeTooltip","openTooltip","SimpleTooltip","attachToElement","openCallback","tooltipElement","textElement","textContent","instance","open","touchEvent","setText","newText","cancelable","cancelled","arguments","hidden","webkitHidden","loadFile","cancelXhr","convertToVTTCues","successHandler","errorHandler","xhr","ajax","xhrSuccess","onload","onreadystatechange","onerror","abort","cues","cue","xmlRoot","responseXML","firstChild","vttCues","nextSibling","nodeType","COMMENT_NODE","responseText","loadVttParser","VTTParser","oncue","onflush","parse","createId","createLabel","tracksCount","trackId","prefix","kind","defaulttrack","_id","unknownCount","VTTCue","findDirectionSetting","directionSetting","lr","rl","dir","findAlignSetting","alignSetting","middle","align","autoKeyword","endTime","hasBeenReset","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_size","_align","defineProperty","enumerable","TypeError","setting","SyntaxError","displayState","getCueAsHTML","WebVTT","convertCueToDOMTree","Dfxp","xmlDoc","validate","paragraphs","getElementsByTagName","frameRate","tt","parsedFrameRate","parseFloat","getAttribute","p","breaks","j","b","replaceChild","createTextNode","rawText","innerHTML","dur","parseError","object","role","textIcon","classes","createCastButton","castToggle","localization","airplayButton","airplay","castButton","cursor","cast","buttonsInFirstNotInSecond","buttonsA","buttonsB","some","a","appendChildren","Controlbar","_isMobile","timeSlider","volumeTooltip","muteButton","rewind","nextButton","settings","captionsButton","cc","alt","goToLiveEdge","liveBroadcast","elapsed","countdown","volumetooltip","spacer","buttonContainer","captionsTip","onCaptionsChanged","currentCaptions","nextUpTip","buttonLayout","layout","menus","logo","addLogo","onVolume","onMute","onDuration","onElapsed","onFullscreen","onStreamTypeChange","setAltText","updateButtons","checkDvrLiveEdge","tipText","title","onAudioMode","onCastAvailable","onCastActive","pct","val","click","currentPosition","each","ele","closeMenus","volumeSlider","elapsedTime","countdownTime","timeFormat","altText","addCue","drawCues","rewindPosition","startPosition","logoButton","link","newButtons","oldButtons","addedButtons","removedButtons","removeButtons","buttonProps","firstButton","buttonsToRemove","buttonElement","onPosition","onStreamType","active","CustomButton","iconElement","substring","backgroundImage","TimeTip","containerWidth","textLength","dragJustReleased","wrapper","addContent","txt","setWidth","tolerance","TimeSlider","timeTip","seekThrottled","throttle","performSeek","mobileHoverDistance","onPlaylistItem","onBuffer","elementUI","showTimeTooltip","hideTimeTooltip","percent","activeCue","updatedPosition","seekTo","updateBuffer","updateTime","reset","onSeeked","loadThumbnails","loadChapters","playerWidth","timetipText","closeCue","allowNegativeTime","resetWidth","showThumbnail","timeTipWidth","widthPct","timeTipPct","safePct","resetChapters","resetThumbnails","Cue","toString","ChaptersMixin","chaptersLoaded","chaptersFailed","plainText","isArray","obj","Thumbnail","ThumbnailsMixin","vttPath","individualImage","thumbnailsLoaded","thumbnailsFailed","thumbnails","chooseThumbnail","seconds","sortedIndex","url","loadThumbnail","backgroundPosition","hashIndex","matched","exec","Image","image","VolumeTooltip","classList","toggleValue","toggleOpenState","DisplayContainer","iconElements","ButtonClass","iconContainer","playback","iconName","RewindDisplayIcon","PlayDisplayIcon","iconDisplay","newstateLabel","buffer","replay","NextDisplayIcon","nextUpChangeModel","NextUpTooltip","_playerElement","nextUpText","nextUpClose","shown","closeButton","onNextUp","onMediaModel","nextUpSticky","nextUpImage","nextUpItem","thumbnail","thumbnailStyle","header","innerText","showNextUp","setNextUpItem","stateChangeMediaModel","showUntilEnd","closeAriaLabel","createDomElement","html","logoContainer","RightClick","semverParts","majorMinorPatchPre","menu","items","featured","showLogo","lazySetup","mouseOverContext","hideMenu","showMenu","playerBounds","getOffset","_menuTimeout","buildArray","newEl","childNodes","layer","hideMenuHandler","addOffListener","oncontextmenu","rightClick","removeOffListener","itemsHtml","rightClickItem","createSettingsMenu","setupSubmenuListeners","onVisibility","onSubmenuAdded","onMenuEmpty","submenuName","isDefault","submenu","getSubmenu","activateSubmenu","activateFirstSubmenu","activateSubmenuItem","itemIndex","activateItem","onAudiotracksChanged","changedModel","onQualitiesChanged","hd","controlbarButton","toggleCaptionsButtonState","setupPlaybackRatesMenu","playbackRates","showPlaybackRateControls","newModel","currentAudioTrack","captionsSubmenu","rates","SettingsMenu","documentClickHandler","targetClass","match","submenus","settingsMenuElement","closeOnEnter","closeOnButton","shiftKey","topbarElement","addDocumentListeners","categoryButtonElement","deactivateAllSubmenus","removeDocumentListeners","addSubmenu","sharingButton","removeSubmenu","activate","firstSubmenuName","defineProperties","handler","deactivate","addCaptionsSubmenu","removeCaptionsSubmenu","addAudioTracksSubmenu","removeAudioTracksSubmenu","addQualitiesSubmenu","removeQualitiesSubmenu","addPlaybackRatesSubmenu","removePlaybackRatesSubmenu","AUDIO_TRACKS_SUBMENU","CAPTIONS_SUBMENU","QUALITIES_SUBMENU","PLAYBACK_RATE_SUBMENU","DEFAULT_SUBMENU","makeSubmenu","contentItems","tooltipText","replaceContent","categoryButton","children","action","initialSelectionIndex","captionsContentItems","contentItemElement","audioTracksList","audioTracksItems","audioTracksSubmenu","qualitiesList","qualitiesItems","qualitiesSubmenu","rateList","rateItems","playbackRatesSubmenu","SettingsSubmenu","submenuElement","onFocus","srcElement","itemOrdinal","deactivateAllItems","SettingsContentItem","contentItemUI","uiElement","supportedFields","controller","size","newValue","field","chooseInstreamMethod","providerName","_defaultOptions","skipoffset","tag","InstreamAdapter","_controller","InstreamMethod","_instream","_array","_arrayOptions","_arrayIndex","_options","_oldpos","_olditem","_skipAd","_instreamItemNext","_clickHandler","hasControls","instreamPlay","instreamPause","_doubleClickHandler","sharedVideoTag","_instreamForward","_instreamTime","_instreamItemComplete","setupInstream","clickHandler","setAlternateClickHandlers","loadingAd","_loadNextItem","loadItem","minor","adModel","addClickHandler","setupSkipButton","customNext","skipMessage","skipText","applyProviderListeners","metaHandler","skipAdType","resizeMedia","replacePlaylistItem","revertAlternateClickHandlers","destroyInstream","InstreamHtml5","_currentProvider","playerAttributes","edition","mediaContext","mediaSrc","autostartMuted","autostart","advertising","skipButton","_nativeFullscreenHandler","_checkProvider","srcChanged","pseudoProvider","isVpaidProvider","adMediaModelContext","changeAdModel","stateHandler","TAB_HIDDEN","TAB_VISIBLE","onTimeIncreasesGenerator","lastVal","unbindFirstFrameEvents","_onPlayAttempt","_triggerFirstFrame","_onTime","_onTabVisible","trackFirstFrame","qoeItem","tick","getFirstFrame","loadTime","activeTab","initQoe","initialModel","oldMediaModel","timeActive","changeMediaModel","InstreamFlash","swf","_throttleTimeout","_throttlePaused","triggerFlash","Captions","_itemHandler","_captionsIndexHandler","_itemReadyHandler","_subtitlesTracksHandler","_addTrack","_tracks","_tracksById","captionsMenu","_captionsMenu","_selectDefaultIndex","setCaptionsList","_unknownCount","len","_kindSupported","_addVTTCuesToTrack","captionsMenuIndex","labelInfo","autoselect","_setCurrentIndex","ControlsLoader","ControlsModule","_isIE","View","isSetup","containerHeight","mediaContainer","inDom","iFrame","intersectionRatio","audioMode","castClicked","scrubbing","logoWidth","player","_videoLayer","_preview","_title","_captionsRenderer","_logo","_playerState","_lastWidth","_lastHeight","_instreamModel","_resizeMediaTimeout","_resizeContainerRequestId","_stateClassRequestId","displayClickHandler","fullscreenHelpers","focusHelper","_breakpoint","_controls","updateBounds","inDOM","rect","_responsiveListener","observe","updateStyles","updateContainerStyles","_resizeMedia","checkResized","_responsiveUpdate","smallPlayer","_logoClickHandler","clickHandlerHelper","_fullscreenChangeHandler","_errorHandler","_onMediaTypeChange","onStretchChange","onFlashBlockedChange","_resizePlayer","onAspectRatioChange","skin","skinColors","iframe","add","updateVisibility","_fullscreen","redraw","_stateHandler","changeControls","setMediaTitleAttribute","module","addControls","removeControls","videotag","dummyDiv","lastVisibility","videoLayer","settingsMenuVisible","renderCues","doubleClick","move","over","newVal","aspectratio","aspectRatioContainer","paddingTop","linktarget","_onChangeControls","_setLiveMode","overlaysElement","_userActivityCallback","disable","overlay","supportsDomFullscreen","requestFullscreen","_toggleDOMFullscreen","playerHeight","resetAspectMode","widthSet","heightSet","playerStyle","transformScale","_isNativeFullscreen","fsElement","fullscreenElement","modelState","newState","fullscreenState","overflowY","isAudioFile","isFlash","errorContainer","oldState","instreamStateUpdate","_stateUpdate","setPosterImage","setImage","controlsContainer","excludeControlbar","safeRegion","controlbarHeight","captionsStyle","clear","unobserve","CONTROLBAR_ONLY_HEIGHT","isAudioMode","verticalPixels","NaN","views","observed","intersectionObserver","responsiveRepaintRequestId","lazyInitIntersectionObserver","IntersectionObserver","entries","view","threshold","scheduleResponsiveRedraw","responsiveRepaint","onVisibilityChange","splice","getIntersectionObserver","getVisibility","computeVisibility","rootRect","clientWidth","getComputedStyle","targetRect","intersectionRect","atRoot","parentRect","overflow","computeRectIntersection","targetArea","intersectionArea","rect1","rect2","normalizeSkin","handleColorOverrides","skinConfig","inactive","background","colors","getControlBar","timeslider","getTimeSlider","getMenus","tooltips","getTooltips","controlBarConfig","iconsActive","timesliderConfig","rail","menusConfig","textActive","tooltipsConfig","playerId","addStyle","attr","extendParent","o","styleControlbar","styleTimeslider","styleMenus","styleTooltips","insertGlobalColorClasses","activeColorSet","color","borderColor","stroke","inactiveColorSet","elementContext","documentContext","changeCallback","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","DOCUMENT_FULLSCREEN_EVENTS","events","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","_focusFromClick","onBlur","onMouseDown","ClickHandler","domElement","defaultOptions","alternateDoubleClickHandler","out","alternateClickHandler","doubleClickHandler","_WebVTT","_defaults","back","backgroundOpacity","edgeStyle","fontSize","fontOpacity","fontScale","preprocessor","identity","windowOpacity","CaptionsRenderer","_captionsTrack","_currentCues","_timeEvent","_display","_captionsWindow","_textContainer","_fontScale","_windowStyle","populate","captions","selectCues","_setFontSize","updateBoxPosition","processCues","timeEvent","getAlignmentPosition","getCurrentCues","updateCurrentCues","allCues","difference","playerElementId","_setFontScale","windowColor","textStyle","_addTextStyle","backgroundColor","_addEdgeStyle","_setupCaptionStyles","isFinite","_setShadowDOMFontSize","_styleNativeCaptions","_stylePlayerCaptions","bgColor","bgOpacity","fontFamily","fontStyle","fontWeight","textDecoration","option","textShadow","_timeChange","_captionsListHandler","loadWebVttPolyfill","captionsTrack","Logo","LogoDefaults","_settings","_img","positions","maxHeight","maxWidth","logoAR","videoAR","logoInteractHandler","jwhide","Preview","validState","backgroundSize","imageAspectRatio","Title","titleEl","arr","description","titleStyle","padding","paddingLeft","paddingRight","updateText","middleware","currentState","isDvr","_minDvrWindow","endOfRange","timeRanges","qualityLevel","VideoListenerMixin","drmUsed","drm","stopStallCheck","_helperLastVideoHeight","adaptation","startStallCheck","timeEventObject","getPtsOffset","ptsOffset","mpegts","volumechange","playing","buf","ratechange","code","VideoActionsMixin","STALL_DELAY","VideoAttachedMixin","stallCheckTimeout_","lastStalledTime_","timeFudge","setAutoplayAttributes","removeAutoplayAttributes","Tracks","_itemTracks","_cuesByTrackId","_cachedVTTCues","_metaCuesByTextTime","_currentTextTrackIndex","_activeCuePosition","_initTextTracks","clearCueData","getSubtitlesTrack","addTextTracks","addTrackHandler","addCuesToTrack","addCaptionsCue","addVTTCue","addVTTCuesToTrack","nativemetadata","inuse","oncuechange","_cueChangeHandler","embedded","loaded","shift","_addCueToTrack","_addTrackToList","edge","itemTracks","alreadyLoaded","_clearSideloadedTextTracks","menuIndex","setCurrentSubtitleTrack","cueData","trackid","cueId","useDTS","vttCue","itemTrack","_createTrack","_cacheVTTCue","cuesToConvert","sort","metadataTrack","_removeCues","inUseTracks","_tracksModified","selectedTextTrackIndex","tracksArray","textTrackAny","textTrack","TextTrackCue","textTrackCue","removeCue","findWhere","addTextTrack","nonSideloadedTracks","groupid","activeCues","dataCues","metadataTime","JSON","id3Data","trackKind","cachedCues","cacheKeyTime","cacheLine","cacheValue","cueExists","Uint8Array","utf8ArrayToStr","syncSafeInt","parseID3","friendlyNames","TIT2","TT2","WXXX","TPE1","TP1","TALB","TAL","startingIndex","char2","char3","String","fromCharCode","utf16BigEndianArrayToStr","lastDoubleByte","sizeArray","arrayToInt","sizeString","ArrayBuffer","oldCue","arrayLength","key","startPos","firstByte","infoDelimiterPosition","info","subarray","ptsIs33Bit","transportStreamTimestamp","encoding","hasOwnProperty","createPlayPromise","removeEventListeners","listener"],"mappings":"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","file":"jwplayer.core.controls.html5.js","sourcesContent":["import { OS } from 'environment/environment';\r\nimport { dvrSeekLimit } from 'view/constants';\r\nimport { DISPLAY_CLICK, USER_ACTION, STATE_PAUSED, STATE_PLAYING, STATE_ERROR } from 'events/events';\r\nimport Events from 'utils/backbone.events';\r\nimport utils from 'utils/helpers';\r\nimport button from 'view/controls/components/button';\r\nimport Controlbar from 'view/controls/controlbar';\r\nimport DisplayContainer from 'view/controls/display-container';\r\nimport NextUpToolTip from 'view/controls/nextuptooltip';\r\nimport RightClick from 'view/controls/rightclick';\r\nimport { createSettingsMenu, setupSubmenuListeners } from 'view/controls/settings-menu';\r\nimport { getBreakpoint } from 'view/utils/breakpoint';\r\nimport { cloneIcon } from 'view/controls/icons';\r\nimport ErrorContainer from 'view/error-container';\r\nimport instances from 'api/players';\r\n\r\nrequire('css/controls.less');\r\n\r\nconst ACTIVE_TIMEOUT = OS.mobile ? 4000 : 2000;\r\n\r\nErrorContainer.cloneIcon = cloneIcon;\r\ninstances.forEach(api => {\r\n    if (api.getState() === STATE_ERROR) {\r\n        const errorIconContainer = api.getContainer().querySelector('.jw-error-msg .jw-icon');\r\n        if (errorIconContainer && !errorIconContainer.hasChildNodes()) {\r\n            errorIconContainer.appendChild(ErrorContainer.cloneIcon('error'));\r\n        }\r\n    }\r\n});\r\n\r\nconst reasonInteraction = function() {\r\n    return { reason: 'interaction' };\r\n};\r\n\r\nexport default class Controls {\r\n    constructor(context, playerContainer) {\r\n        Object.assign(this, Events);\r\n\r\n        // Alphabetic order\r\n        // Any property on the prototype should be initialized here first\r\n        this.activeTimeout = -1;\r\n        this.context = context;\r\n        this.controlbar = null;\r\n        this.displayContainer = null;\r\n        this.backdrop = null;\r\n        this.enabled = true;\r\n        this.instreamState = null;\r\n        this.keydownCallback = null;\r\n        this.keyupCallback = null;\r\n        this.blurCallback = null;\r\n        this.mute = null;\r\n        this.nextUpToolTip = null;\r\n        this.playerContainer = playerContainer;\r\n        this.rightClickMenu = null;\r\n        this.settingsMenu = null;\r\n        this.showing = false;\r\n        this.unmuteCallback = null;\r\n        this.div = null;\r\n        this.right = null;\r\n        this.activeListeners = {\r\n            mousemove: () => clearTimeout(this.activeTimeout),\r\n            mouseout: () => this.userActive()\r\n        };\r\n        this.dimensions = {};\r\n    }\r\n\r\n    enable(api, model) {\r\n        const element = this.context.createElement('div');\r\n        element.className = 'jw-controls jw-reset';\r\n        this.div = element;\r\n\r\n        const backdrop = this.context.createElement('div');\r\n        backdrop.className = 'jw-controls-backdrop jw-reset';\r\n        this.backdrop = backdrop;\r\n\r\n        const touchMode = model.get('touchMode');\r\n\r\n        // Display Buttons\r\n        if (!this.displayContainer) {\r\n            const displayContainer = new DisplayContainer(model, api);\r\n\r\n            displayContainer.buttons.display.on('click tap enter', () => {\r\n                this.trigger(DISPLAY_CLICK);\r\n                this.userActive(1000);\r\n                api.playToggle(reasonInteraction());\r\n            });\r\n\r\n            this.div.appendChild(displayContainer.element());\r\n            this.displayContainer = displayContainer;\r\n        }\r\n\r\n        // Touch UI mode when we're on mobile and we have a percentage height or we can fit the large UI in\r\n        if (touchMode) {\r\n            utils.addClass(this.playerContainer, 'jw-flag-touch');\r\n        } else {\r\n            this.rightClickMenu = new RightClick();\r\n            model.change('flashBlocked', (modelChanged, isBlocked) => {\r\n                if (isBlocked) {\r\n                    this.rightClickMenu.destroy();\r\n                } else {\r\n                    this.rightClickMenu.setup(modelChanged, this.playerContainer, this.playerContainer);\r\n                }\r\n            }, this);\r\n        }\r\n\r\n        // Controlbar\r\n        const controlbar = this.controlbar = new Controlbar(api, model);\r\n        controlbar.on(USER_ACTION, () => this.userActive());\r\n        controlbar.on('nextShown', function (data) {\r\n            this.trigger('nextShown', data);\r\n        }, this);\r\n\r\n        // Next Up Tooltip\r\n        if (model.get('nextUpDisplay') && !controlbar.nextUpToolTip) {\r\n            const nextUpToolTip = new NextUpToolTip(model, api, this.playerContainer);\r\n            nextUpToolTip.on('all', this.trigger, this);\r\n            nextUpToolTip.setup(this.context);\r\n            controlbar.nextUpToolTip = nextUpToolTip;\r\n\r\n            // NextUp needs to be behind the controlbar to not block other tooltips\r\n            this.div.appendChild(nextUpToolTip.element());\r\n        }\r\n\r\n        this.addActiveListeners(controlbar.element());\r\n        this.div.appendChild(controlbar.element());\r\n\r\n        // Settings Menu\r\n        let lastState = null;\r\n        const visibilityChangeHandler = (visible, evt) => {\r\n            const state = model.get('state');\r\n            const settingsInteraction = { reason: 'settingsInteraction' };\r\n            const isKeyEvent = (evt && evt.sourceEvent || evt || {}).type === 'keydown';\r\n\r\n            utils.toggleClass(this.div, 'jw-settings-open', visible);\r\n            if (getBreakpoint(model.get('containerWidth')) < 2) {\r\n                if (visible && state === STATE_PLAYING) {\r\n                    // Pause playback on open if we're currently playing\r\n                    api.pause(settingsInteraction);\r\n                } else if (!visible && state === STATE_PAUSED && lastState === STATE_PLAYING) {\r\n                    // Resume playback on close if we are paused and were playing before\r\n                    api.play(settingsInteraction);\r\n                }\r\n            }\r\n            \r\n            // Trigger userActive so that a dismissive click outside the player can hide the controlbar\r\n            this.userActive(null, visible || isKeyEvent);\r\n            lastState = state;\r\n\r\n            const settingsButton = this.controlbar.elements.settingsButton;\r\n            if (!visible && isKeyEvent && settingsButton) {\r\n                settingsButton.element().focus();\r\n            }\r\n        };\r\n        const settingsMenu = this.settingsMenu = createSettingsMenu(controlbar, visibilityChangeHandler);\r\n        setupSubmenuListeners(settingsMenu, controlbar, model, api);\r\n\r\n        if (OS.mobile) {\r\n            this.div.appendChild(settingsMenu.element());\r\n        } else {\r\n            this.div.insertBefore(settingsMenu.element(), controlbar.element());\r\n        }\r\n\r\n        // Unmute Autoplay Button. Ignore iOS9. Muted autoplay is supported in iOS 10+\r\n        if (model.get('autostartMuted')) {\r\n            const unmuteCallback = () => this.unmuteAutoplay(api, model);\r\n            this.mute = button('jw-autostart-mute jw-off', unmuteCallback, model.get('localization').unmute,\r\n                [cloneIcon('volume-0')]);\r\n            this.mute.show();\r\n            this.div.appendChild(this.mute.element());\r\n            // Set mute state in the controlbar\r\n            controlbar.renderVolume(true, model.get('volume'));\r\n            // Hide the controlbar until the autostart flag is removed\r\n            utils.addClass(this.playerContainer, 'jw-flag-autostart');\r\n\r\n            model.on('change:autostartFailed change:autostartMuted change:mute', unmuteCallback, this);\r\n            this.unmuteCallback = unmuteCallback;\r\n        }\r\n\r\n        // Keyboard Commands\r\n        function adjustSeek(amount) {\r\n            let min = 0;\r\n            let max = model.get('duration');\r\n            const position = model.get('position');\r\n            if (model.get('streamType') === 'DVR') {\r\n                min = max;\r\n                max = Math.max(position, dvrSeekLimit);\r\n            }\r\n            const newSeek = utils.between(position + amount, min, max);\r\n            api.seek(newSeek, reasonInteraction());\r\n        }\r\n\r\n        function adjustVolume(amount) {\r\n            const newVol = utils.between(model.get('volume') + amount, 0, 100);\r\n            api.setVolume(newVol);\r\n        }\r\n\r\n        const handleKeydown = (evt) => {\r\n            // If Meta keys return\r\n            if (evt.ctrlKey || evt.metaKey) {\r\n                // Let event bubble upwards\r\n                return true;\r\n            }\r\n\r\n            switch (evt.keyCode) {\r\n                case 27: // Esc\r\n                    api.setFullscreen(false);\r\n                    this.playerContainer.blur();\r\n                    this.userInactive();\r\n                    break;\r\n                case 13: // enter\r\n                case 32: // space\r\n                    api.playToggle(reasonInteraction());\r\n                    break;\r\n                case 37: // left-arrow, if not adMode\r\n                    if (!this.instreamState) {\r\n                        adjustSeek(-5);\r\n                    }\r\n                    break;\r\n                case 39: // right-arrow, if not adMode\r\n                    if (!this.instreamState) {\r\n                        adjustSeek(5);\r\n                    }\r\n                    break;\r\n                case 38: // up-arrow\r\n                    adjustVolume(10);\r\n                    break;\r\n                case 40: // down-arrow\r\n                    adjustVolume(-10);\r\n                    break;\r\n                case 67: // c-key\r\n                    {\r\n                        const captionsList = api.getCaptionsList();\r\n                        const listLength = captionsList.length;\r\n                        if (listLength) {\r\n                            const nextIndex = (api.getCurrentCaptions() + 1) % listLength;\r\n                            api.setCurrentCaptions(nextIndex);\r\n                        }\r\n                    }\r\n                    break;\r\n                case 77: // m-key\r\n                    api.setMute();\r\n                    break;\r\n                case 70: // f-key\r\n                    api.setFullscreen();\r\n                    break;\r\n                default:\r\n                    if (evt.keyCode >= 48 && evt.keyCode <= 59) {\r\n                        // if 0-9 number key, move to n/10 of the percentage of the video\r\n                        const number = evt.keyCode - 48;\r\n                        const newSeek = (number / 10) * model.get('duration');\r\n                        api.seek(newSeek, reasonInteraction());\r\n                    }\r\n            }\r\n\r\n            if (/13|32|37|38|39|40/.test(evt.keyCode)) {\r\n                // Prevent keypresses from scrolling the screen\r\n                evt.preventDefault();\r\n                return false;\r\n            }\r\n        };\r\n        this.playerContainer.addEventListener('keydown', handleKeydown);\r\n        this.keydownCallback = handleKeydown;\r\n\r\n        // keep controls active when navigating inside the player\r\n        const handleKeyup = (evt) => {\r\n            if (!this.instreamState) {\r\n                const isTab = evt.keyCode === 9;\r\n                if (isTab) {\r\n                    const insideContainer = this.playerContainer.contains(evt.target);\r\n                    this.userActive(null, insideContainer);\r\n                }\r\n            }\r\n        };\r\n        this.playerContainer.addEventListener('keyup', handleKeyup);\r\n        this.keyupCallback = handleKeyup;\r\n\r\n        // Hide controls when focus leaves the player\r\n        const blurCallback = (evt) => {\r\n            const insideContainer = this.playerContainer.contains(evt.relatedTarget);\r\n            if (!insideContainer) {\r\n                this.userInactive();\r\n            }\r\n        };\r\n        this.playerContainer.addEventListener('blur', blurCallback, true);\r\n        this.blurCallback = blurCallback;\r\n\r\n        // Show controls when enabled\r\n        this.userActive();\r\n\r\n        this.playerContainer.appendChild(this.div);\r\n\r\n        this.addBackdrop();\r\n    }\r\n\r\n    disable(model) {\r\n        this.off();\r\n\r\n        if (model) {\r\n            model.off(null, null, this);\r\n            const mediaModel = model.get('mediaModel');\r\n            if (mediaModel) {\r\n                mediaModel.off(null, null, this);\r\n            }\r\n        }\r\n\r\n        clearTimeout(this.activeTimeout);\r\n\r\n        if (this.div.parentNode) {\r\n            utils.removeClass(this.playerContainer, 'jw-flag-touch');\r\n            this.playerContainer.removeChild(this.div);\r\n        }\r\n        if (this.controlbar) {\r\n            this.removeActiveListeners(this.controlbar.element());\r\n        }\r\n        if (this.rightClickMenu) {\r\n            this.rightClickMenu.destroy();\r\n        }\r\n\r\n        if (this.keydownCallback) {\r\n            this.playerContainer.removeEventListener('keydown', this.keydownCallback);\r\n        }\r\n\r\n        if (this.keyupCallback) {\r\n            this.playerContainer.removeEventListener('keyup', this.keyupCallback);\r\n        }\r\n\r\n        if (this.blurCallback) {\r\n            this.playerContainer.removeEventListener('blur', this.blurCallback);\r\n        }\r\n\r\n        const nextUpToolTip = this.nextUpToolTip;\r\n        if (nextUpToolTip) {\r\n            nextUpToolTip.destroy();\r\n        }\r\n\r\n        const settingsMenu = this.settingsMenu;\r\n        if (settingsMenu) {\r\n            settingsMenu.destroy();\r\n            this.div.removeChild(settingsMenu.element());\r\n        }\r\n\r\n        this.removeBackdrop();\r\n    }\r\n\r\n    controlbarHeight() {\r\n        if (!this.dimensions.cbHeight) {\r\n            this.dimensions.cbHeight = this.controlbar.element().clientHeight;\r\n        }\r\n        return this.dimensions.cbHeight;\r\n    }\r\n\r\n    element() {\r\n        return this.div;\r\n    }\r\n\r\n    logoContainer() {\r\n        return this.right;\r\n    }\r\n\r\n    resize() {\r\n        this.dimensions = {};\r\n    }\r\n\r\n    unmuteAutoplay(api, model) {\r\n        const autostartSucceeded = !model.get('autostartFailed');\r\n        let mute = model.get('mute');\r\n\r\n        // If autostart succeeded, it means the user has chosen to unmute the video,\r\n        // so we should update the model, setting mute to false\r\n        if (autostartSucceeded) {\r\n            mute = false;\r\n        } else {\r\n            // Don't try to play again when viewable since it will keep failing\r\n            model.set('playOnViewable', false);\r\n        }\r\n        if (this.unmuteCallback) {\r\n            model.off('change:autostartFailed change:autostartMuted change:mute', this.unmuteCallback);\r\n            this.unmuteCallback = null;\r\n        }\r\n        model.set('autostartFailed', undefined);\r\n        model.set('autostartMuted', undefined);\r\n        api.setMute(mute);\r\n        // the model's mute value may not have changed. ensure the controlbar's mute button is in the right state\r\n        this.controlbar.renderVolume(mute, model.get('volume'));\r\n        this.mute.hide();\r\n        utils.removeClass(this.playerContainer, 'jw-flag-autostart');\r\n    }\r\n\r\n    addActiveListeners(element) {\r\n        if (element && !OS.mobile) {\r\n            element.addEventListener('mousemove', this.activeListeners.mousemove);\r\n            element.addEventListener('mouseout', this.activeListeners.mouseout);\r\n        }\r\n    }\r\n\r\n    removeActiveListeners(element) {\r\n        if (element) {\r\n            element.removeEventListener('mousemove', this.activeListeners.mousemove);\r\n            element.removeEventListener('mouseout', this.activeListeners.mouseout);\r\n        }\r\n    }\r\n\r\n    userActive(timeout, isKeyDown) {\r\n        clearTimeout(this.activeTimeout);\r\n\r\n        if (!isKeyDown) {\r\n            this.activeTimeout = setTimeout(() => this.userInactive(),\r\n                timeout || ACTIVE_TIMEOUT);\r\n        }\r\n        if (!this.showing) {\r\n            utils.removeClass(this.playerContainer, 'jw-flag-user-inactive');\r\n            this.showing = true;\r\n            this.trigger('userActive');\r\n        }\r\n    }\r\n\r\n    userInactive() {\r\n        clearTimeout(this.activeTimeout);\r\n        if (this.settingsMenu.visible) {\r\n            return;\r\n        }\r\n\r\n        this.showing = false;\r\n        utils.addClass(this.playerContainer, 'jw-flag-user-inactive');\r\n        this.trigger('userInactive');\r\n    }\r\n\r\n    addBackdrop() {\r\n        // Put the backdrop element on top of overlays during instream mode\r\n        // otherwise keep it behind captions and on top of preview poster\r\n        const element = this.instreamState ? this.div : this.playerContainer.querySelector('.jw-captions');\r\n        this.playerContainer.insertBefore(this.backdrop, element);\r\n    }\r\n\r\n    removeBackdrop() {\r\n        const parent = this.backdrop.parentNode;\r\n        if (parent) {\r\n            parent.removeChild(this.backdrop);\r\n        }\r\n    }\r\n\r\n    setupInstream(instreamModel) {\r\n        this.instreamState = instreamModel.get('state');\r\n        // Call Controls.userActivity to display the UI temporarily for the start of the ad\r\n        this.userActive();\r\n        this.addBackdrop();\r\n        this.controlbar.useInstreamTime(instreamModel);\r\n        if (this.settingsMenu) {\r\n            this.settingsMenu.close();\r\n        }\r\n        utils.removeClass(this.playerContainer, 'jw-flag-autostart');\r\n    }\r\n\r\n    destroyInstream(model) {\r\n        this.instreamState = null;\r\n        this.addBackdrop();\r\n        this.controlbar.syncPlaybackTime(model);\r\n        if (model.get('autostartMuted')) {\r\n            utils.addClass(this.playerContainer, 'jw-flag-autostart');\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/controls.js","import instances from 'api/players';\r\nimport { showView } from 'api/core-shim';\r\nimport setConfig from 'api/set-config';\r\nimport setPlaylist from 'api/set-playlist';\r\nimport ApiQueueDecorator from 'api/api-queue';\r\nimport PlaylistLoader from 'playlist/loader';\r\nimport Playlist from 'playlist/playlist';\r\nimport InstreamAdapter from 'controller/instream-adapter';\r\nimport Captions from 'controller/captions';\r\nimport Model from 'controller/model';\r\nimport View from 'view/view';\r\nimport changeStateEvent from 'events/change-state-event';\r\nimport eventsMiddleware from 'controller/events-middleware';\r\nimport Events from 'utils/backbone.events';\r\nimport { OS } from 'environment/environment';\r\nimport { streamType } from 'providers/utils/stream-type';\r\nimport Promise, { resolved } from 'polyfills/promise';\r\nimport cancelable from 'utils/cancelable';\r\nimport _ from 'utils/underscore';\r\nimport { PLAYER_STATE, STATE_BUFFERING, STATE_IDLE, STATE_COMPLETE, STATE_PAUSED, STATE_PLAYING, STATE_ERROR, STATE_LOADING,\r\n    STATE_STALLED, MEDIA_BEFOREPLAY, PLAYLIST_LOADED, ERROR, PLAYLIST_COMPLETE, CAPTIONS_CHANGED, READY,\r\n    MEDIA_ERROR, MEDIA_COMPLETE, CAST_SESSION, FULLSCREEN, PLAYLIST_ITEM, MEDIA_VOLUME, MEDIA_MUTE, PLAYBACK_RATE_CHANGED,\r\n    CAPTIONS_LIST, CONTROLS, RESIZE } from 'events/events';\r\n\r\n// The model stores a different state than the provider\r\nfunction normalizeState(newstate) {\r\n    if (newstate === STATE_LOADING || newstate === STATE_STALLED) {\r\n        return STATE_BUFFERING;\r\n    }\r\n    return newstate;\r\n}\r\n\r\nconst Controller = function() {};\r\n\r\nObject.assign(Controller.prototype, {\r\n    setup(config, _api, originalContainer, eventListeners, commandQueue) {\r\n        const _this = this;\r\n        const _model = _this._model = new Model();\r\n\r\n        let _view;\r\n        let _captions;\r\n        let _preplay = false;\r\n        let _actionOnAttach;\r\n        let _stopPlaylist = false;\r\n        let _interruptPlay;\r\n        let checkAutoStartCancelable = cancelable(_checkAutoStart);\r\n        let updatePlaylistCancelable = cancelable(function() {});\r\n\r\n        _this.originalContainer = _this.currentContainer = originalContainer;\r\n        _this._events = eventListeners;\r\n\r\n        const _eventQueuedUntilReady = [];\r\n\r\n        _model.setup(config);\r\n        _view = this._view = new View(_api, _model);\r\n        _view.on('all', _triggerAfterReady, _this);\r\n\r\n        _model.mediaController.on('all', _triggerAfterReady, _this);\r\n        _model.mediaController.on(MEDIA_COMPLETE, () => {\r\n            // Insert a small delay here so that other complete handlers can execute\r\n            resolved.then(_completeHandler);\r\n        });\r\n        _model.mediaController.on(MEDIA_ERROR, _this.triggerError, _this);\r\n        _model.on(ERROR, _this.triggerError, _this);\r\n\r\n        // If we attempt to load flash, assume it is blocked if we don't hear back within a second\r\n        _model.on('change:flashBlocked', function(model, isBlocked) {\r\n            if (!isBlocked) {\r\n                this._model.set('errorEvent', undefined);\r\n                return;\r\n            }\r\n            // flashThrottle indicates whether this is a throttled event or plugin blocked event\r\n            const throttled = !!model.get('flashThrottle');\r\n            const errorEvent = {\r\n                message: throttled ? 'Click to run Flash' : 'Flash plugin failed to load'\r\n            };\r\n            // Only dispatch an error for Flash blocked, not throttled events\r\n            if (!throttled) {\r\n                this.trigger(ERROR, errorEvent);\r\n            }\r\n            this._model.set('errorEvent', errorEvent);\r\n        }, this);\r\n\r\n        _model.on('change:state', changeStateEvent, this);\r\n\r\n        _model.on('change:duration', function(model, duration) {\r\n            const minDvrWindow = model.get('minDvrWindow');\r\n            const type = streamType(duration, minDvrWindow);\r\n            model.setStreamType(type);\r\n        });\r\n\r\n        _model.on('change:castState', function(model, evt) {\r\n            _this.trigger(CAST_SESSION, evt);\r\n        });\r\n        _model.on('change:fullscreen', function(model, bool) {\r\n            _this.trigger(FULLSCREEN, {\r\n                fullscreen: bool\r\n            });\r\n            if (bool) {\r\n                // Stop autoplay behavior when the player enters fullscreen\r\n                model.set('playOnViewable', false);\r\n            }\r\n        });\r\n        _model.on('change:volume', function(model, vol) {\r\n            _this.trigger(MEDIA_VOLUME, {\r\n                volume: vol\r\n            });\r\n        });\r\n        _model.on('change:mute', function(model, mute) {\r\n            _this.trigger(MEDIA_MUTE, {\r\n                mute: mute\r\n            });\r\n        });\r\n\r\n        _model.on('change:playbackRate', function(model, rate) {\r\n            _this.trigger(PLAYBACK_RATE_CHANGED, {\r\n                playbackRate: rate,\r\n                position: model.get('position')\r\n            });\r\n        });\r\n\r\n        _model.on('change:scrubbing', function(model, state) {\r\n            if (state) {\r\n                _pause();\r\n            } else {\r\n                _play({ reason: 'interaction' });\r\n            }\r\n        });\r\n\r\n        // For onCaptionsList and onCaptionsChange\r\n        _model.on('change:captionsList', function(model, captionsList) {\r\n            _this.triggerAfterReady(CAPTIONS_LIST, {\r\n                tracks: captionsList,\r\n                track: _model.get('captionsIndex') || 0\r\n            });\r\n        });\r\n\r\n        _model.on('change:mediaModel', function(model) {\r\n            model.set('errorEvent', undefined);\r\n            model.mediaModel.change(PLAYER_STATE, function(mediaModel, state) {\r\n                if (!model.get('errorEvent')) {\r\n                    model.set(PLAYER_STATE, normalizeState(state));\r\n                }\r\n            });\r\n        });\r\n\r\n        // Ensure captionsList event is raised after playlistItem\r\n        _captions = new Captions(_model);\r\n        _captions.on('all', _triggerAfterReady);\r\n\r\n        function _video() {\r\n            return _model.getVideo();\r\n        }\r\n\r\n        function _triggerAfterReady(type, e) {\r\n            _this.triggerAfterReady(type, e);\r\n        }\r\n\r\n        function triggerControls(model, enable) {\r\n            _this.trigger(CONTROLS, {\r\n                controls: enable\r\n            });\r\n        }\r\n\r\n        _model.on('change:viewSetup', function(model, viewSetup) {\r\n            if (viewSetup) {\r\n                showView(this, _view.element());\r\n            }\r\n        }, this);\r\n\r\n        this.playerReady = function() {\r\n            const related = _api.getPlugin('related');\r\n            if (related) {\r\n                related.on('nextUp', (nextUp) => {\r\n                    _model.set('nextUp', nextUp);\r\n                });\r\n            }\r\n\r\n            // Fire 'ready' once the view has resized so that player width and height are available\r\n            // (requires the container to be in the DOM)\r\n            _view.once(RESIZE, _playerReadyNotify);\r\n\r\n            _view.init();\r\n        };\r\n\r\n        function _playerReadyNotify() {\r\n            _model.change('visibility', _updateViewable);\r\n            _model.on('change:controls', triggerControls);\r\n\r\n            // Tell the api that we are loaded\r\n            _this.trigger(READY, {\r\n                // this will be updated by Api\r\n                setupTime: 0\r\n            });\r\n\r\n            _model.change('playlist', function(model, playlist) {\r\n                if (playlist.length) {\r\n                    const eventData = {\r\n                        playlist: playlist\r\n                    };\r\n                    const feedData = _model.get('feedData');\r\n                    if (feedData) {\r\n                        const eventFeedData = Object.assign({}, feedData);\r\n                        delete eventFeedData.playlist;\r\n                        eventData.feedData = eventFeedData;\r\n                    }\r\n                    _this.trigger(PLAYLIST_LOADED, eventData);\r\n                }\r\n            });\r\n\r\n            _model.change('playlistItem', function(model, playlistItem) {\r\n                if (playlistItem) {\r\n                    _this.trigger(PLAYLIST_ITEM, {\r\n                        index: _model.get('item'),\r\n                        item: playlistItem\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Stop queueing certain events\r\n            _this.triggerAfterReady = _this.trigger;\r\n\r\n            // Send queued events\r\n            for (let i = 0; i < _eventQueuedUntilReady.length; i++) {\r\n                const event = _eventQueuedUntilReady[i];\r\n                _preplay = (event.type === MEDIA_BEFOREPLAY);\r\n                _this.trigger(event.type, event.args);\r\n                _preplay = false;\r\n            }\r\n\r\n            _model.change('viewable', viewableChange);\r\n            _model.change('viewable', _checkPlayOnViewable);\r\n            _model.once('change:autostartFailed change:autostartMuted change:mute', function(model) {\r\n                model.off('change:viewable', _checkPlayOnViewable);\r\n            });\r\n\r\n            // Run _checkAutoStart() last\r\n            // 'viewable' changes can result in preload() being called on the initial provider instance\r\n            _checkAutoStart();\r\n        }\r\n\r\n        function _updateViewable(model, visibility) {\r\n            if (!_.isUndefined(visibility)) {\r\n                _model.set('viewable', Math.round(visibility));\r\n            }\r\n        }\r\n\r\n        function _checkAutoStart() {\r\n            if (!apiQueue) {\r\n                // this player has been destroyed\r\n                return;\r\n            }\r\n            if (!OS.mobile && _model.get('autostart') === true) {\r\n                // Autostart immediately if we're not mobile and not waiting for the player to become viewable first\r\n                _autoStart();\r\n            }\r\n            apiQueue.flush();\r\n        }\r\n\r\n        function viewableChange(model, viewable) {\r\n            _this.trigger('viewable', {\r\n                viewable: viewable\r\n            });\r\n\r\n\r\n            // Only attempt to preload if this is the first player on the page or viewable\r\n            if (instances[0] === _api || viewable === 1) {\r\n                model.preloadVideo();\r\n            }\r\n        }\r\n\r\n        function _checkPlayOnViewable(model, viewable) {\r\n            if (model.get('playOnViewable')) {\r\n                if (viewable) {\r\n                    _autoStart();\r\n                } else if (OS.mobile) {\r\n                    _this.pause({ reason: 'autostart' });\r\n                }\r\n            }\r\n        }\r\n\r\n        this.triggerAfterReady = function(type, args) {\r\n            _eventQueuedUntilReady.push({\r\n                type: type,\r\n                args: args\r\n            });\r\n        };\r\n\r\n        function _load(item, feedData) {\r\n\r\n            _this.trigger('destroyPlugin', {});\r\n            _stop(true);\r\n\r\n            checkAutoStartCancelable.cancel();\r\n            checkAutoStartCancelable = cancelable(_checkAutoStart);\r\n            updatePlaylistCancelable.cancel();\r\n\r\n            _primeMediaElementForPlayback();\r\n\r\n            let loadPromise;\r\n\r\n            switch (typeof item) {\r\n                case 'string': {\r\n                    const loadPlaylistPromise = _loadPlaylist(item).catch(error => {\r\n                        _this.triggerError({\r\n                            message: `Error loading playlist: ${error.message}`\r\n                        });\r\n                    });\r\n                    updatePlaylistCancelable = cancelable((data) => {\r\n                        if (data) {\r\n                            return _updatePlaylist(data.playlist, data);\r\n                        }\r\n                    });\r\n                    loadPromise = loadPlaylistPromise.then(updatePlaylistCancelable.async);\r\n                    break;\r\n                }\r\n                case 'object':\r\n                    loadPromise = _updatePlaylist(item, feedData);\r\n                    break;\r\n                case 'number':\r\n                    loadPromise = _setItem(item);\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            loadPromise.catch(error => {\r\n                _this.triggerError({\r\n                    message: `Playlist error: ${error.message}`\r\n                });\r\n            });\r\n\r\n            loadPromise.then(checkAutoStartCancelable.async).catch(function() {});\r\n        }\r\n\r\n        function _updatePlaylist(data, feedData) {\r\n            const playlist = Playlist(data);\r\n            try {\r\n                setPlaylist(_model, playlist, feedData);\r\n            } catch (error) {\r\n                _model.set('item', 0);\r\n                _model.set('playlistItem', null);\r\n                return Promise.reject(error);\r\n            }\r\n            return _setItem(0);\r\n        }\r\n\r\n        function _loadPlaylist(toLoad) {\r\n            return new Promise((resolve, reject) => {\r\n                const loader = new PlaylistLoader();\r\n                loader.on(PLAYLIST_LOADED, function(data) {\r\n                    resolve(data);\r\n                });\r\n                loader.on(ERROR, function(error) {\r\n                    _model.set('feedData', {\r\n                        error: error\r\n                    });\r\n                    reject(error);\r\n                }, this);\r\n                loader.load(toLoad);\r\n            });\r\n        }\r\n\r\n        function _getAdState() {\r\n            return _this._instreamAdapter && _this._instreamAdapter.getState();\r\n        }\r\n\r\n        function _getState() {\r\n            const adState = _getAdState();\r\n            if (_.isString(adState)) {\r\n                return adState;\r\n            }\r\n            return _model.get('state');\r\n        }\r\n\r\n        function _play(meta) {\r\n            checkAutoStartCancelable.cancel();\r\n\r\n            if (_model.get('state') === STATE_ERROR) {\r\n                return resolved;\r\n            }\r\n\r\n            const playReason = _getReason(meta);\r\n            _model.set('playReason', playReason);\r\n\r\n            const adState = _getAdState();\r\n            if (_.isString(adState)) {\r\n                // this will resume the ad. _api.playAd would load a new ad\r\n                _api.pauseAd(false);\r\n                return resolved;\r\n            }\r\n\r\n            if (_model.get('state') === STATE_COMPLETE) {\r\n                _stop(true);\r\n                _setItem(0);\r\n            }\r\n\r\n            if (!_preplay) {\r\n                _preplay = true;\r\n                _this.triggerAfterReady(MEDIA_BEFOREPLAY, { playReason: playReason });\r\n                _preplay = false;\r\n                if (_interruptPlay) {\r\n                    _interruptPlay = false;\r\n                    _actionOnAttach = null;\r\n                    _primeMediaElementForPlayback();\r\n                    return resolved;\r\n                }\r\n            }\r\n\r\n            return _model.playVideo(playReason);\r\n        }\r\n\r\n        function _getReason(meta) {\r\n            if (meta && meta.reason) {\r\n                return meta.reason;\r\n            }\r\n            if (_inInteraction(window.event)) {\r\n                return 'interaction';\r\n            }\r\n            return 'external';\r\n        }\r\n\r\n        function _inInteraction(event) {\r\n            return event && /^(?:mouse|pointer|touch|gesture|click|key)/.test(event.type);\r\n        }\r\n\r\n        function _primeMediaElementForPlayback() {\r\n            // If we're in a user-gesture event call load() on video to allow async playback\r\n            if (_inInteraction(window.event)) {\r\n                const mediaElement = _model.get('mediaElement');\r\n                if (!mediaElement.src) {\r\n                    mediaElement.load();\r\n                }\r\n            }\r\n        }\r\n\r\n        function _autoStart() {\r\n            const state = _model.get('state');\r\n            if (state === STATE_IDLE || state === STATE_PAUSED) {\r\n                _play({ reason: 'autostart' }).catch(() => {\r\n                    if (!_this._instreamAdapter) {\r\n                        _model.set('autostartFailed', true);\r\n                    }\r\n                    _actionOnAttach = null;\r\n                });\r\n            }\r\n        }\r\n\r\n        function _stop(internal) {\r\n            checkAutoStartCancelable.cancel();\r\n            apiQueue.empty();\r\n\r\n            const adState = _getAdState();\r\n            if (_.isString(adState)) {\r\n                return;\r\n            }\r\n\r\n            const fromApi = !internal;\r\n\r\n            _actionOnAttach = null;\r\n\r\n            if (fromApi) {\r\n                _stopPlaylist = true;\r\n            }\r\n\r\n            if (_preplay) {\r\n                _interruptPlay = true;\r\n            }\r\n\r\n            _model.set('errorEvent', undefined);\r\n\r\n            const provider = _model.getVideo();\r\n            _model.stopVideo();\r\n            if (!provider) {\r\n                _model.set('state', STATE_IDLE);\r\n            }\r\n        }\r\n\r\n        function _pause(meta) {\r\n            _actionOnAttach = null;\r\n            checkAutoStartCancelable.cancel();\r\n\r\n            const pauseReason = _getReason(meta);\r\n            _model.set('pauseReason', pauseReason);\r\n            // Stop autoplay behavior if the video is paused by the user or an api call\r\n            if (pauseReason === 'interaction' || pauseReason === 'external') {\r\n                _model.set('playOnViewable', false);\r\n            }\r\n\r\n            const adState = _getAdState();\r\n            if (_.isString(adState)) {\r\n                _api.pauseAd(true);\r\n                return;\r\n            }\r\n\r\n            switch (_model.get('state')) {\r\n                case STATE_ERROR:\r\n                    return;\r\n                case STATE_PLAYING:\r\n                case STATE_BUFFERING: {\r\n\r\n                    _video().pause();\r\n                    break;\r\n                }\r\n                default:\r\n                    if (_preplay) {\r\n                        _interruptPlay = true;\r\n                    }\r\n            }\r\n        }\r\n\r\n        function _isIdle() {\r\n            const state = _model.get('state');\r\n            return (state === STATE_IDLE || state === STATE_COMPLETE || state === STATE_ERROR);\r\n        }\r\n\r\n        function _seek(pos, meta) {\r\n            if (_model.get('state') === STATE_ERROR) {\r\n                return;\r\n            }\r\n            if (!_model.get('scrubbing') && _model.get('state') !== STATE_PLAYING) {\r\n                _play(meta);\r\n            }\r\n            _video().seek(pos);\r\n        }\r\n\r\n        function _item(index, meta) {\r\n            _stop(true);\r\n            _setItem(index);\r\n            _play(meta);\r\n        }\r\n\r\n        function _setItem(index) {\r\n            return _model.setItemIndex(index);\r\n        }\r\n\r\n        function _prev(meta) {\r\n            _item(_model.get('item') - 1, meta);\r\n        }\r\n\r\n        function _next(meta) {\r\n            _item(_model.get('item') + 1, meta);\r\n        }\r\n\r\n        function _completeHandler() {\r\n            if (!_isIdle()) {\r\n                // Something has made an API call before the complete handler has fired.\r\n                return;\r\n            } else if (_stopPlaylist) {\r\n                // Stop called in onComplete event listener\r\n                _stopPlaylist = false;\r\n                return;\r\n            }\r\n\r\n            _actionOnAttach = _completeHandler;\r\n\r\n            const idx = _model.get('item');\r\n            if (idx === _model.get('playlist').length - 1) {\r\n                // If it's the last item in the playlist\r\n                if (_model.get('repeat')) {\r\n                    _next({ reason: 'repeat' });\r\n                } else {\r\n                    // Exit fullscreen on IOS so that our overlays show to the user\r\n                    if (OS.iOS) {\r\n                        _setFullscreen(false);\r\n                    }\r\n                    // Autoplay/pause no longer needed since there's no more media to play\r\n                    // This prevents media from replaying when a completed video scrolls into view\r\n                    _model.set('playOnViewable', false);\r\n                    _model.set('state', STATE_COMPLETE);\r\n                    _this.trigger(PLAYLIST_COMPLETE, {});\r\n                }\r\n                return;\r\n            }\r\n\r\n            // It wasn't the last item in the playlist,\r\n            //  so go to the next one and trigger an autoadvance event\r\n            const related = _api.getPlugin('related');\r\n            triggerAdvanceEvent(related, 'nextAutoAdvance');\r\n            _next({ reason: 'playlist' });\r\n        }\r\n\r\n        function _setCurrentQuality(index) {\r\n            if (_video()) {\r\n                index = parseInt(index, 10) || 0;\r\n                _video().setCurrentQuality(index);\r\n            }\r\n        }\r\n\r\n        function _getCurrentQuality() {\r\n            if (_video()) {\r\n                return _video().getCurrentQuality();\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        function _getConfig() {\r\n            return this._model ? this._model.getConfiguration() : undefined;\r\n        }\r\n\r\n        function _getVisualQuality() {\r\n            if (this._model.mediaModel) {\r\n                return this._model.mediaModel.get('visualQuality');\r\n            }\r\n            // if quality is not implemented in the provider,\r\n            // return quality info based on current level\r\n            const qualityLevels = _getQualityLevels();\r\n            if (qualityLevels) {\r\n                const levelIndex = _getCurrentQuality();\r\n                const level = qualityLevels[levelIndex];\r\n                if (level) {\r\n                    return {\r\n                        level: Object.assign({\r\n                            index: levelIndex\r\n                        }, level),\r\n                        mode: '',\r\n                        reason: ''\r\n                    };\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function _getQualityLevels() {\r\n            if (_video()) {\r\n                return _video().getQualityLevels();\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function _setCurrentAudioTrack(index) {\r\n            if (_video()) {\r\n                index = parseInt(index, 10) || 0;\r\n                _video().setCurrentAudioTrack(index);\r\n            }\r\n        }\r\n\r\n        function _getCurrentAudioTrack() {\r\n            if (_video()) {\r\n                return _video().getCurrentAudioTrack();\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        function _getAudioTracks() {\r\n            if (_video()) {\r\n                return _video().getAudioTracks();\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function _setCurrentCaptions(index) {\r\n            index = parseInt(index, 10) || 0;\r\n\r\n            // update provider subtitle track\r\n            _model.persistVideoSubtitleTrack(index);\r\n\r\n            _this.trigger(CAPTIONS_CHANGED, {\r\n                tracks: _getCaptionsList(),\r\n                track: index\r\n            });\r\n        }\r\n\r\n        function _getCurrentCaptions() {\r\n            return _captions.getCurrentIndex();\r\n        }\r\n\r\n        function _getCaptionsList() {\r\n            return _captions.getCaptionsList();\r\n        }\r\n\r\n        /** Used for the InStream API **/\r\n        function _detachMedia() {\r\n            if (_preplay) {\r\n                _interruptPlay = true;\r\n            }\r\n            return _model.detachMedia();\r\n        }\r\n\r\n        function _attachMedia() {\r\n            // Called after instream ends\r\n            _model.attachMedia();\r\n\r\n            if (typeof _actionOnAttach === 'function') {\r\n                _actionOnAttach();\r\n            }\r\n        }\r\n\r\n        function _setFullscreen(state) {\r\n            if (!_.isBoolean(state)) {\r\n                state = !_model.get('fullscreen');\r\n            }\r\n\r\n            _model.set('fullscreen', state);\r\n            if (_this._instreamAdapter && _this._instreamAdapter._adModel) {\r\n                _this._instreamAdapter._adModel.set('fullscreen', state);\r\n            }\r\n        }\r\n\r\n        function _nextUp() {\r\n            const related = _api.getPlugin('related');\r\n            triggerAdvanceEvent(related, 'nextClick', () => related.next());\r\n        }\r\n\r\n        function triggerAdvanceEvent(related, evt, cb) {\r\n            if (!related) {\r\n                return;\r\n            }\r\n            const nextUp = _model.get('nextUp');\r\n            if (nextUp) {\r\n                _this.trigger(evt, {\r\n                    mode: nextUp.mode,\r\n                    ui: 'nextup',\r\n                    target: nextUp,\r\n                    itemsShown: [ nextUp ],\r\n                    feedData: nextUp.feedData,\r\n                });\r\n            }\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        }\r\n\r\n        /** Controller API / public methods **/\r\n        this.load = _load;\r\n        this.play = _play;\r\n        this.pause = _pause;\r\n        this.seek = _seek;\r\n        this.stop = _stop;\r\n        this.playlistItem = _item;\r\n        this.playlistNext = _next;\r\n        this.playlistPrev = _prev;\r\n        this.setCurrentCaptions = _setCurrentCaptions;\r\n        this.setCurrentQuality = _setCurrentQuality;\r\n        this.setFullscreen = _setFullscreen;\r\n        this.detachMedia = _detachMedia;\r\n        this.attachMedia = _attachMedia;\r\n        this.getCurrentQuality = _getCurrentQuality;\r\n        this.getQualityLevels = _getQualityLevels;\r\n        this.setCurrentAudioTrack = _setCurrentAudioTrack;\r\n        this.getCurrentAudioTrack = _getCurrentAudioTrack;\r\n        this.getAudioTracks = _getAudioTracks;\r\n        this.getCurrentCaptions = _getCurrentCaptions;\r\n        this.getCaptionsList = _getCaptionsList;\r\n        this.getVisualQuality = _getVisualQuality;\r\n        this.getConfig = _getConfig;\r\n        this.getState = _getState;\r\n        this.next = _nextUp;\r\n        this.setConfig = (newConfig) => setConfig(_this, newConfig);\r\n\r\n        // Model passthroughs\r\n        this.setVolume = _model.setVolume.bind(_model);\r\n        this.setMute = _model.setMute.bind(_model);\r\n        this.setPlaybackRate = _model.setPlaybackRate.bind(_model);\r\n        this.getProvider = function() {\r\n            return _model.get('provider');\r\n        };\r\n        this.getWidth = function() {\r\n            return _model.get('containerWidth');\r\n        };\r\n        this.getHeight = function() {\r\n            return _model.get('containerHeight');\r\n        };\r\n        this.getItemQoe = function() {\r\n            return _model._qoeItem;\r\n        };\r\n        this.isBeforeComplete = function () {\r\n            return _model.checkComplete();\r\n        };\r\n        this.addButton = function(img, tooltip, callback, id, btnClass) {\r\n            let customButtons = _model.get('customButtons') || [];\r\n            let added = false;\r\n            const newButton = {\r\n                img: img,\r\n                tooltip: tooltip,\r\n                callback: callback,\r\n                id: id,\r\n                btnClass: btnClass\r\n            };\r\n\r\n            customButtons = customButtons.reduce(function(buttons, button) {\r\n                if (button.id === newButton.id) {\r\n                    added = true;\r\n                    buttons.push(newButton);\r\n                } else {\r\n                    buttons.push(button);\r\n                }\r\n                return buttons;\r\n            }, []);\r\n\r\n            if (!added) {\r\n                customButtons.unshift(newButton);\r\n            }\r\n\r\n            _model.set('customButtons', customButtons);\r\n        };\r\n        this.removeButton = function(id) {\r\n            const customButtons = _.filter(\r\n                _model.get('customButtons'),\r\n                (button) => button.id !== id\r\n            );\r\n\r\n            _model.set('customButtons', customButtons);\r\n        };\r\n        // Delegate trigger so we can run a middleware function before any event is bubbled through the API\r\n        this.trigger = function (type, args) {\r\n            const data = eventsMiddleware(_model, type, args);\r\n            return Events.trigger.call(this, type, data);\r\n        };\r\n\r\n        // View passthroughs\r\n        this.resize = _view.resize;\r\n        this.getSafeRegion = _view.getSafeRegion;\r\n        this.setCues = _view.addCues;\r\n        this.setCaptions = _view.setCaptions;\r\n\r\n        this.checkBeforePlay = function() {\r\n            return _preplay;\r\n        };\r\n\r\n        this.setControls = function (mode) {\r\n            if (!_.isBoolean(mode)) {\r\n                mode = !_model.get('controls');\r\n            }\r\n            _model.set('controls', mode);\r\n\r\n            const provider = _model.getVideo();\r\n            if (provider) {\r\n                provider.setControls(mode);\r\n            }\r\n        };\r\n\r\n        this.playerDestroy = function () {\r\n            this.trigger('destroyPlugin', {});\r\n            this.off();\r\n            this.stop();\r\n            showView(this, this.originalContainer);\r\n            if (_view) {\r\n                _view.destroy();\r\n            }\r\n            if (_model) {\r\n                _model.destroy();\r\n            }\r\n            if (apiQueue) {\r\n                apiQueue.destroy();\r\n            }\r\n            if (_captions) {\r\n                _captions.destroy();\r\n                _captions = null;\r\n            }\r\n            this.instreamDestroy();\r\n        };\r\n\r\n        this.isBeforePlay = this.checkBeforePlay;\r\n\r\n        this.createInstream = function() {\r\n            this.instreamDestroy();\r\n            this._instreamAdapter = new InstreamAdapter(this, _model, _view);\r\n            return this._instreamAdapter;\r\n        };\r\n\r\n        this.skipAd = function() {\r\n            if (this._instreamAdapter) {\r\n                this._instreamAdapter.skipAd();\r\n            }\r\n        };\r\n\r\n        this.instreamDestroy = function() {\r\n            if (_this._instreamAdapter) {\r\n                _this._instreamAdapter.destroy();\r\n                _this._instreamAdapter = null;\r\n            }\r\n        };\r\n\r\n        // Setup ApiQueueDecorator after instance methods have been assigned\r\n        const apiQueue = new ApiQueueDecorator(this, [\r\n            'play',\r\n            'pause',\r\n            'seek',\r\n            'setCurrentAudioTrack',\r\n            'setCurrentCaptions',\r\n            'setCurrentQuality',\r\n            'setFullscreen',\r\n        ], () => !_model.getVideo());\r\n        // Add commands from CoreLoader to queue\r\n        apiQueue.queue.push.apply(apiQueue.queue, commandQueue);\r\n\r\n        _view.setup();\r\n    },\r\n    get(property) {\r\n        return this._model.get(property);\r\n    },\r\n    getContainer() {\r\n        return this.currentContainer || this.originalContainer;\r\n    },\r\n    getMute() {\r\n        return this._model.getMute();\r\n    },\r\n    triggerError(evt) {\r\n        this._model.set('errorEvent', evt);\r\n        this._model.set('state', STATE_ERROR);\r\n        this._model.once('change:state', function() {\r\n            this._model.set('errorEvent', undefined);\r\n        }, this);\r\n\r\n        this.trigger(ERROR, evt);\r\n    }\r\n});\r\n\r\nexport default Controller;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/controller.js","import { qualityLevel } from 'providers/data-normalizer';\r\nimport { Browser, OS } from 'environment/environment';\r\nimport { isAndroidHls } from 'providers/html5-android-hls';\r\nimport { STATE_IDLE, STATE_PLAYING, MEDIA_META, MEDIA_ERROR,\r\n    MEDIA_LEVELS, MEDIA_LEVEL_CHANGED, MEDIA_SEEK, STATE_LOADING } from 'events/events';\r\nimport VideoEvents from 'providers/video-listener-mixin';\r\nimport VideoAction from 'providers/video-actions-mixin';\r\nimport VideoAttached from 'providers/video-attached-mixin';\r\nimport { style, transform } from 'utils/css';\r\nimport utils from 'utils/helpers';\r\nimport { emptyElement } from 'utils/dom';\r\nimport _ from 'utils/underscore';\r\nimport DefaultProvider from 'providers/default';\r\nimport Events from 'utils/backbone.events';\r\nimport Tracks from 'providers/tracks-mixin';\r\nimport endOfRange from 'utils/time-ranges';\r\nimport createPlayPromise from 'providers/utils/play-promise';\r\n\r\nconst clearTimeout = window.clearTimeout;\r\nconst MIN_DVR_DURATION = 120;\r\nconst _name = 'html5';\r\n\r\nfunction _setupListeners(eventsHash, videoTag) {\r\n    Object.keys(eventsHash).forEach(eventName => {\r\n        videoTag.removeEventListener(eventName, eventsHash[eventName]);\r\n        videoTag.addEventListener(eventName, eventsHash[eventName]);\r\n    });\r\n}\r\n\r\nfunction _removeListeners(eventsHash, videoTag) {\r\n    Object.keys(eventsHash).forEach(eventName => {\r\n        videoTag.removeEventListener(eventName, eventsHash[eventName]);\r\n    });\r\n}\r\n\r\nfunction VideoProvider(_playerId, _playerConfig) {\r\n    // Current media state\r\n    this.state = STATE_IDLE;\r\n\r\n    // Are we buffering due to seek, or due to playback?\r\n    this.seeking = false;\r\n\r\n    // Always render natively in iOS and Safari, where HLS is supported.\r\n    // Otherwise, use native rendering when set in the config for browsers that have adequate support.\r\n    // FF, IE & Edge are excluded due to styling/positioning drawbacks.\r\n    // The following issues need to be addressed before we enable native rendering in Edge:\r\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8120475/\r\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12079271/\r\n    function renderNatively (configRenderNatively) {\r\n        if (OS.iOS || Browser.safari) {\r\n            return true;\r\n        }\r\n        return configRenderNatively && Browser.chrome;\r\n    }\r\n\r\n    const _this = this;\r\n\r\n    const MediaEvents = {\r\n        progress() {\r\n            VideoEvents.progress.call(_this);\r\n            checkStaleStream();\r\n        },\r\n        \r\n        timeupdate() {\r\n            if (_positionBeforeSeek !== _videotag.currentTime) {\r\n                _setPositionBeforeSeek(_videotag.currentTime);\r\n                VideoEvents.timeupdate.call(_this);\r\n            }\r\n            checkStaleStream();\r\n            if (_this.state === STATE_PLAYING) {\r\n                checkVisualQuality();\r\n            }\r\n        },\r\n\r\n        ended() {\r\n            _currentQuality = -1;\r\n            clearTimeouts();\r\n            VideoEvents.ended.call(_this);\r\n        },\r\n\r\n        loadedmetadata() {\r\n            let duration = _this.getDuration();\r\n            if (_androidHls && duration === Infinity) {\r\n                duration = 0;\r\n            }\r\n            var metadata = {\r\n                duration: duration,\r\n                height: _videotag.videoHeight,\r\n                width: _videotag.videoWidth\r\n            };\r\n            _this.trigger(MEDIA_META, metadata);\r\n        },\r\n\r\n        durationchange() {\r\n            if (_androidHls) {\r\n                return;\r\n            }\r\n            VideoEvents.progress.call(_this);\r\n        },\r\n\r\n        loadeddata() {\r\n            VideoEvents.loadeddata.call(_this);\r\n            _setAudioTracks(_videotag.audioTracks);\r\n            _checkDelayedSeek(_this.getDuration());\r\n        },\r\n\r\n        canplay() {\r\n            _canSeek = true;\r\n            if (!_androidHls) {\r\n                _setMediaType();\r\n            }\r\n            if (Browser.ie && Browser.version.major === 9) {\r\n                // In IE9, set tracks here since they are not ready\r\n                // on load\r\n                _this.setTextTracks(_this._textTracks);\r\n            }\r\n            VideoEvents.canplay.call(_this);\r\n        },\r\n\r\n        seeking() {\r\n            var offset = _seekOffset !== null ? _seekOffset : _this.getCurrentTime();\r\n            _seekOffset = null;\r\n            _delayedSeek = 0;\r\n            _this.seeking = true;\r\n            _this.trigger(MEDIA_SEEK, {\r\n                position: _positionBeforeSeek,\r\n                offset: offset\r\n            });\r\n            _setPositionBeforeSeek(offset);\r\n            _videotag.removeEventListener('waiting', setLoadingState);\r\n            _videotag.addEventListener('waiting', setLoadingState);\r\n        },\r\n\r\n        seeked() {\r\n            _videotag.removeEventListener('waiting', setLoadingState);\r\n            VideoEvents.seeked.call(_this);\r\n        },\r\n\r\n        webkitbeginfullscreen(e) {\r\n            _fullscreenState = true;\r\n            _sendFullscreen(e);\r\n        },\r\n\r\n        webkitendfullscreen(e) {\r\n            _fullscreenState = false;\r\n            _sendFullscreen(e);\r\n        }\r\n    };\r\n    Object.keys(VideoEvents).forEach(eventName => {\r\n        if (!MediaEvents[eventName]) {\r\n            const mixinEventHandler = VideoEvents[eventName];\r\n            MediaEvents[eventName] = (e) => {\r\n                mixinEventHandler.call(_this, e);\r\n            };\r\n        }\r\n    });\r\n\r\n    Object.assign(this, Events, VideoAction, VideoAttached, Tracks, {\r\n        renderNatively: renderNatively(_playerConfig.renderCaptionsNatively),\r\n        eventsOn_() {\r\n            _setupListeners(MediaEvents, _videotag);\r\n        },\r\n        eventsOff_() {\r\n            _removeListeners(MediaEvents, _videotag);\r\n        },\r\n        detachMedia() {\r\n            VideoAttached.detachMedia.call(_this);\r\n            clearTimeouts();\r\n            // Stop listening to track changes so disabling the current track doesn't update the model\r\n            this.removeTracksListener(_videotag.textTracks, 'change', this.textTrackChangeHandler);\r\n            // Prevent tracks from showing during ad playback\r\n            this.disableTextTrack();\r\n            return _videotag;\r\n        },\r\n        attachMedia() {\r\n            VideoAttached.attachMedia.call(_this);\r\n            _canSeek = false;\r\n            // If we were mid-seek when detached, we want to allow it to resume\r\n            this.seeking = false;\r\n            // In case the video tag was modified while we shared it\r\n            _videotag.loop = false;\r\n            // If there was a showing track, re-enable it\r\n            this.enableTextTrack();\r\n            if (this.renderNatively) {\r\n                this.setTextTracks(this.video.textTracks);\r\n            }\r\n            this.addTracksListener(_videotag.textTracks, 'change', this.textTrackChangeHandler);\r\n        },\r\n        stalledHandler(checkStartTime) {\r\n            // Android HLS doesnt update its times correctly so it always falls in here.  Do not allow it to stall.\r\n            if (_androidHls) {\r\n                return;\r\n            }\r\n            VideoAttached.stalledHandler.call(_this, checkStartTime);\r\n        },\r\n        isLive() {\r\n            return _videotag.duration === Infinity;\r\n        }\r\n    });\r\n\r\n    const _videotag = _this.video = _playerConfig.mediaElement;\r\n    const visualQuality = { level: {} };\r\n    const _staleStreamDuration = 3 * 10 * 1000;\r\n\r\n    let _canSeek = false; // true on valid time event\r\n    let _delayedSeek = 0;\r\n    let _seekOffset = null;\r\n    let _positionBeforeSeek = null;\r\n    let _levels;\r\n    let _currentQuality = -1;\r\n    let _fullscreenState = false;\r\n    let _beforeResumeHandler = utils.noop;\r\n    let _audioTracks = null;\r\n    let _currentAudioTrackIndex = -1;\r\n    let _staleStreamTimeout = -1;\r\n    let _stale = false;\r\n    let _lastEndOfBuffer = null;\r\n    let _androidHls = false;\r\n\r\n    function _setAttribute(name, value) {\r\n        _videotag.setAttribute(name, value || '');\r\n    }\r\n\r\n    _videotag.className = 'jw-video jw-reset';\r\n\r\n    this.isSDK = !!_playerConfig.sdkplatform;\r\n    this.video = _videotag;\r\n    this.supportsPlaybackRate = true;\r\n\r\n    _setupListeners(MediaEvents, _videotag);\r\n\r\n    _setAttribute('disableRemotePlayback', '');\r\n    _setAttribute('webkit-playsinline');\r\n    _setAttribute('playsinline');\r\n\r\n    function checkVisualQuality() {\r\n        const level = visualQuality.level;\r\n        if (level.width !== _videotag.videoWidth ||\r\n            level.height !== _videotag.videoHeight) {\r\n            level.width = _videotag.videoWidth;\r\n            level.height = _videotag.videoHeight;\r\n            _setMediaType();\r\n            if (!level.width || !level.height || _currentQuality === -1) {\r\n                return;\r\n            }\r\n            visualQuality.reason = visualQuality.reason || 'auto';\r\n            visualQuality.mode = _levels[_currentQuality].type === 'hls' ? 'auto' : 'manual';\r\n            visualQuality.bitrate = 0;\r\n            level.index = _currentQuality;\r\n            level.label = _levels[_currentQuality].label;\r\n            _this.trigger('visualQuality', visualQuality);\r\n            visualQuality.reason = '';\r\n        }\r\n    }\r\n\r\n    function setLoadingState() {\r\n        _this.setState(STATE_LOADING);\r\n    }\r\n\r\n    function _setPositionBeforeSeek(position) {\r\n        _positionBeforeSeek = _convertTime(position);\r\n    }\r\n\r\n    _this.getCurrentTime = function() {\r\n        return _convertTime(_videotag.currentTime);\r\n    };\r\n\r\n    function _convertTime(position) {\r\n        if (_this.getDuration() < 0) {\r\n            position -= _getSeekableEnd();\r\n        }\r\n        return position;\r\n    }\r\n\r\n    _this.getDuration = function() {\r\n        var duration = _videotag.duration;\r\n        // Don't sent time event on Android before real duration is known\r\n        if (_androidHls && (duration === Infinity && _videotag.currentTime === 0) || isNaN(duration)) {\r\n            return 0;\r\n        }\r\n        var end = _getSeekableEnd();\r\n        if (_this.isLive() && end) {\r\n            var seekableDuration = end - _getSeekableStart();\r\n            if (seekableDuration !== Infinity && seekableDuration > MIN_DVR_DURATION) {\r\n                // Player interprets negative duration as DVR\r\n                duration = -seekableDuration;\r\n            }\r\n        }\r\n        return duration;\r\n    };\r\n\r\n    function _checkDelayedSeek(duration) {\r\n        // Don't seek when _delayedSeek is set to -1 in _completeLoad\r\n        if (_delayedSeek && _delayedSeek !== -1 && duration && duration !== Infinity) {\r\n            _this.seek(_delayedSeek);\r\n        }\r\n    }\r\n\r\n    function _getPublicLevels(levels) {\r\n        var publicLevels;\r\n        if (utils.typeOf(levels) === 'array' && levels.length > 0) {\r\n            publicLevels = _.map(levels, function(level, i) {\r\n                return {\r\n                    label: level.label || i\r\n                };\r\n            });\r\n        }\r\n        return publicLevels;\r\n    }\r\n\r\n    function _setLevels(levels) {\r\n        _levels = levels;\r\n        _currentQuality = _pickInitialQuality(levels);\r\n    }\r\n\r\n    function _pickInitialQuality(levels) {\r\n        var currentQuality = Math.max(0, _currentQuality);\r\n        var label = _playerConfig.qualityLabel;\r\n        if (levels) {\r\n            for (var i = 0; i < levels.length; i++) {\r\n                if (levels[i].default) {\r\n                    currentQuality = i;\r\n                }\r\n                if (label && levels[i].label === label) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        visualQuality.reason = 'initial choice';\r\n        visualQuality.level = {};\r\n        return currentQuality;\r\n    }\r\n\r\n    function _play() {\r\n        return _videotag.play() || createPlayPromise(_videotag);\r\n    }\r\n\r\n    function _completeLoad(startTime) {\r\n        _delayedSeek = 0;\r\n        clearTimeouts();\r\n\r\n        const previousSource = _videotag.src;\r\n        const sourceElement = document.createElement('source');\r\n        sourceElement.src = _levels[_currentQuality].file;\r\n        const sourceChanged = (sourceElement.src !== previousSource);\r\n\r\n        if (sourceChanged) {\r\n            _setVideotagSource(_levels[_currentQuality]);\r\n            // Do not call load if src was not set. load() will cancel any active play promise.\r\n            if (previousSource) {\r\n                _videotag.load();\r\n            }\r\n\r\n        } else if (startTime === 0 && _videotag.currentTime > 0) {\r\n            // Load event is from the same video as before\r\n            // restart video without dispatching seek event\r\n            _delayedSeek = -1;\r\n            _this.seek(startTime);\r\n        }\r\n\r\n        if (startTime > 0) {\r\n            _this.seek(startTime);\r\n        }\r\n\r\n        var publicLevels = _getPublicLevels(_levels);\r\n        if (publicLevels) {\r\n            _this.trigger(MEDIA_LEVELS, {\r\n                levels: publicLevels,\r\n                currentQuality: _currentQuality\r\n            });\r\n        }\r\n        if (_levels.length && _levels[0].type !== 'hls') {\r\n            _this.sendMediaType(_levels);\r\n        }\r\n    }\r\n\r\n    function _setVideotagSource(source) {\r\n        _audioTracks = null;\r\n        _currentAudioTrackIndex = -1;\r\n        if (!visualQuality.reason) {\r\n            visualQuality.reason = 'initial choice';\r\n            visualQuality.level = {};\r\n        }\r\n        _canSeek = false;\r\n\r\n        var sourceElement = document.createElement('source');\r\n        sourceElement.src = source.file;\r\n        var sourceChanged = (_videotag.src !== sourceElement.src);\r\n        if (sourceChanged) {\r\n            _videotag.src = source.file;\r\n        }\r\n    }\r\n\r\n    function _clearVideotagSource() {\r\n        if (_videotag) {\r\n            _this.disableTextTrack();\r\n            _videotag.removeAttribute('preload');\r\n            _videotag.removeAttribute('src');\r\n            emptyElement(_videotag);\r\n            style(_videotag, {\r\n                objectFit: ''\r\n            });\r\n            _currentQuality = -1;\r\n            // Don't call load in iE9/10 and check for load in PhantomJS\r\n            if (!Browser.msie && 'load' in _videotag) {\r\n                _videotag.load();\r\n            }\r\n        }\r\n    }\r\n\r\n    function _getSeekableStart() {\r\n        var index = _videotag.seekable ? _videotag.seekable.length : 0;\r\n        var start = Infinity;\r\n\r\n        while (index--) {\r\n            start = Math.min(start, _videotag.seekable.start(index));\r\n        }\r\n        return start;\r\n    }\r\n\r\n    function _getSeekableEnd() {\r\n        var index = _videotag.seekable ? _videotag.seekable.length : 0;\r\n        var end = 0;\r\n\r\n        while (index--) {\r\n            end = Math.max(end, _videotag.seekable.end(index));\r\n        }\r\n        return end;\r\n    }\r\n\r\n    this.stop = function() {\r\n        clearTimeouts();\r\n        _clearVideotagSource();\r\n        this.clearTracks();\r\n        // IE/Edge continue to play a video after changing video.src and calling video.load()\r\n        // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/5383483/ (not fixed in Edge 14)\r\n        if (Browser.ie) {\r\n            _videotag.pause();\r\n        }\r\n        this.setState(STATE_IDLE);\r\n    };\r\n\r\n    this.destroy = function() {\r\n        _beforeResumeHandler = utils.noop;\r\n        _removeListeners(MediaEvents, _videotag);\r\n        this.removeTracksListener(_videotag.audioTracks, 'change', _audioTrackChangeHandler);\r\n        this.removeTracksListener(_videotag.textTracks, 'change', _this.textTrackChangeHandler);\r\n        this.off();\r\n    };\r\n\r\n    this.init = function(item) {\r\n        _setLevels(item.sources);\r\n        const source = _levels[_currentQuality];\r\n        _androidHls = isAndroidHls(source);        \r\n        if (_androidHls) {\r\n            // Playback rate is broken on Android HLS\r\n            _this.supportsPlaybackRate = false;\r\n        }\r\n        // the loadeddata event determines the mediaType for HLS sources\r\n        if (_levels.length && _levels[0].type !== 'hls') {\r\n            this.sendMediaType(_levels);\r\n        }\r\n        visualQuality.reason = '';\r\n    };\r\n\r\n    this.preload = function(item) {\r\n        _setLevels(item.sources);\r\n        const source = _levels[_currentQuality];\r\n        const preload = source.preload || 'metadata';\r\n        if (preload !== 'none') {\r\n            _setAttribute('preload', preload);\r\n            _setVideotagSource(source);\r\n        }\r\n    };\r\n\r\n    this.load = function(item) {\r\n        _setLevels(item.sources);\r\n        _completeLoad(item.starttime || 0, item.duration || 0);\r\n        this.setupSideloadedTracks(item.tracks);        \r\n    };\r\n\r\n    this.play = function() {\r\n        _beforeResumeHandler();\r\n        return _play();\r\n    };\r\n\r\n    this.pause = function() {\r\n        clearTimeouts();\r\n        _beforeResumeHandler = function() {\r\n            var unpausing = _videotag.paused && _videotag.currentTime;\r\n            if (unpausing && _this.isLive()) {\r\n                var end = _getSeekableEnd();\r\n                var seekableDuration = end - _getSeekableStart();\r\n                var isLiveNotDvr = seekableDuration < MIN_DVR_DURATION;\r\n                var behindLiveEdge = end - _videotag.currentTime;\r\n                if (isLiveNotDvr && end && (behindLiveEdge > 15 || behindLiveEdge < 0)) {\r\n                    // resume playback at edge of live stream\r\n                    _seekOffset = Math.max(end - 10, end - seekableDuration);\r\n                    _setPositionBeforeSeek(_videotag.currentTime);\r\n                    _videotag.currentTime = _seekOffset;\r\n                }\r\n\r\n            }\r\n        };\r\n        _videotag.pause();\r\n    };\r\n\r\n    this.seek = function(seekPos) {\r\n        if (seekPos < 0) {\r\n            seekPos += _getSeekableStart() + _getSeekableEnd();\r\n        }\r\n        if (!_canSeek) {\r\n            _canSeek = !!_getSeekableEnd();\r\n        }\r\n        if (_canSeek) {\r\n            _delayedSeek = 0;\r\n            // setting currentTime can throw an invalid DOM state exception if the video is not ready\r\n            try {\r\n                _this.seeking = true;\r\n                _seekOffset = seekPos;\r\n                _setPositionBeforeSeek(_videotag.currentTime);\r\n                _videotag.currentTime = seekPos;\r\n            } catch (e) {\r\n                _this.seeking = false;\r\n                _delayedSeek = seekPos;\r\n            }\r\n        } else {\r\n            _delayedSeek = seekPos;\r\n            // Firefox isn't firing canplay event when in a paused state\r\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1194624\r\n            if (Browser.firefox && _videotag.paused) {\r\n                _play();\r\n            }\r\n        }\r\n    };\r\n\r\n    function _audioTrackChangeHandler() {\r\n        var _selectedAudioTrackIndex = -1;\r\n        for (var i = 0; i < _videotag.audioTracks.length; i++) {\r\n            if (_videotag.audioTracks[i].enabled) {\r\n                _selectedAudioTrackIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        _setCurrentAudioTrack(_selectedAudioTrackIndex);\r\n    }\r\n\r\n    function _sendFullscreen(e) {\r\n        _this.trigger('fullscreenchange', {\r\n            target: e.target,\r\n            jwstate: _fullscreenState\r\n        });\r\n    }\r\n\r\n    this.setVisibility = function(state) {\r\n        state = !!state;\r\n        if (state || OS.android) {\r\n            // Changing visibility to hidden on Android < 4.2 causes\r\n            // the pause event to be fired. This causes audio files to\r\n            // become unplayable. Hence the video tag is always kept\r\n            // visible on Android devices.\r\n            style(_this.container, {\r\n                visibility: 'visible',\r\n                opacity: 1\r\n            });\r\n        } else {\r\n            style(_this.container, {\r\n                visibility: '',\r\n                opacity: 0\r\n            });\r\n        }\r\n    };\r\n\r\n    this.resize = function(width, height, stretching) {\r\n        if (!width || !height || !_videotag.videoWidth || !_videotag.videoHeight) {\r\n            return false;\r\n        }\r\n        const styles = {\r\n            objectFit: '',\r\n            width: '',\r\n            height: ''\r\n        };\r\n        if (stretching === 'uniform') {\r\n            // snap video to edges when the difference in aspect ratio is less than 9%\r\n            const playerAspectRatio = width / height;\r\n            const videoAspectRatio = _videotag.videoWidth / _videotag.videoHeight;\r\n            if (Math.abs(playerAspectRatio - videoAspectRatio) < 0.09) {\r\n                styles.objectFit = 'fill';\r\n                stretching = 'exactfit';\r\n            }\r\n        }\r\n        // Prior to iOS 9, object-fit worked poorly\r\n        // object-fit is not implemented in IE or Android Browser in 4.4 and lower\r\n        // http://caniuse.com/#feat=object-fit\r\n        // feature detection may work for IE but not for browsers where object-fit works for images only\r\n        const fitVideoUsingTransforms = Browser.ie || (OS.iOS && OS.version.major < 9) || Browser.androidNative;\r\n        if (fitVideoUsingTransforms) {\r\n            // Use transforms to center and scale video in container\r\n            const x = -Math.floor(_videotag.videoWidth / 2 + 1);\r\n            const y = -Math.floor(_videotag.videoHeight / 2 + 1);\r\n            let scaleX = Math.ceil(width * 100 / _videotag.videoWidth) / 100;\r\n            let scaleY = Math.ceil(height * 100 / _videotag.videoHeight) / 100;\r\n            if (stretching === 'none') {\r\n                scaleX = scaleY = 1;\r\n            } else if (stretching === 'fill') {\r\n                scaleX = scaleY = Math.max(scaleX, scaleY);\r\n            } else if (stretching === 'uniform') {\r\n                scaleX = scaleY = Math.min(scaleX, scaleY);\r\n            }\r\n            styles.width = _videotag.videoWidth;\r\n            styles.height = _videotag.videoHeight;\r\n            styles.top = styles.left = '50%';\r\n            styles.margin = 0;\r\n            transform(_videotag,\r\n                'translate(' + x + 'px, ' + y + 'px) scale(' + scaleX.toFixed(2) + ', ' + scaleY.toFixed(2) + ')');\r\n        }\r\n        style(_videotag, styles);\r\n        return false;\r\n    };\r\n\r\n    this.setFullscreen = function(state) {\r\n        state = !!state;\r\n\r\n        // This implementation is for iOS and Android WebKit only\r\n        // This won't get called if the player container can go fullscreen\r\n        if (state) {\r\n            var status = utils.tryCatch(function() {\r\n                var enterFullscreen =\r\n                    _videotag.webkitEnterFullscreen ||\r\n                    _videotag.webkitEnterFullScreen;\r\n                if (enterFullscreen) {\r\n                    enterFullscreen.apply(_videotag);\r\n                }\r\n\r\n            });\r\n\r\n            if (status instanceof utils.Error) {\r\n                // object can't go fullscreen\r\n                return false;\r\n            }\r\n            return _this.getFullScreen();\r\n        }\r\n\r\n        var exitFullscreen =\r\n            _videotag.webkitExitFullscreen ||\r\n            _videotag.webkitExitFullScreen;\r\n        if (exitFullscreen) {\r\n            exitFullscreen.apply(_videotag);\r\n        }\r\n\r\n        return state;\r\n    };\r\n\r\n    _this.getFullScreen = function() {\r\n        return _fullscreenState || !!_videotag.webkitDisplayingFullscreen;\r\n    };\r\n\r\n    this.setCurrentQuality = function(quality) {\r\n        if (_currentQuality === quality) {\r\n            return;\r\n        }\r\n        if (quality >= 0) {\r\n            if (_levels && _levels.length > quality) {\r\n                _currentQuality = quality;\r\n                visualQuality.reason = 'api';\r\n                visualQuality.level = {};\r\n                this.trigger(MEDIA_LEVEL_CHANGED, {\r\n                    currentQuality: quality,\r\n                    levels: _getPublicLevels(_levels)\r\n                });\r\n\r\n                // The playerConfig is not updated automatically, because it is a clone\r\n                // from when the provider was first initialized\r\n                _playerConfig.qualityLabel = _levels[quality].label;\r\n\r\n                const time = _videotag.currentTime || 0;\r\n                const duration = _this.getDuration();\r\n                _completeLoad(time, duration);\r\n                _play();\r\n            }\r\n        }\r\n    };\r\n\r\n    this.setPlaybackRate = function(playbackRate) {\r\n        // Set defaultPlaybackRate so that we do not send ratechange events when setting src\r\n        _videotag.playbackRate = _videotag.defaultPlaybackRate = playbackRate;\r\n    };\r\n\r\n    this.getPlaybackRate = function() {\r\n        return _videotag.playbackRate;\r\n    };\r\n\r\n    this.getCurrentQuality = function() {\r\n        return _currentQuality;\r\n    };\r\n\r\n    this.getQualityLevels = function() {\r\n        return _.map(_levels, level => qualityLevel(level));\r\n    };\r\n\r\n    this.getName = function() {\r\n        return { name: _name };\r\n    };\r\n    this.setCurrentAudioTrack = _setCurrentAudioTrack;\r\n\r\n    this.getAudioTracks = _getAudioTracks;\r\n\r\n    this.getCurrentAudioTrack = _getCurrentAudioTrack;\r\n\r\n    function _setAudioTracks(tracks) {\r\n        _audioTracks = null;\r\n        if (!tracks) {\r\n            return;\r\n        }\r\n        if (tracks.length) {\r\n            for (var i = 0; i < tracks.length; i++) {\r\n                if (tracks[i].enabled) {\r\n                    _currentAudioTrackIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (_currentAudioTrackIndex === -1) {\r\n                _currentAudioTrackIndex = 0;\r\n                tracks[_currentAudioTrackIndex].enabled = true;\r\n            }\r\n            _audioTracks = _.map(tracks, function(track) {\r\n                var _track = {\r\n                    name: track.label || track.language,\r\n                    language: track.language\r\n                };\r\n                return _track;\r\n            });\r\n        }\r\n        _this.addTracksListener(tracks, 'change', _audioTrackChangeHandler);\r\n        if (_audioTracks) {\r\n            _this.trigger('audioTracks', { currentTrack: _currentAudioTrackIndex, tracks: _audioTracks });\r\n        }\r\n    }\r\n\r\n    function _setCurrentAudioTrack(index) {\r\n        if (_videotag && _videotag.audioTracks && _audioTracks &&\r\n            index > -1 && index < _videotag.audioTracks.length && index !== _currentAudioTrackIndex) {\r\n            _videotag.audioTracks[_currentAudioTrackIndex].enabled = false;\r\n            _currentAudioTrackIndex = index;\r\n            _videotag.audioTracks[_currentAudioTrackIndex].enabled = true;\r\n            _this.trigger('audioTrackChanged', { currentTrack: _currentAudioTrackIndex,\r\n                tracks: _audioTracks });\r\n        }\r\n    }\r\n\r\n    function _getAudioTracks() {\r\n        return _audioTracks || [];\r\n    }\r\n\r\n    function _getCurrentAudioTrack() {\r\n        return _currentAudioTrackIndex;\r\n    }\r\n\r\n    function _setMediaType() {\r\n        // Send mediaType when format is HLS. Other types are handled earlier by default.js.\r\n        if (_levels[0].type === 'hls') {\r\n            var mediaType = 'video';\r\n            if (_videotag.videoHeight === 0) {\r\n                mediaType = 'audio';\r\n            }\r\n            _this.trigger('mediaType', { mediaType: mediaType });\r\n        }\r\n    }\r\n\r\n    // If we're live and the buffer end has remained the same for some time, mark the stream as stale and check if the stream is over\r\n    function checkStaleStream() {\r\n        var endOfBuffer = endOfRange(_videotag.buffered);\r\n        var live = _this.isLive();\r\n\r\n        // Don't end if we have noting buffered yet, or cannot get any information about the buffer\r\n        if (live && endOfBuffer && _lastEndOfBuffer === endOfBuffer) {\r\n            if (_staleStreamTimeout === -1) {\r\n                _staleStreamTimeout = setTimeout(function () {\r\n                    _stale = true;\r\n                    checkStreamEnded();\r\n                }, _staleStreamDuration);\r\n            }\r\n        } else {\r\n            clearTimeouts();\r\n            _stale = false;\r\n        }\r\n\r\n        _lastEndOfBuffer = endOfBuffer;\r\n    }\r\n\r\n    function checkStreamEnded() {\r\n        if (_stale && _this.atEdgeOfLiveStream()) {\r\n            _this.trigger(MEDIA_ERROR, {\r\n                message: 'The live stream is either down or has ended'\r\n            });\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function clearTimeouts() {\r\n        clearTimeout(_staleStreamTimeout);\r\n        _staleStreamTimeout = -1;\r\n    }\r\n}\r\n\r\nObject.assign(VideoProvider.prototype, DefaultProvider);\r\n\r\nVideoProvider.getName = function() {\r\n    return { name: 'html5' };\r\n};\r\n\r\nexport default VideoProvider;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/html5.js","import { Browser, OS } from 'environment/environment';\r\nimport { DRAG, DRAG_START, DRAG_END, CLICK, DOUBLE_CLICK, MOVE, OUT, TAP, DOUBLE_TAP, OVER, ENTER } from 'events/events';\r\nimport Events from 'utils/backbone.events';\r\nimport { now } from 'utils/date';\r\n\r\nconst _supportsPointerEvents = ('PointerEvent' in window) && !OS.android;\r\nconst _supportsTouchEvents = ('ontouchstart' in window);\r\nconst _useMouseEvents = !_supportsPointerEvents && !(_supportsTouchEvents && OS.mobile);\r\nconst _isOSXFirefox = Browser.firefox && OS.mac;\r\n\r\nfunction getCoord(e, c) {\r\n    return /touch/.test(e.type) ? (e.originalEvent || e).changedTouches[0]['page' + c] : e['page' + c];\r\n}\r\n\r\nfunction isRightClick(evt) {\r\n    const e = evt || window.event;\r\n\r\n    if (!(evt instanceof MouseEvent)) {\r\n        return false;\r\n    }\r\n\r\n    if ('which' in e) {\r\n        // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\r\n        return (e.which === 3);\r\n    } else if ('button' in e) {\r\n        // IE and Opera\r\n        return (e.button === 2);\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction isEnterKey(evt) {\r\n    const e = evt || window.event;\r\n\r\n    if ((e instanceof KeyboardEvent) && e.keyCode === 13) {\r\n        evt.stopPropagation();\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction normalizeUIEvent(type, srcEvent, target) {\r\n    let source;\r\n\r\n    if (srcEvent instanceof MouseEvent || (!srcEvent.touches && !srcEvent.changedTouches)) {\r\n        source = srcEvent;\r\n    } else if (srcEvent.touches && srcEvent.touches.length) {\r\n        source = srcEvent.touches[0];\r\n    } else {\r\n        source = srcEvent.changedTouches[0];\r\n    }\r\n\r\n    return {\r\n        type: type,\r\n        sourceEvent: srcEvent,\r\n        target: srcEvent.target,\r\n        currentTarget: target,\r\n        pageX: source.pageX,\r\n        pageY: source.pageY\r\n    };\r\n}\r\n\r\n// Preventdefault to prevent click events\r\nfunction preventDefault(evt) {\r\n    // Because sendEvent from utils.eventdispatcher clones evt objects instead of passing them\r\n    //  we cannot call evt.preventDefault() on them\r\n    if (!(evt instanceof MouseEvent) && !(evt instanceof window.TouchEvent)) {\r\n        return;\r\n    }\r\n    if (evt.preventManipulation) {\r\n        evt.preventManipulation();\r\n    }\r\n    // prevent scrolling\r\n    if (evt.preventDefault) {\r\n        evt.preventDefault();\r\n    }\r\n}\r\n\r\nconst UI = function (elem, options) {\r\n    const _elem = elem;\r\n    let _hasMoved = false;\r\n    let _startX = 0;\r\n    let _startY = 0;\r\n    let _lastClickTime = 0;\r\n    let _doubleClickDelay = 300;\r\n    let _touchListenerTarget;\r\n    let _pointerId;\r\n\r\n    options = options || {};\r\n\r\n    // If its not mobile, add mouse listener.  Add touch listeners so touch devices that aren't Android or iOS\r\n    // (windows phones) still get listeners just in case they want to use them.\r\n    if (_supportsPointerEvents) {\r\n        elem.addEventListener('pointerdown', interactStartHandler);\r\n        if (options.useHover) {\r\n            elem.addEventListener('pointerover', overHandler);\r\n            elem.addEventListener('pointerout', outHandler);\r\n        }\r\n        if (options.useMove) {\r\n            elem.addEventListener('pointermove', moveHandler);\r\n        }\r\n    } else {\r\n        if (_useMouseEvents) {\r\n            elem.addEventListener('mousedown', interactStartHandler);\r\n            if (options.useHover) {\r\n                elem.addEventListener('mouseover', overHandler);\r\n                elem.addEventListener('mouseout', outHandler);\r\n            }\r\n            if (options.useMove) {\r\n                elem.addEventListener('mousemove', moveHandler);\r\n            }\r\n        }\r\n\r\n        // Always add this, in case we don't properly identify the device as mobile\r\n        elem.addEventListener('touchstart', interactStartHandler);\r\n    }\r\n\r\n    elem.addEventListener('keydown', keyHandler);\r\n    if (options.useFocus) {\r\n        elem.addEventListener('focus', overHandler);\r\n        elem.addEventListener('blur', outHandler);\r\n    }\r\n\r\n    // overHandler and outHandler not assigned in touch situations\r\n    function overHandler(evt) {\r\n        if (evt.pointerType !== 'touch') {\r\n            triggerEvent(OVER, evt);\r\n        }\r\n    }\r\n\r\n    function moveHandler(evt) {\r\n        if (evt.pointerType !== 'touch') {\r\n            triggerEvent(MOVE, evt);\r\n        }\r\n    }\r\n\r\n    function outHandler(evt) {\r\n        // elementFromPoint to handle an issue where setPointerCapture is causing a pointerout event\r\n        if (_useMouseEvents || (_supportsPointerEvents && evt.pointerType !== 'touch' &&\r\n            !elem.contains(document.elementFromPoint(evt.x, evt.y)))) {\r\n            triggerEvent(OUT, evt);\r\n        }\r\n    }\r\n\r\n    function keyHandler(evt) {\r\n        if (isEnterKey(evt)) {\r\n            triggerEvent(ENTER, evt);\r\n        }\r\n    }\r\n\r\n    function setEventListener(element, eventName, callback) {\r\n        element.removeEventListener(eventName, callback);\r\n        element.addEventListener(eventName, callback);\r\n    }\r\n\r\n    function interactStartHandler(evt) {\r\n        _touchListenerTarget = evt.target;\r\n        _startX = getCoord(evt, 'X');\r\n        _startY = getCoord(evt, 'Y');\r\n\r\n        if (!isRightClick(evt)) {\r\n\r\n            if (evt.type === 'pointerdown' && evt.isPrimary) {\r\n                if (options.preventScrolling) {\r\n                    _pointerId = evt.pointerId;\r\n                    elem.setPointerCapture(_pointerId);\r\n                }\r\n                setEventListener(elem, 'pointermove', interactDragHandler);\r\n                setEventListener(elem, 'pointercancel', interactEndHandler);\r\n\r\n                // Listen for mouseup after mouse pointer down because pointerup doesn't fire on swf objects\r\n                if (evt.pointerType === 'mouse' && _touchListenerTarget.nodeName === 'OBJECT') {\r\n                    setEventListener(document, 'mouseup', interactEndHandler);\r\n                } else {\r\n                    setEventListener(elem, 'pointerup', interactEndHandler);\r\n                }\r\n            } else if (evt.type === 'mousedown') {\r\n                setEventListener(document, 'mousemove', interactDragHandler);\r\n\r\n                // Handle clicks in OSX Firefox over Flash 'object'\r\n                if (_isOSXFirefox && evt.target.nodeName.toLowerCase() === 'object') {\r\n                    setEventListener(elem, 'click', interactEndHandler);\r\n                } else {\r\n                    setEventListener(document, 'mouseup', interactEndHandler);\r\n                }\r\n            } else if (evt.type === 'touchstart') {\r\n                setEventListener(_touchListenerTarget, 'touchmove', interactDragHandler);\r\n                setEventListener(_touchListenerTarget, 'touchcancel', interactEndHandler);\r\n                setEventListener(_touchListenerTarget, 'touchend', interactEndHandler);\r\n            }\r\n\r\n            // Prevent scrolling the screen dragging while dragging on mobile.\r\n            if (options.preventScrolling) {\r\n                preventDefault(evt);\r\n            }\r\n        }\r\n    }\r\n\r\n    function interactDragHandler(evt) {\r\n        const movementThreshold = 6;\r\n\r\n        if (_hasMoved) {\r\n            triggerEvent(DRAG, evt);\r\n        } else {\r\n            const endX = getCoord(evt, 'X');\r\n            const endY = getCoord(evt, 'Y');\r\n            const moveX = endX - _startX;\r\n            const moveY = endY - _startY;\r\n            if (moveX * moveX + moveY * moveY > movementThreshold * movementThreshold) {\r\n                triggerEvent(DRAG_START, evt);\r\n                _hasMoved = true;\r\n                triggerEvent(DRAG, evt);\r\n            }\r\n        }\r\n\r\n        // Prevent scrolling the screen dragging while dragging on mobile.\r\n        if (options.preventScrolling) {\r\n            preventDefault(evt);\r\n        }\r\n    }\r\n\r\n    function interactEndHandler(evt) {\r\n        const isPointerEvent = (evt.type === 'pointerup' || evt.type === 'pointercancel');\r\n        if (isPointerEvent && options.preventScrolling) {\r\n            elem.releasePointerCapture(_pointerId);\r\n        }\r\n        elem.removeEventListener('pointermove', interactDragHandler);\r\n        elem.removeEventListener('pointercancel', interactEndHandler);\r\n        elem.removeEventListener('pointerup', interactEndHandler);\r\n        document.removeEventListener('mousemove', interactDragHandler);\r\n        document.removeEventListener('mouseup', interactEndHandler);\r\n        if (_touchListenerTarget) {\r\n            _touchListenerTarget.removeEventListener('touchmove', interactDragHandler);\r\n            _touchListenerTarget.removeEventListener('touchcancel', interactEndHandler);\r\n            _touchListenerTarget.removeEventListener('touchend', interactEndHandler);\r\n        }\r\n\r\n        if (_hasMoved) {\r\n            triggerEvent(DRAG_END, evt);\r\n        } else if ((!options.directSelect || evt.target === elem) && evt.type.indexOf('cancel') === -1) {\r\n            if (evt.type === 'mouseup' || evt.type === 'click' || isPointerEvent && evt.pointerType === 'mouse') {\r\n                triggerEvent(CLICK, evt);\r\n            } else {\r\n                triggerEvent(TAP, evt);\r\n                if (evt.type === 'touchend') {\r\n                    // preventDefault to not dispatch the 300ms delayed click after a tap\r\n                    preventDefault(evt);\r\n                }\r\n            }\r\n        }\r\n\r\n        _touchListenerTarget = null;\r\n        _hasMoved = false;\r\n    }\r\n\r\n    const self = this;\r\n    function triggerEvent(type, srcEvent) {\r\n        let evt;\r\n        if (options.enableDoubleTap && (type === CLICK || type === TAP)) {\r\n            if (now() - _lastClickTime < _doubleClickDelay) {\r\n                const doubleType = (type === CLICK) ?\r\n                    DOUBLE_CLICK : DOUBLE_TAP;\r\n                evt = normalizeUIEvent(doubleType, srcEvent, _elem);\r\n                self.trigger(doubleType, evt);\r\n                _lastClickTime = 0;\r\n            } else {\r\n                _lastClickTime = now();\r\n            }\r\n        }\r\n        evt = normalizeUIEvent(type, srcEvent, _elem);\r\n        self.trigger(type, evt);\r\n    }\r\n\r\n    this.triggerEvent = triggerEvent;\r\n\r\n    this.destroy = function() {\r\n        this.off();\r\n        elem.removeEventListener('touchstart', interactStartHandler);\r\n        elem.removeEventListener('mousedown', interactStartHandler);\r\n        elem.removeEventListener('keydown', keyHandler);\r\n\r\n        if (_touchListenerTarget) {\r\n            _touchListenerTarget.removeEventListener('touchmove', interactDragHandler);\r\n            _touchListenerTarget.removeEventListener('touchcancel', interactEndHandler);\r\n            _touchListenerTarget.removeEventListener('touchend', interactEndHandler);\r\n            _touchListenerTarget = null;\r\n        }\r\n\r\n        if (_supportsPointerEvents) {\r\n            if (options.preventScrolling) {\r\n                elem.releasePointerCapture(_pointerId);\r\n            }\r\n            elem.removeEventListener('pointerover', overHandler);\r\n            elem.removeEventListener('pointerdown', interactStartHandler);\r\n            elem.removeEventListener('pointermove', interactDragHandler);\r\n            elem.removeEventListener('pointermove', moveHandler);\r\n            elem.removeEventListener('pointercancel', interactEndHandler);\r\n            elem.removeEventListener('pointerout', outHandler);\r\n            elem.removeEventListener('pointerup', interactEndHandler);\r\n        }\r\n\r\n        elem.removeEventListener('click', interactEndHandler);\r\n        elem.removeEventListener('mouseover', overHandler);\r\n        elem.removeEventListener('mousemove', moveHandler);\r\n        elem.removeEventListener('mouseout', outHandler);\r\n        document.removeEventListener('mousemove', interactDragHandler);\r\n        document.removeEventListener('mouseup', interactEndHandler);\r\n\r\n        if (options.useFocus) {\r\n            elem.removeEventListener('focus', overHandler);\r\n            elem.removeEventListener('blur', outHandler);\r\n        }\r\n    };\r\n\r\n    return this;\r\n};\r\n\r\n// Expose what the source of the event is so that we can ensure it's handled correctly.\r\n// This returns only 'touch' or 'mouse'. 'pen' will be treated as a mouse.\r\nUI.getPointerType = function(evt) {\r\n    if (_supportsPointerEvents && evt instanceof window.PointerEvent) {\r\n        return (evt.pointerType === 'touch') ? 'touch' : 'mouse';\r\n    } else if (_supportsTouchEvents && evt instanceof window.TouchEvent) {\r\n        return 'touch';\r\n    }\r\n\r\n    return 'mouse';\r\n};\r\n\r\nObject.assign(UI.prototype, Events);\r\n\r\nexport const getPointerType = UI.getPointerType;\r\n\r\nexport default UI;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/ui.js","import BUFFER_ICON from 'assets/SVG/buffer.svg';\r\nimport REPLAY_ICON from 'assets/SVG/replay.svg';\r\nimport ERROR_ICON from 'assets/SVG/playback-error.svg';\r\nimport PLAY_ICON from 'assets/SVG/play.svg';\r\nimport PAUSE_ICON from 'assets/SVG/pause.svg';\r\nimport REWIND_ICON from 'assets/SVG/rewind-10.svg';\r\nimport NEXT_ICON from 'assets/SVG/next.svg';\r\n// import STOP_ICON from 'assets/SVG/stop.svg';\r\nimport VOLUME_ICON_0 from 'assets/SVG/volume-0.svg';\r\nimport VOLUME_ICON_50 from 'assets/SVG/volume-50.svg';\r\nimport VOLUME_ICON_100 from 'assets/SVG/volume-100.svg';\r\nimport CAPTIONS_ON_ICON from 'assets/SVG/captions-on.svg';\r\nimport CAPTIONS_OFF_ICON from 'assets/SVG/captions-off.svg';\r\nimport AIRPLAY_ON_ICON from 'assets/SVG/airplay-on.svg';\r\nimport AIRPLAY_OFF_ICON from 'assets/SVG/airplay-off.svg';\r\nimport DVR_ICON from 'assets/SVG/dvr.svg';\r\nimport LIVE_ICON from 'assets/SVG/live.svg';\r\nimport PLAYBACK_RATE_ICON from 'assets/SVG/playback-rate.svg';\r\nimport SETTINGS_ICON from 'assets/SVG/settings.svg';\r\nimport AUDIO_TRACKS_ICON from 'assets/SVG/audio-tracks.svg';\r\n// import QUALITY_ICON_25 from 'assets/SVG/quality-25.svg';\r\n// import QUALITY_ICON_50 from 'assets/SVG/quality-50.svg';\r\n// import QUALITY_ICON_75 from 'assets/SVG/quality-75.svg';\r\nimport QUALITY_ICON from 'assets/SVG/quality-100.svg';\r\nimport FULLSCREEN_EXIT_ICON from 'assets/SVG/fullscreen-not.svg';\r\nimport FULLSCREEN_ENTER_ICON from 'assets/SVG/fullscreen.svg';\r\nimport CLOSE_ICON from 'assets/SVG/close.svg';\r\n// import ARROW_ICON from 'assets/SVG/arror.svg';\r\nimport JW_LOGO from 'assets/SVG/jw-logo.svg';\r\nimport svgParse from 'utils/svgParser';\r\n\r\nlet collection = null;\r\n\r\nexport function cloneIcon(name) {\r\n    const icon = getCollection().querySelector(nameToClass(name));\r\n    if (icon) {\r\n        return clone(icon);\r\n    }\r\n    if (__DEBUG__) {\r\n        throw new Error('Icon not found ' + name);\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function cloneIcons(names) {\r\n    const icons = getCollection().querySelectorAll(names.split(',').map(nameToClass).join(','));\r\n    if (__DEBUG__ && !icons.length) {\r\n        throw new Error('Icons not found ' + names);\r\n    }\r\n    return Array.prototype.map.call(icons, icon => clone(icon));\r\n}\r\n\r\nfunction nameToClass(name) {\r\n    return `.jw-svg-icon-${name}`;\r\n}\r\n\r\nfunction clone(icon) {\r\n    return icon.cloneNode(true);\r\n}\r\n\r\nfunction getCollection() {\r\n    if (!collection) {\r\n        collection = parseCollection();\r\n    }\r\n    return collection;\r\n}\r\n\r\nfunction parseCollection() {\r\n    return svgParse('<xml>' +\r\n        BUFFER_ICON +\r\n        REPLAY_ICON +\r\n        ERROR_ICON +\r\n        PLAY_ICON +\r\n        PAUSE_ICON +\r\n        REWIND_ICON +\r\n        NEXT_ICON +\r\n        VOLUME_ICON_0 +\r\n        VOLUME_ICON_50 +\r\n        VOLUME_ICON_100 +\r\n        CAPTIONS_ON_ICON +\r\n        CAPTIONS_OFF_ICON +\r\n        AIRPLAY_ON_ICON +\r\n        AIRPLAY_OFF_ICON +\r\n        DVR_ICON +\r\n        LIVE_ICON +\r\n        PLAYBACK_RATE_ICON +\r\n        SETTINGS_ICON +\r\n        AUDIO_TRACKS_ICON +\r\n        QUALITY_ICON +\r\n        FULLSCREEN_EXIT_ICON +\r\n        FULLSCREEN_ENTER_ICON +\r\n        CLOSE_ICON +\r\n        JW_LOGO +\r\n        '</xml>');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/icons.js","import UI from 'utils/ui';\r\nimport svgParse from 'utils/svgParser';\r\n\r\nexport default function (icon, apiAction, ariaText, svgIcons) {\r\n    const element = document.createElement('div');\r\n    element.className = 'jw-icon jw-icon-inline jw-button-color jw-reset ' + icon;\r\n    element.setAttribute('role', 'button');\r\n    element.setAttribute('tabindex', '0');\r\n\r\n    if (ariaText) {\r\n        element.setAttribute('aria-label', ariaText);\r\n    }\r\n\r\n    element.style.display = 'none';\r\n\r\n    if (apiAction) {\r\n        new UI(element).on('click tap enter', function(event) {\r\n            apiAction(event);\r\n        });\r\n    }\r\n\r\n    // Prevent button from being focused on mousedown so that the tooltips don't remain visible until\r\n    // the user interacts with another element on the page\r\n    element.addEventListener('mousedown', (e) => {\r\n        e.preventDefault();\r\n    });\r\n\r\n    if (svgIcons) {\r\n        Array.prototype.forEach.call(svgIcons, svgIcon => {\r\n            if (typeof svgIcon === 'string') {\r\n                element.appendChild(svgParse(svgIcon));\r\n            } else {\r\n                element.appendChild(svgIcon);\r\n            }\r\n        });\r\n    }\r\n\r\n    return {\r\n        element: function() {\r\n            return element;\r\n        },\r\n        toggle: function(m) {\r\n            if (m) {\r\n                this.show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        },\r\n        show: function() {\r\n            element.style.display = '';\r\n        },\r\n        hide: function() {\r\n            element.style.display = 'none';\r\n        }\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/button.js","let parser;\r\n\r\nexport default function svgParse(svgXml) {\r\n    if (!parser) {\r\n        parser = new DOMParser();\r\n    }\r\n\r\n    return parser.parseFromString(svgXml, 'image/svg+xml').documentElement;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/svgParser.js","import { seconds, trim } from 'utils/strings';\r\n\r\n// Component that loads and parses an SRT file\r\n\r\nexport default function Srt(data) {\r\n    // Trim whitespace and split the list by returns.\r\n    var _captions = [];\r\n    data = trim(data);\r\n    var list = data.split('\\r\\n\\r\\n');\r\n    if (list.length === 1) {\r\n        list = data.split('\\n\\n');\r\n    }\r\n\r\n    for (var i = 0; i < list.length; i++) {\r\n        if (list[i] === 'WEBVTT') {\r\n            continue;\r\n        }\r\n        // Parse each entry\r\n        var entry = _entry(list[i]);\r\n        if (entry.text) {\r\n            _captions.push(entry);\r\n        }\r\n    }\r\n\r\n    return _captions;\r\n}\r\n\r\n\r\n/** Parse a single captions entry. **/\r\nfunction _entry(data) {\r\n    var entry = {};\r\n    var array = data.split('\\r\\n');\r\n    if (array.length === 1) {\r\n        array = data.split('\\n');\r\n    }\r\n    var idx = 1;\r\n    if (array[0].indexOf(' --> ') > 0) {\r\n        idx = 0;\r\n    }\r\n    if (array.length > idx + 1 && array[idx + 1]) {\r\n        // This line contains the start and end.\r\n        var line = array[idx];\r\n        var index = line.indexOf(' --> ');\r\n        if (index > 0) {\r\n            entry.begin = seconds(line.substr(0, index));\r\n            entry.end = seconds(line.substr(index + 5));\r\n            // Remaining lines contain the text\r\n            entry.text = array.slice(idx + 1).join('\\r\\n');\r\n        }\r\n    }\r\n    return entry;\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/srt.js","\r\nexport const dvrSeekLimit = -25;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/constants.js","import { STATE_IDLE, STATE_COMPLETE, STATE_ERROR } from 'events/events';\r\n\r\n// The api should dispatch an idle event when the model's state changes to complete\r\n// This is to avoid conflicts with the complete event and to maintain legacy event flow\r\nfunction normalizeApiState(newstate) {\r\n    if (newstate === STATE_COMPLETE || newstate === STATE_ERROR) {\r\n        return STATE_IDLE;\r\n    }\r\n    return newstate;\r\n}\r\n\r\nexport default function ChangeStateEvent(model, newstate, oldstate) {\r\n    newstate = normalizeApiState(newstate);\r\n    oldstate = normalizeApiState(oldstate);\r\n    // do not dispatch idle a second time after complete\r\n    if (newstate !== oldstate) {\r\n        // buffering, playing and paused states become:\r\n        // buffer, play and pause events\r\n        var eventType = newstate.replace(/(?:ing|d)$/, '');\r\n        var evt = {\r\n            type: eventType,\r\n            newstate: newstate,\r\n            oldstate: oldstate,\r\n            reason: model.mediaModel.get('state')\r\n        };\r\n        // add reason for play/pause events\r\n        if (eventType === 'play') {\r\n            evt.playReason = model.get('playReason');\r\n        } else if (eventType === 'pause') {\r\n            evt.pauseReason = model.get('pauseReason');\r\n        }\r\n        this.trigger(eventType, evt);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/events/change-state-event.js","import { Browser, OS } from 'environment/environment';\r\nimport SimpleModel from 'model/simplemodel';\r\nimport { INITIAL_PLAYER_STATE } from 'model/player-model';\r\nimport Providers from 'providers/providers';\r\nimport { loadProvidersForPlaylist } from 'api/set-playlist';\r\nimport getMediaElement from 'api/get-media-element';\r\nimport initQoe from 'controller/qoe';\r\nimport { PLAYER_STATE, STATE_IDLE, STATE_BUFFERING, STATE_PAUSED, STATE_COMPLETE, MEDIA_VOLUME, MEDIA_MUTE,\r\n    MEDIA_TYPE, PROVIDER_CHANGED, AUDIO_TRACKS, AUDIO_TRACK_CHANGED,\r\n    MEDIA_PLAY_ATTEMPT, MEDIA_PLAY_ATTEMPT_FAILED, MEDIA_RATE_CHANGE,\r\n    MEDIA_BUFFER, MEDIA_TIME, MEDIA_LEVELS, MEDIA_LEVEL_CHANGED, MEDIA_ERROR, ERROR,\r\n    MEDIA_BEFORECOMPLETE, MEDIA_COMPLETE, MEDIA_META } from 'events/events';\r\nimport { seconds } from 'utils/strings';\r\nimport _ from 'utils/underscore';\r\nimport Events from 'utils/backbone.events';\r\nimport { resolved } from 'polyfills/promise';\r\nimport cancelable from 'utils/cancelable';\r\n\r\n// Represents the state of the player\r\nconst Model = function() {\r\n    const _this = this;\r\n    let _providers;\r\n    let _provider;\r\n    let _beforecompleted = false;\r\n    let _attached = true;\r\n    let thenPlayPromise = cancelable(function() {});\r\n    let providerPromise = resolved;\r\n\r\n    this.mediaController = Object.assign({}, Events);\r\n    this.mediaModel = new MediaModel();\r\n\r\n    initQoe(this);\r\n\r\n    this.set('mediaModel', this.mediaModel);\r\n\r\n    this.setup = function(config) {\r\n\r\n        Object.assign(this.attributes, config, INITIAL_PLAYER_STATE);\r\n\r\n        this.updateProviders();\r\n        this.setAutoStart();\r\n\r\n        return this;\r\n    };\r\n\r\n    this.getConfiguration = function() {\r\n        const config = this.clone();\r\n        delete config.mediaModel;\r\n        return config;\r\n    };\r\n\r\n    this.updateProviders = function() {\r\n        _providers = new Providers(this.getConfiguration());\r\n    };\r\n\r\n    function _videoEventHandler(type, data) {\r\n        const event = Object.assign({}, data, {\r\n            type: type\r\n        });\r\n        const mediaModel = this.mediaModel;\r\n        switch (type) {\r\n            case 'flashThrottle': {\r\n                const throttled = (data.state !== 'resume');\r\n                this.set('flashThrottle', throttled);\r\n                this.set('flashBlocked', throttled);\r\n            }\r\n                break;\r\n            case 'flashBlocked':\r\n                this.set('flashBlocked', true);\r\n                return;\r\n            case 'flashUnblocked':\r\n                this.set('flashBlocked', false);\r\n                return;\r\n            case MEDIA_VOLUME:\r\n                this.set(type, data[type]);\r\n                return;\r\n            case MEDIA_MUTE:\r\n                if (!this.get('autostartMuted')) {\r\n                    // Don't persist mute state with muted autostart\r\n                    this.set(type, data[type]);\r\n                }\r\n                return;\r\n            case MEDIA_RATE_CHANGE: {\r\n                const rate = data.playbackRate;\r\n                // Check if its a generally usable rate.  Shaka changes rate to 0 when pause or buffering.\r\n                if (rate > 0) {\r\n                    this.set('playbackRate', rate);\r\n                }\r\n            }\r\n                return;\r\n            case MEDIA_TYPE:\r\n                if (mediaModel.get('mediaType') !== data.mediaType) {\r\n                    mediaModel.set('mediaType', data.mediaType);\r\n                    this.mediaController.trigger(type, event);\r\n                }\r\n                return;\r\n            case PLAYER_STATE: {\r\n                if (data.newstate === STATE_IDLE) {\r\n                    thenPlayPromise.cancel();\r\n                    mediaModel.srcReset();\r\n                }\r\n                // Always fire change:state to keep player model in sync\r\n                const previousState = mediaModel.attributes[PLAYER_STATE];\r\n                mediaModel.attributes[PLAYER_STATE] = data.newstate;\r\n                mediaModel.trigger('change:' + PLAYER_STATE, mediaModel, data.newstate, previousState);\r\n\r\n            }\r\n                // This \"return\" is important because\r\n                //  we are choosing to not propagate this event.\r\n                //  Instead letting the master controller do so\r\n                return;\r\n            case MEDIA_ERROR:\r\n                thenPlayPromise.cancel();\r\n                mediaModel.srcReset();\r\n                break;\r\n            case MEDIA_BUFFER:\r\n                this.set('buffer', data.bufferPercent);\r\n            /* falls through */\r\n            case MEDIA_META: {\r\n                const duration = data.duration;\r\n                if (_.isNumber(duration) && !_.isNaN(duration)) {\r\n                    mediaModel.set('duration', duration);\r\n                    this.set('duration', duration);\r\n                }\r\n                Object.assign(this.get('itemMeta'), data.metadata);\r\n                break;\r\n            }\r\n            case MEDIA_TIME: {\r\n                mediaModel.set('position', data.position);\r\n                this.set('position', data.position);\r\n                const duration = data.duration;\r\n                if (_.isNumber(duration) && !_.isNaN(duration)) {\r\n                    mediaModel.set('duration', duration);\r\n                    this.set('duration', duration);\r\n                }\r\n                break;\r\n            }\r\n            case PROVIDER_CHANGED:\r\n                this.set('provider', _provider.getName());\r\n                break;\r\n            case MEDIA_LEVELS:\r\n                this.setQualityLevel(data.currentQuality, data.levels);\r\n                mediaModel.set('levels', data.levels);\r\n                break;\r\n            case MEDIA_LEVEL_CHANGED:\r\n                this.setQualityLevel(data.currentQuality, data.levels);\r\n                this.persistQualityLevel(data.currentQuality, data.levels);\r\n                break;\r\n            case MEDIA_COMPLETE:\r\n                _beforecompleted = true;\r\n                this.mediaController.trigger(MEDIA_BEFORECOMPLETE, event);\r\n                if (_attached) {\r\n                    this.playbackComplete();\r\n                }\r\n                return;\r\n            case AUDIO_TRACKS:\r\n                this.setCurrentAudioTrack(data.currentTrack, data.tracks);\r\n                mediaModel.set('audioTracks', data.tracks);\r\n                break;\r\n            case AUDIO_TRACK_CHANGED:\r\n                this.setCurrentAudioTrack(data.currentTrack, data.tracks);\r\n                break;\r\n            case 'subtitlesTrackChanged':\r\n                this.persistVideoSubtitleTrack(data.currentTrack, data.tracks);\r\n                break;\r\n            case 'visualQuality':\r\n                mediaModel.set('visualQuality', Object.assign({}, data));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.mediaController.trigger(type, event);\r\n    }\r\n\r\n    this.setQualityLevel = function(quality, levels) {\r\n        if (quality > -1 && levels.length > 1) {\r\n            this.mediaModel.set('currentLevel', parseInt(quality));\r\n        }\r\n    };\r\n\r\n    this.persistQualityLevel = function(quality, levels) {\r\n        var currentLevel = levels[quality] || {};\r\n        var label = currentLevel.label;\r\n        this.set('qualityLabel', label);\r\n    };\r\n\r\n    this.setCurrentAudioTrack = function(currentTrack, tracks) {\r\n        if (currentTrack > -1 && tracks.length > 0 && currentTrack < tracks.length) {\r\n            this.mediaModel.set('currentAudioTrack', parseInt(currentTrack));\r\n        }\r\n    };\r\n\r\n    this.onMediaContainer = function() {\r\n        var container = this.get('mediaContainer');\r\n        _provider.setContainer(container);\r\n    };\r\n\r\n    this.changeVideoProvider = function(Provider) {\r\n        this.off('change:mediaContainer', this.onMediaContainer);\r\n\r\n        if (_provider) {\r\n            _provider.off(null, null, this);\r\n            if (_provider.getContainer()) {\r\n                _provider.remove();\r\n            }\r\n            delete _provider.instreamMode;\r\n        }\r\n\r\n        if (!Provider) {\r\n            this.resetProvider();\r\n            this.set('provider', undefined);\r\n            return;\r\n        }\r\n\r\n        _provider = new Provider(_this.get('id'), _this.getConfiguration());\r\n\r\n        var container = this.get('mediaContainer');\r\n        if (container) {\r\n            _provider.setContainer(container);\r\n        } else {\r\n            this.once('change:mediaContainer', this.onMediaContainer);\r\n        }\r\n\r\n        if (_provider.getName().name.indexOf('flash') === -1) {\r\n            this.set('flashThrottle', undefined);\r\n            this.set('flashBlocked', false);\r\n        }\r\n\r\n        _provider.volume(_this.get('volume'));\r\n\r\n        // Mute the video if autostarting on mobile, except for Android SDK. Otherwise, honor the model's mute value\r\n        const isAndroidSdk = _this.get('sdkplatform') === 1;\r\n        _provider.mute((this.autoStartOnMobile() && !isAndroidSdk) || _this.get('mute'));\r\n\r\n        _provider.on('all', _videoEventHandler, this);\r\n\r\n        // Attempt setting the playback rate to be the user selected value\r\n        this.setPlaybackRate(this.get('defaultPlaybackRate'));\r\n\r\n        // Set playbackRate because provider support for playbackRate may have changed and not sent an update\r\n        this.set('playbackRate', _provider.getPlaybackRate());\r\n\r\n        if (this.get('instreamMode') === true) {\r\n            _provider.instreamMode = true;\r\n        }\r\n\r\n        this.set('renderCaptionsNatively', _provider.renderNatively);\r\n    };\r\n\r\n    this.checkComplete = function() {\r\n        return _beforecompleted;\r\n    };\r\n\r\n    this.detachMedia = function() {\r\n        thenPlayPromise.cancel();\r\n        _attached = false;\r\n        if (_provider) {\r\n            _provider.off('all', _videoEventHandler, this);\r\n            _provider.detachMedia();\r\n        }\r\n    };\r\n\r\n    this.attachMedia = function() {\r\n        _attached = true;\r\n        if (_provider) {\r\n            _provider.off('all', _videoEventHandler, this);\r\n            _provider.on('all', _videoEventHandler, this);\r\n        }\r\n        if (_beforecompleted) {\r\n            this.playbackComplete();\r\n        }\r\n        if (_provider) {\r\n            _provider.attachMedia();\r\n        }\r\n\r\n        // Restore the playback rate to the provider in case it changed while detached and we reused a video tag.\r\n        this.setPlaybackRate(this.get('defaultPlaybackRate'));\r\n    };\r\n\r\n    this.playbackComplete = function() {\r\n        _beforecompleted = false;\r\n        _provider.setState(STATE_COMPLETE);\r\n        this.mediaController.trigger(MEDIA_COMPLETE, {});\r\n    };\r\n\r\n    this.destroy = function() {\r\n        this.attributes._destroyed = true;\r\n        this.off();\r\n        if (_provider) {\r\n            _provider.off(null, null, this);\r\n            _provider.destroy();\r\n        }\r\n    };\r\n\r\n    this.getVideo = function() {\r\n        return _provider;\r\n    };\r\n\r\n    this.setFullscreen = function(state) {\r\n        state = !!state;\r\n        if (state !== _this.get('fullscreen')) {\r\n            _this.set('fullscreen', state);\r\n        }\r\n    };\r\n\r\n    // Give the option for a provider to be forced\r\n    this.chooseProvider = function(source) {\r\n        // if _providers.choose is null, something went wrong in filtering\r\n        return _providers.choose(source).provider;\r\n    };\r\n\r\n    this.setItemIndex = function(index) {\r\n        const playlist = this.get('playlist');\r\n        const length = playlist.length;\r\n\r\n        // If looping past the end, or before the beginning\r\n        index = parseInt(index, 10) || 0;\r\n        index = (index + length) % length;\r\n\r\n        this.set('item', index);\r\n        return this.setActiveItem(playlist[index]);\r\n    };\r\n\r\n    this.setActiveItem = function(item) {\r\n        thenPlayPromise.cancel();\r\n        // Item is actually changing\r\n        this.mediaModel.off();\r\n        this.mediaModel = new MediaModel();\r\n        resetItem(this, item);\r\n        this.set('minDvrWindow', item.minDvrWindow);\r\n        this.set('mediaModel', this.mediaModel);\r\n        this.attributes.playlistItem = null;\r\n        this.set('playlistItem', item);\r\n        providerPromise = this.setProvider(item);\r\n        return providerPromise;\r\n    };\r\n\r\n    function resetItem(model, item) {\r\n        const position = item ? seconds(item.starttime) : 0;\r\n        const duration = item ? seconds(item.duration) : 0;\r\n        const mediaModelState = model.mediaModel.attributes;\r\n        model.mediaModel.srcReset();\r\n        mediaModelState.position = position;\r\n        mediaModelState.duration = duration;\r\n\r\n        model.set('playRejected', false);\r\n        model.set('itemMeta', {});\r\n        model.set('position', position);\r\n        model.set('duration', duration);\r\n    }\r\n\r\n    this.setProvider = function(item) {\r\n        const source = item && item.sources && item.sources[0];\r\n        if (source === undefined) {\r\n            // source is undefined when resetting index with empty playlist\r\n            throw new Error('No media');\r\n        }\r\n\r\n        const Provider = this.chooseProvider(source);\r\n        // If we are changing video providers\r\n        if (!Provider || !(_provider && _provider instanceof Provider)) {\r\n            // Replace the video tag for the next provider\r\n            if (_provider) {\r\n                replaceMediaElement(this);\r\n            }\r\n            this.changeVideoProvider(Provider);\r\n        }\r\n\r\n        if (!_provider) {\r\n            this.set(PLAYER_STATE, STATE_BUFFERING);\r\n            const mediaModelContext = this.mediaModel;\r\n            return loadProvidersForPlaylist(this).then(() => {\r\n                if (mediaModelContext === this.mediaModel) {\r\n                    syncPlayerWithMediaModel(mediaModelContext);\r\n                    // Verify that we have a provider class for this source\r\n                    if (this.chooseProvider(source)) {\r\n                        return this.setProvider(item);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // this allows the providers to preload\r\n        if (_provider.init) {\r\n            _provider.init(item);\r\n        }\r\n\r\n        // Set the Provider after calling init because some Provider properties are only set afterwards\r\n        this.set('provider', _provider.getName());\r\n\r\n        // Listening for change:item won't suffice when loading the same index or file\r\n        // We also can't listen for change:mediaModel because it triggers whether or not\r\n        //  an item was actually loaded\r\n        this.trigger('itemReady', item);\r\n        return resolved;\r\n    };\r\n\r\n    function replaceMediaElement(model) {\r\n        // Replace click-to-play media element, and call .load() to unblock user-gesture to play requirement\r\n        const lastMediaElement = model.attributes.mediaElement;\r\n        const mediaElement =\r\n            model.attributes.mediaElement = getMediaElement();\r\n        mediaElement.volume = lastMediaElement.volume;\r\n        mediaElement.muted = lastMediaElement.muted;\r\n        mediaElement.load();\r\n    }\r\n\r\n    this.getProviders = function() {\r\n        return _providers;\r\n    };\r\n\r\n    this.resetProvider = function() {\r\n        _provider = null;\r\n    };\r\n\r\n    this.setVolume = function(volume) {\r\n        volume = Math.round(volume);\r\n        this.set('volume', volume);\r\n        if (_provider) {\r\n            _provider.volume(volume);\r\n        }\r\n        var mute = (volume === 0);\r\n        if (mute !== (this.getMute())) {\r\n            this.setMute(mute);\r\n        }\r\n    };\r\n\r\n    this.getMute = function() {\r\n        return this.get('autostartMuted') || this.get('mute');\r\n    };\r\n\r\n    this.setMute = function(mute) {\r\n        if (mute === undefined) {\r\n            mute = !(this.getMute());\r\n        }\r\n        this.set('mute', mute);\r\n        if (_provider) {\r\n            _provider.mute(mute);\r\n        }\r\n        if (!mute) {\r\n            var volume = Math.max(10, this.get('volume'));\r\n            this.set('autostartMuted', false);\r\n            this.setVolume(volume);\r\n        }\r\n    };\r\n\r\n    this.setStreamType = function(streamType) {\r\n        this.set('streamType', streamType);\r\n        if (streamType === 'LIVE') {\r\n            this.setPlaybackRate(1);\r\n        }\r\n    };\r\n\r\n    this.setPlaybackRate = function(playbackRate) {\r\n        if (!_attached || !_.isNumber(playbackRate)) {\r\n            return;\r\n        }\r\n\r\n        // Clamp the rate between 0.25x and 4x\r\n        playbackRate = Math.max(Math.min(playbackRate, 4), 0.25);\r\n\r\n        if (this.get('streamType') === 'LIVE') {\r\n            playbackRate = 1;\r\n        }\r\n\r\n        this.set('defaultPlaybackRate', playbackRate);\r\n\r\n        if (_provider && _provider.setPlaybackRate) {\r\n            _provider.setPlaybackRate(playbackRate);\r\n        }\r\n    };\r\n\r\n    function loadAndPlay(model, item) {\r\n        thenPlayPromise.cancel();\r\n\r\n        const mediaModelContext = model.mediaModel;\r\n\r\n        mediaModelContext.set('setup', true);\r\n        if (_provider) {\r\n            return playWithProvider(item);\r\n        }\r\n\r\n        thenPlayPromise = cancelable(() => {\r\n            if (mediaModelContext === model.mediaModel) {\r\n                return playWithProvider(item);\r\n            }\r\n            throw new Error('Playback cancelled.');\r\n        });\r\n        return providerPromise.catch(error => {\r\n            thenPlayPromise.cancel();\r\n            // Required provider was not loaded\r\n            model.trigger(ERROR, {\r\n                message: `Could not play video: ${error.message}`,\r\n                error: error\r\n            });\r\n            // Fail the playPromise to trigger \"playAttemptFailed\"\r\n            throw error;\r\n        }).then(thenPlayPromise.async);\r\n    }\r\n\r\n    function playWithProvider(item) {\r\n        // Calling load() on Shaka may return a player setup promise\r\n        const providerSetupPromise = _provider.load(item);\r\n        if (providerSetupPromise) {\r\n            thenPlayPromise = cancelable(() => {\r\n                return _provider.play() || resolved;\r\n            });\r\n            return providerSetupPromise.then(thenPlayPromise.async);\r\n        }\r\n        return _provider.play() || resolved;\r\n    }\r\n\r\n    function playAttempt(model, playPromise, playReason) {\r\n        const mediaModelContext = model.mediaModel;\r\n        const itemContext = model.get('playlistItem');\r\n\r\n        model.mediaController.trigger(MEDIA_PLAY_ATTEMPT, {\r\n            item: itemContext,\r\n            playReason: playReason\r\n        });\r\n\r\n        // Immediately set player state to buffering if these conditions are met\r\n        const videoTagUnpaused = _provider && _provider.video && !_provider.video.paused;\r\n        if (videoTagUnpaused) {\r\n            model.set(PLAYER_STATE, STATE_BUFFERING);\r\n        }\r\n\r\n        playPromise.then(() => {\r\n            if (!mediaModelContext.get('setup')) {\r\n                // Exit if model state was reset\r\n                return;\r\n            }\r\n            mediaModelContext.set('started', true);\r\n            if (mediaModelContext === model.mediaModel) {\r\n                syncPlayerWithMediaModel(mediaModelContext);\r\n            }\r\n        }).catch(error => {\r\n            model.set('playRejected', true);\r\n            const videoTagPaused = _provider && _provider.video && _provider.video.paused;\r\n            if (videoTagPaused) {\r\n                mediaModelContext.set(PLAYER_STATE, STATE_PAUSED);\r\n            }\r\n            model.mediaController.trigger(MEDIA_PLAY_ATTEMPT_FAILED, {\r\n                error: error,\r\n                item: itemContext,\r\n                playReason: playReason\r\n            });\r\n        });\r\n    }\r\n\r\n    function syncPlayerWithMediaModel(mediaModel) {\r\n        // Sync player state with mediaModel state\r\n        const mediaState = mediaModel.get('state');\r\n        mediaModel.trigger('change:state', mediaModel, mediaState, mediaState);\r\n    }\r\n\r\n    this.stopVideo = function() {\r\n        thenPlayPromise.cancel();\r\n        const item = this.get('playlist')[this.get('item')];\r\n        this.attributes.playlistItem = item;\r\n        resetItem(this, item);\r\n        if (_provider) {\r\n            _provider.stop();\r\n        }\r\n    };\r\n\r\n    this.preloadVideo = function() {\r\n        const item = this.get('playlistItem');\r\n        // Only attempt to preload if media is attached and hasn't been loaded\r\n        if (this.get('state') === 'idle' && _attached && _provider &&\r\n            item.preload !== 'none' &&\r\n            this.get('autostart') === false &&\r\n            !this.mediaModel.get('setup') &&\r\n            !this.mediaModel.get('preloaded')) {\r\n            this.mediaModel.set('preloaded', true);\r\n            _provider.preload(item);\r\n        }\r\n    };\r\n\r\n    this.playVideo = function(playReason) {\r\n        const item = this.get('playlistItem');\r\n        if (!item) {\r\n            return;\r\n        }\r\n\r\n        if (!playReason) {\r\n            playReason = this.get('playReason');\r\n        }\r\n\r\n        let playPromise;\r\n\r\n        this.set('playRejected', false);\r\n        if (!this.mediaModel.get('setup')) {\r\n            playPromise = loadAndPlay(this, item);\r\n            playAttempt(this, playPromise, playReason);\r\n        } else {\r\n            playPromise = _provider.play() || resolved;\r\n            if (!this.mediaModel.get('started')) {\r\n                playAttempt(this, playPromise, playReason);\r\n            }\r\n        }\r\n        return playPromise;\r\n    };\r\n\r\n    this.persistCaptionsTrack = function() {\r\n        var track = this.get('captionsTrack');\r\n\r\n        if (track) {\r\n            // update preference if an option was selected\r\n            this.set('captionLabel', track.name);\r\n        } else {\r\n            this.set('captionLabel', 'Off');\r\n        }\r\n    };\r\n\r\n\r\n    this.setVideoSubtitleTrack = function(trackIndex, tracks) {\r\n        this.set('captionsIndex', trackIndex);\r\n        /*\r\n         * Tracks could have changed even if the index hasn't.\r\n         * Need to ensure track has data for captionsrenderer.\r\n         */\r\n        if (trackIndex && tracks && trackIndex <= tracks.length && tracks[trackIndex - 1].data) {\r\n            this.set('captionsTrack', tracks[trackIndex - 1]);\r\n        }\r\n\r\n        if (_provider && _provider.setSubtitlesTrack) {\r\n            _provider.setSubtitlesTrack(trackIndex);\r\n        }\r\n    };\r\n\r\n    this.persistVideoSubtitleTrack = function(trackIndex, tracks) {\r\n        this.setVideoSubtitleTrack(trackIndex, tracks);\r\n        this.persistCaptionsTrack();\r\n    };\r\n\r\n    function _autoStartSupportedIOS() {\r\n        if (!OS.iOS) {\r\n            return false;\r\n        }\r\n        // Autostart only supported in iOS 10 or higher - check if the version is 9 or less\r\n        return OS.version.major >= 10;\r\n    }\r\n\r\n    function platformCanAutostart() {\r\n        var autostartAdsIsEnabled = (!_this.get('advertising') || _this.get('advertising').autoplayadsmuted);\r\n        var iosBrowserIsSupported = _autoStartSupportedIOS() && (Browser.safari || Browser.chrome || Browser.facebook);\r\n        var androidBrowserIsSupported = OS.android && Browser.chrome;\r\n        var mobileBrowserIsSupported = (iosBrowserIsSupported || androidBrowserIsSupported);\r\n        var isAndroidSdk = _this.get('sdkplatform') === 1;\r\n        return (!_this.get('sdkplatform') && autostartAdsIsEnabled && mobileBrowserIsSupported) || isAndroidSdk;\r\n    }\r\n\r\n    this.autoStartOnMobile = function() {\r\n        return this.get('autostart') && platformCanAutostart();\r\n    };\r\n\r\n    // Mobile players always wait to become viewable.\r\n    // Desktop players must have autostart set to viewable\r\n    this.setAutoStart = function(autoStart) {\r\n        if (autoStart !== undefined) {\r\n            this.set('autostart', autoStart);\r\n        }\r\n\r\n        const autoStartOnMobile = this.autoStartOnMobile();\r\n        const isAndroidSdk = _this.get('sdkplatform') === 1;\r\n        if (autoStartOnMobile && !isAndroidSdk) {\r\n            this.set('autostartMuted', true);\r\n        }\r\n        this.set('playOnViewable', autoStartOnMobile || this.get('autostart') === 'viewable');\r\n    };\r\n};\r\n\r\n// Represents the state of the provider/media element\r\nconst MediaModel = Model.MediaModel = function() {\r\n    this.attributes = {\r\n        state: STATE_IDLE\r\n    };\r\n};\r\n\r\nObject.assign(MediaModel.prototype, SimpleModel, {\r\n    srcReset() {\r\n        const attributes = this.attributes;\r\n        attributes.setup = false;\r\n        attributes.started = false;\r\n        attributes.preloaded = false;\r\n        attributes.visualQuality = null;\r\n    }\r\n});\r\n\r\nObject.assign(Model.prototype, SimpleModel);\r\n\r\nexport default Model;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/model.js","export const requestAnimationFrame = window.requestAnimationFrame || function (callback) {\r\n    return setTimeout(callback, 17);\r\n};\r\n\r\nexport const cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/request-animation-frame.js","import { replaceClass } from 'utils/dom';\r\n\r\nexport function getBreakpoint(width) {\r\n    let breakpoint = 0;\r\n\r\n    if (width >= 1280) {\r\n        breakpoint = 7;\r\n    } else if (width >= 960) {\r\n        breakpoint = 6;\r\n    } else if (width >= 800) {\r\n        breakpoint = 5;\r\n    } else if (width >= 640) {\r\n        breakpoint = 4;\r\n    } else if (width >= 540) {\r\n        breakpoint = 3;\r\n    } else if (width >= 420) {\r\n        breakpoint = 2;\r\n    } else if (width >= 320) {\r\n        breakpoint = 1;\r\n    }\r\n\r\n    return breakpoint;\r\n}\r\n\r\nexport function setBreakpoint(playerElement, breakpointNumber) {\r\n    const breakpointClass = 'jw-breakpoint-' + breakpointNumber;\r\n    replaceClass(playerElement, /jw-breakpoint-\\d+/, breakpointClass);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/breakpoint.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 77\n// module chunks = 0 1 2 3 4 5","export default function(element, ariaLabel) {\r\n    if (!element || !ariaLabel) {\r\n        return;\r\n    }\r\n\r\n    element.setAttribute('aria-label', ariaLabel);\r\n    element.setAttribute('role', 'button');\r\n    element.setAttribute('tabindex', '0');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/aria.js","import sliderTemplate from 'view/controls/templates/slider';\r\nimport { OS } from 'environment/environment';\r\nimport Events from 'utils/backbone.events';\r\nimport UI from 'utils/ui';\r\nimport utils from 'utils/helpers';\r\n\r\nconst getRailBounds = function(elementRail) {\r\n    const bounds = utils.bounds(elementRail);\r\n    // Partial workaround of Android 'inert-visual-viewport'\r\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=489206\r\n    const pageXOffset = window.pageXOffset;\r\n    if (pageXOffset && OS.android && document.body.parentElement.getBoundingClientRect().left >= 0) {\r\n        bounds.left -= pageXOffset;\r\n        bounds.right -= pageXOffset;\r\n    }\r\n    return bounds;\r\n};\r\n\r\nexport default class Slider {\r\n    constructor(className, orientation) {\r\n        Object.assign(this, Events);\r\n\r\n        this.className = className + ' jw-background-color jw-reset';\r\n        this.orientation = orientation;\r\n\r\n        this.dragStartListener = this.dragStart.bind(this);\r\n        this.dragMoveListener = this.dragMove.bind(this);\r\n        this.dragEndListener = this.dragEnd.bind(this);\r\n\r\n        this.tapListener = this.tap.bind(this);\r\n    }\r\n\r\n    setup() {\r\n        this.el = utils.createElement(sliderTemplate(this.className, 'jw-slider-' + this.orientation));\r\n\r\n        this.elementRail = this.el.getElementsByClassName('jw-slider-container')[0];\r\n        this.elementBuffer = this.el.getElementsByClassName('jw-buffer')[0];\r\n        this.elementProgress = this.el.getElementsByClassName('jw-progress')[0];\r\n        this.elementThumb = this.el.getElementsByClassName('jw-knob')[0];\r\n\r\n        this.userInteract = new UI(this.element(), { preventScrolling: true });\r\n\r\n        this.userInteract.on('dragStart', this.dragStartListener);\r\n        this.userInteract.on('drag', this.dragMoveListener);\r\n        this.userInteract.on('dragEnd', this.dragEndListener);\r\n\r\n        this.userInteract.on('tap click', this.tapListener);\r\n    }\r\n\r\n    dragStart() {\r\n        this.trigger('dragStart');\r\n        this.railBounds = getRailBounds(this.elementRail);\r\n    }\r\n\r\n    dragEnd(evt) {\r\n        this.dragMove(evt);\r\n        this.trigger('dragEnd');\r\n    }\r\n\r\n    dragMove(evt) {\r\n        const bounds = this.railBounds = (this.railBounds) ? this.railBounds : getRailBounds(this.elementRail);\r\n        let dimension;\r\n        let percentage;\r\n\r\n        if (this.orientation === 'horizontal') {\r\n            dimension = evt.pageX;\r\n            if (dimension < bounds.left) {\r\n                percentage = 0;\r\n            } else if (dimension > bounds.right) {\r\n                percentage = 100;\r\n            } else {\r\n                percentage = utils.between((dimension - bounds.left) / bounds.width, 0, 1) * 100;\r\n            }\r\n        } else {\r\n            dimension = evt.pageY;\r\n            if (dimension >= bounds.bottom) {\r\n                percentage = 0;\r\n            } else if (dimension <= bounds.top) {\r\n                percentage = 100;\r\n            } else {\r\n                percentage = utils.between((bounds.height - (dimension - bounds.top)) / bounds.height, 0, 1) * 100;\r\n            }\r\n        }\r\n\r\n        const updatedPercent = this.limit(percentage);\r\n        this.render(updatedPercent);\r\n        this.update(updatedPercent);\r\n\r\n        return false;\r\n    }\r\n\r\n    tap(evt) {\r\n        this.railBounds = getRailBounds(this.elementRail);\r\n        this.dragMove(evt);\r\n    }\r\n\r\n    limit(percentage) {\r\n        // modules that extend Slider can set limits on the percentage (TimeSlider)\r\n        return percentage;\r\n    }\r\n\r\n    update(percentage) {\r\n        this.trigger('update', { percentage: percentage });\r\n    }\r\n\r\n    render(percentage) {\r\n        percentage = Math.max(0, Math.min(percentage, 100));\r\n\r\n        if (this.orientation === 'horizontal') {\r\n            this.elementThumb.style.left = percentage + '%';\r\n            this.elementProgress.style.width = percentage + '%';\r\n        } else {\r\n            this.elementThumb.style.bottom = percentage + '%';\r\n            this.elementProgress.style.height = percentage + '%';\r\n        }\r\n    }\r\n\r\n    updateBuffer(percentage) {\r\n        this.elementBuffer.style.width = percentage + '%';\r\n    }\r\n\r\n    element() {\r\n        return this.el;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/slider.js","import Events from 'utils/backbone.events';\r\nimport ariaLabel from 'utils/aria';\r\nimport { toggleClass } from 'utils/dom';\r\nimport svgParse from 'utils/svgParser';\r\n\r\nexport default class Tooltip {\r\n    constructor(name, ariaText, elementShown, svgIcons) {\r\n        Object.assign(this, Events);\r\n        this.el = document.createElement('div');\r\n        let className = 'jw-icon jw-icon-tooltip ' + name + ' jw-button-color jw-reset';\r\n        if (!elementShown) {\r\n            className += ' jw-hidden';\r\n        }\r\n\r\n        ariaLabel(this.el, ariaText);\r\n\r\n        this.el.className = className;\r\n        this.container = document.createElement('div');\r\n        this.container.className = 'jw-overlay jw-reset';\r\n        this.openClass = 'jw-open';\r\n        this.componentType = 'tooltip';\r\n\r\n        this.el.appendChild(this.container);\r\n        if (svgIcons && svgIcons.length > 0) {\r\n            Array.prototype.forEach.call(svgIcons, svgIcon => {\r\n                if (typeof svgIcon === 'string') {\r\n                    this.el.appendChild(svgParse(svgIcon));\r\n                } else {\r\n                    this.el.appendChild(svgIcon);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    addContent(elem) {\r\n        if (this.content) {\r\n            this.removeContent();\r\n        }\r\n\r\n        this.content = elem;\r\n        this.container.appendChild(elem);\r\n    }\r\n\r\n    removeContent() {\r\n        if (this.content) {\r\n            this.container.removeChild(this.content);\r\n            this.content = null;\r\n        }\r\n    }\r\n\r\n    hasContent() {\r\n        return !!this.content;\r\n    }\r\n\r\n    element() {\r\n        return this.el;\r\n    }\r\n\r\n    openTooltip(evt) {\r\n        this.trigger('open-' + this.componentType, evt, { isOpen: true });\r\n        this.isOpen = true;\r\n        toggleClass(this.el, this.openClass, this.isOpen);\r\n    }\r\n\r\n    closeTooltip(evt) {\r\n        this.trigger('close-' + this.componentType, evt, { isOpen: false });\r\n        this.isOpen = false;\r\n        toggleClass(this.el, this.openClass, this.isOpen);\r\n    }\r\n\r\n    toggleOpenState(evt) {\r\n        if (this.isOpen) {\r\n            this.closeTooltip(evt);\r\n        } else {\r\n            this.openTooltip(evt);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/tooltip.js","import { addClass, removeClass } from 'utils/dom';\r\nimport { getPointerType } from 'utils/ui';\r\n\r\nexport function SimpleTooltip(attachToElement, name, text, openCallback) {\r\n    const tooltipElement = document.createElement('div');\r\n    tooltipElement.className = `jw-reset jw-tooltip jw-tooltip-${name}`;\r\n\r\n    const textElement = document.createElement('div');\r\n    textElement.className = 'jw-text';\r\n    textElement.textContent = text;\r\n\r\n    tooltipElement.appendChild(textElement);\r\n    attachToElement.appendChild(tooltipElement);\r\n\r\n    const instance = {\r\n        open() {\r\n            if (instance.touchEvent) {\r\n                delete instance.pointerType;\r\n                return;\r\n            }\r\n\r\n            tooltipElement.setAttribute('aria-expanded', 'true');\r\n            addClass(tooltipElement, 'jw-open');\r\n\r\n            if (openCallback) {\r\n                openCallback();\r\n            }\r\n        },\r\n        close() {\r\n            if (instance.touchEvent) {\r\n                delete instance.pointerType;\r\n                return;\r\n            }\r\n\r\n            tooltipElement.setAttribute('aria-expanded', 'false');\r\n            removeClass(tooltipElement, 'jw-open');\r\n        },\r\n        setText(newText) {\r\n            tooltipElement.querySelector('.jw-text').textContent = newText;\r\n        }\r\n    };\r\n\r\n    attachToElement.addEventListener('mouseover', instance.open);\r\n    attachToElement.addEventListener('mouseout', instance.close);\r\n    attachToElement.addEventListener('touchstart', (evt) => {\r\n        instance.touchEvent = getPointerType(evt) === 'touch';\r\n    });\r\n\r\n    return instance;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/simple-tooltip.js","import { resolved } from 'polyfills/promise';\r\n\r\nexport default function cancelable(callback) {\r\n    let cancelled = false;\r\n\r\n    return {\r\n        async: function() {\r\n            const args = arguments;\r\n            return resolved.then(() => {\r\n                if (cancelled) {\r\n                    return;\r\n                }\r\n                return callback.apply(this, args);\r\n            });\r\n        },\r\n        cancel: () => {\r\n            cancelled = true;\r\n        },\r\n        cancelled: () => cancelled\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/cancelable.js","export default (function() {\r\n    if ('hidden' in document) {\r\n        return function () {\r\n            return !document.hidden;\r\n        };\r\n    }\r\n    if ('webkitHidden' in document) {\r\n        return function () {\r\n            return !document.webkitHidden;\r\n        };\r\n    }\r\n    // document.hidden not supported\r\n    return function () {\r\n        return true;\r\n    };\r\n}());\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/active-tab.js","import VTTCue from 'parsers/captions/vttcue';\r\nimport { chunkLoadErrorHandler } from '../api/core-loader';\r\nimport utils from 'utils/helpers';\r\nimport { localName } from 'parsers/parsers';\r\nimport srt from 'parsers/captions/srt';\r\nimport dfxp from 'parsers/captions/dfxp';\r\n\r\nexport function loadFile(track, successHandler, errorHandler) {\r\n    track.xhr = utils.ajax(track.file, function(xhr) {\r\n        xhrSuccess(xhr, track, successHandler, errorHandler);\r\n    }, errorHandler);\r\n}\r\n\r\nexport function cancelXhr(tracks) {\r\n    if (tracks) {\r\n        tracks.forEach(track => {\r\n            var xhr = track.xhr;\r\n            if (xhr) {\r\n                xhr.onload = null;\r\n                xhr.onreadystatechange = null;\r\n                xhr.onerror = null;\r\n                if ('abort' in xhr) {\r\n                    xhr.abort();\r\n                }\r\n            }\r\n            delete track.xhr;\r\n        });\r\n    }\r\n}\r\n\r\nexport function convertToVTTCues(cues) {\r\n    // VTTCue is available natively or polyfilled where necessary\r\n    return cues.map(cue => new VTTCue(cue.begin, cue.end, cue.text));\r\n}\r\n\r\nfunction xhrSuccess(xhr, track, successHandler, errorHandler) {\r\n    var xmlRoot = xhr.responseXML ? xhr.responseXML.firstChild : null;\r\n    var cues;\r\n    var vttCues;\r\n\r\n    // IE9 sets the firstChild element to the root <xml> tag\r\n    if (xmlRoot) {\r\n        if (localName(xmlRoot) === 'xml') {\r\n            xmlRoot = xmlRoot.nextSibling;\r\n        }\r\n        // Ignore all comments\r\n        while (xmlRoot.nodeType === xmlRoot.COMMENT_NODE) {\r\n            xmlRoot = xmlRoot.nextSibling;\r\n        }\r\n    }\r\n\r\n    try {\r\n        if (xmlRoot && localName(xmlRoot) === 'tt') {\r\n            // parse dfxp track\r\n            cues = dfxp(xhr.responseXML);\r\n            vttCues = convertToVTTCues(cues);\r\n            delete track.xhr;\r\n            successHandler(vttCues);\r\n        } else {\r\n            // parse VTT/SRT track\r\n            var responseText = xhr.responseText;\r\n            if (responseText.indexOf('WEBVTT') >= 0) {\r\n                // make VTTCues from VTT track\r\n                loadVttParser().then(VTTParser => {\r\n                    var parser = new VTTParser(window);\r\n                    vttCues = [];\r\n                    parser.oncue = function(cue) {\r\n                        vttCues.push(cue);\r\n                    };\r\n\r\n                    parser.onflush = function() {\r\n                        delete track.xhr;\r\n                        successHandler(vttCues);\r\n                    };\r\n\r\n                    // Parse calls onflush internally\r\n                    parser.parse(responseText);\r\n                }).catch(error => {\r\n                    delete track.xhr;\r\n                    errorHandler(error);\r\n                });\r\n            } else {\r\n                // make VTTCues from SRT track\r\n                cues = srt(responseText);\r\n                vttCues = convertToVTTCues(cues);\r\n                delete track.xhr;\r\n                successHandler(vttCues);\r\n            }\r\n        }\r\n    } catch (error) {\r\n        delete track.xhr;\r\n        errorHandler(error);\r\n    }\r\n}\r\n\r\nfunction loadVttParser() {\r\n    return require.ensure(['parsers/captions/vttparser'], function (require) {\r\n        return require('parsers/captions/vttparser').default;\r\n    }, chunkLoadErrorHandler, 'vttparser');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/tracks-loader.js","export function createId(track, tracksCount) {\r\n    var trackId;\r\n    var prefix = track.kind || 'cc';\r\n    if (track.default || track.defaulttrack) {\r\n        trackId = 'default';\r\n    } else {\r\n        trackId = track._id || track.file || (prefix + tracksCount);\r\n    }\r\n    return trackId;\r\n}\r\n\r\nexport function createLabel(track, unknownCount) {\r\n    var label = track.label || track.name || track.language;\r\n    if (!label) {\r\n        label = 'Unknown CC';\r\n        unknownCount += 1;\r\n        if (unknownCount > 1) {\r\n            label += ' [' + unknownCount + ']';\r\n        }\r\n    }\r\n    return { label: label, unknownCount: unknownCount };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/tracks-helper.js","/**\r\n * Copyright 2013 vtt.js Contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n*/\r\n\r\nlet VTTCue = window.VTTCue;\r\n\r\nfunction findDirectionSetting(value) {\r\n    if (typeof value !== 'string') {\r\n        return false;\r\n    }\r\n    const directionSetting = {\r\n        '': true,\r\n        lr: true,\r\n        rl: true\r\n    };\r\n    const dir = directionSetting[value.toLowerCase()];\r\n    return dir ? value.toLowerCase() : false;\r\n}\r\n\r\nfunction findAlignSetting(value) {\r\n    if (typeof value !== 'string') {\r\n        return false;\r\n    }\r\n    const alignSetting = {\r\n        start: true,\r\n        middle: true,\r\n        end: true,\r\n        left: true,\r\n        right: true\r\n    };\r\n    const align = alignSetting[value.toLowerCase()];\r\n    return align ? value.toLowerCase() : false;\r\n}\r\n\r\nif (!VTTCue) {\r\n    const autoKeyword = 'auto';\r\n\r\n    VTTCue = function(startTime, endTime, text) {\r\n        const cue = this;\r\n\r\n        /**\r\n         * Shim implementation specific properties. These properties are not in\r\n         * the spec.\r\n         */\r\n\r\n        // Lets us know when the VTTCue's data has changed in such a way that we need\r\n        // to recompute its display state. This lets us compute its display state\r\n        // lazily.\r\n        cue.hasBeenReset = false;\r\n\r\n        /**\r\n         * VTTCue and TextTrackCue properties\r\n         * http://dev.w3.org/html5/webvtt/#vttcue-interface\r\n         */\r\n\r\n        let _id = '';\r\n        let _pauseOnExit = false;\r\n        let _startTime = startTime;\r\n        let _endTime = endTime;\r\n        let _text = text;\r\n        let _region = null;\r\n        let _vertical = '';\r\n        let _snapToLines = true;\r\n        let _line = autoKeyword;\r\n        let _lineAlign = 'start';\r\n        let _position = autoKeyword;\r\n        let _size = 100;\r\n        let _align = 'middle';\r\n\r\n        Object.defineProperty(cue, 'id', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _id;\r\n            },\r\n            set: function (value) {\r\n                _id = '' + value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'pauseOnExit', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _pauseOnExit;\r\n            },\r\n            set: function (value) {\r\n                _pauseOnExit = !!value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'startTime', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _startTime;\r\n            },\r\n            set: function (value) {\r\n                if (typeof value !== 'number') {\r\n                    throw new TypeError('Start time must be set to a number.');\r\n                }\r\n                _startTime = value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'endTime', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _endTime;\r\n            },\r\n            set: function (value) {\r\n                if (typeof value !== 'number') {\r\n                    throw new TypeError('End time must be set to a number.');\r\n                }\r\n                _endTime = value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'text', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _text;\r\n            },\r\n            set: function (value) {\r\n                _text = '' + value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'region', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _region;\r\n            },\r\n            set: function (value) {\r\n                _region = value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'vertical', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _vertical;\r\n            },\r\n            set: function (value) {\r\n                const setting = findDirectionSetting(value);\r\n                // Have to check for false because the setting an be an empty string.\r\n                if (setting === false) {\r\n                    throw new SyntaxError('An invalid or illegal string was specified.');\r\n                }\r\n                _vertical = setting;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'snapToLines', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _snapToLines;\r\n            },\r\n            set: function (value) {\r\n                _snapToLines = !!value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'line', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _line;\r\n            },\r\n            set: function (value) {\r\n                if (typeof value !== 'number' && value !== autoKeyword) {\r\n                    throw new SyntaxError('An invalid number or illegal string was specified.');\r\n                }\r\n                _line = value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'lineAlign', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _lineAlign;\r\n            },\r\n            set: function (value) {\r\n                const setting = findAlignSetting(value);\r\n                if (!setting) {\r\n                    throw new SyntaxError('An invalid or illegal string was specified.');\r\n                }\r\n                _lineAlign = setting;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'position', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _position;\r\n            },\r\n            set: function (value) {\r\n                if (value < 0 || value > 100) {\r\n                    throw new Error('Position must be between 0 and 100.');\r\n                }\r\n                _position = value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'size', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _size;\r\n            },\r\n            set: function (value) {\r\n                if (value < 0 || value > 100) {\r\n                    throw new Error('Size must be between 0 and 100.');\r\n                }\r\n                _size = value;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(cue, 'align', {\r\n            enumerable: true,\r\n            get: function () {\r\n                return _align;\r\n            },\r\n            set: function (value) {\r\n                const setting = findAlignSetting(value);\r\n                if (!setting) {\r\n                    throw new SyntaxError('An invalid or illegal string was specified.');\r\n                }\r\n                _align = setting;\r\n                this.hasBeenReset = true;\r\n            }\r\n        });\r\n\r\n        /**\r\n         * Other <track> spec defined properties\r\n         */\r\n\r\n        // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\r\n        cue.displayState = undefined;\r\n    };\r\n\r\n    /**\r\n     * VTTCue methods\r\n     */\r\n\r\n    VTTCue.prototype.getCueAsHTML = function () {\r\n        // Assume WebVTT.convertCueToDOMTree is on the global.\r\n        const WebVTT = window.WebVTT;\r\n        return WebVTT.convertCueToDOMTree(window, this.text);\r\n    };\r\n}\r\n\r\nexport default VTTCue;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/vttcue.js","import { seconds, trim } from 'utils/strings';\r\n\r\n// Component that loads and parses an DFXP file\r\n\r\nexport default function Dfxp(xmlDoc) {\r\n    validate(xmlDoc);\r\n    var _captions = [];\r\n    var paragraphs = xmlDoc.getElementsByTagName('p');\r\n    // Default frameRate is 30\r\n    var frameRate = 30;\r\n    var tt = xmlDoc.getElementsByTagName('tt');\r\n    if (tt && tt[0]) {\r\n        var parsedFrameRate = parseFloat(tt[0].getAttribute('ttp:frameRate'));\r\n        if (!isNaN(parsedFrameRate)) {\r\n            frameRate = parsedFrameRate;\r\n        }\r\n    }\r\n    validate(paragraphs);\r\n    if (!paragraphs.length) {\r\n        paragraphs = xmlDoc.getElementsByTagName('tt:p');\r\n        if (!paragraphs.length) {\r\n            paragraphs = xmlDoc.getElementsByTagName('tts:p');\r\n        }\r\n    }\r\n\r\n    for (var i = 0; i < paragraphs.length; i++) {\r\n        var p = paragraphs[i];\r\n\r\n        var breaks = p.getElementsByTagName('br');\r\n        for (var j = 0; j < breaks.length; j++) {\r\n            var b = breaks[j];\r\n            b.parentNode.replaceChild(xmlDoc.createTextNode('\\r\\n'), b);\r\n        }\r\n\r\n        var rawText = (p.innerHTML || p.textContent || p.text || '');\r\n        var text = trim(rawText).replace(/>\\s+</g, '><').replace(/(<\\/?)tts?:/g, '$1').replace(/<br.*?\\/>/g, '\\r\\n');\r\n        if (text) {\r\n            var begin = p.getAttribute('begin');\r\n            var dur = p.getAttribute('dur');\r\n            var end = p.getAttribute('end');\r\n\r\n            var entry = {\r\n                begin: seconds(begin, frameRate),\r\n                text: text\r\n            };\r\n            if (end) {\r\n                entry.end = seconds(end, frameRate);\r\n            } else if (dur) {\r\n                entry.end = entry.begin + seconds(dur, frameRate);\r\n            }\r\n            _captions.push(entry);\r\n        }\r\n    }\r\n    if (!_captions.length) {\r\n        parseError();\r\n    }\r\n    return _captions;\r\n}\r\n\r\nfunction validate(object) {\r\n    if (!object) {\r\n        parseError();\r\n    }\r\n}\r\n\r\nfunction parseError() {\r\n    throw new Error('Invalid DFXP file');\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/parsers/captions/dfxp.js","import { cloneIcons } from 'view/controls/icons';\r\nimport { Browser, OS } from 'environment/environment';\r\nimport { dvrSeekLimit } from 'view/constants';\r\nimport CustomButton from 'view/controls/components/custom-button';\r\nimport utils from 'utils/helpers';\r\nimport _ from 'utils/underscore';\r\nimport Events from 'utils/backbone.events';\r\nimport UI from 'utils/ui';\r\nimport ariaLabel from 'utils/aria';\r\nimport TimeSlider from 'view/controls/components/timeslider';\r\nimport VolumeTooltip from 'view/controls/components/volumetooltip';\r\nimport button from 'view/controls/components/button';\r\nimport { SimpleTooltip } from 'view/controls/components/simple-tooltip';\r\nimport { prependChild } from 'utils/dom';\r\n\r\nfunction text(name, role) {\r\n    const element = document.createElement('span');\r\n    element.className = 'jw-text jw-reset ' + name;\r\n    if (role) {\r\n        element.setAttribute('role', role);\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction textIcon(name, role) {\r\n    const element = document.createElement('div');\r\n    element.className = 'jw-icon jw-icon-inline jw-text jw-reset ' + name;\r\n    if (role) {\r\n        element.setAttribute('role', role);\r\n    }\r\n    return element;\r\n}\r\n\r\nfunction div(classes) {\r\n    const element = document.createElement('div');\r\n    element.className = `jw-reset ${classes}`;\r\n    return element;\r\n}\r\n\r\nfunction createCastButton(castToggle, localization) {\r\n\r\n    if (Browser.safari) {\r\n        const airplayButton = button(\r\n            'jw-icon-airplay jw-off',\r\n            castToggle,\r\n            localization.airplay,\r\n            cloneIcons('airplay-off,airplay-on'));\r\n\r\n        SimpleTooltip(airplayButton.element(), 'airplay', localization.airplay);\r\n\r\n        return airplayButton;\r\n    }\r\n\r\n    if (!Browser.chrome || OS.iOS) {\r\n        return;\r\n    }\r\n\r\n\r\n    const castButton = document.createElement('button', 'google-cast-button');\r\n    castButton.setAttribute('type', 'button');\r\n    castButton.setAttribute('tabindex', '-1');\r\n\r\n    const element = document.createElement('div');\r\n    element.className = 'jw-reset jw-icon jw-icon-inline jw-icon-cast jw-button-color';\r\n    element.style.display = 'none';\r\n    element.style.cursor = 'pointer';\r\n    element.appendChild(castButton);\r\n    ariaLabel(element, localization.cast);\r\n\r\n    SimpleTooltip(element, 'chromecast', localization.cast);\r\n\r\n    return {\r\n        element: function() {\r\n            return element;\r\n        },\r\n        toggle: function(m) {\r\n            if (m) {\r\n                this.show();\r\n            } else {\r\n                this.hide();\r\n            }\r\n        },\r\n        show: function() {\r\n            element.style.display = '';\r\n        },\r\n        hide: function() {\r\n            element.style.display = 'none';\r\n        },\r\n        button: castButton\r\n    };\r\n}\r\n\r\nfunction reasonInteraction() {\r\n    return { reason: 'interaction' };\r\n}\r\n\r\nfunction buttonsInFirstNotInSecond(buttonsA, buttonsB) {\r\n    return buttonsA.filter(a =>\r\n        !buttonsB.some(b => (b.id + b.btnClass === a.id + a.btnClass) && a.callback === b.callback));\r\n}\r\n\r\nconst appendChildren = (container, elements) => {\r\n    elements.forEach(e => {\r\n        if (e.element) {\r\n            e = e.element();\r\n        }\r\n        container.appendChild(e);\r\n    });\r\n};\r\n\r\nexport default class Controlbar {\r\n    constructor(_api, _model) {\r\n        Object.assign(this, Events);\r\n        this._api = _api;\r\n        this._model = _model;\r\n        this._isMobile = OS.mobile;\r\n        const localization = _model.get('localization');\r\n        const timeSlider = new TimeSlider(_model, _api);\r\n        let volumeTooltip;\r\n        let muteButton;\r\n\r\n        const play = localization.play;\r\n        const next = localization.next;\r\n        const vol = localization.volume;\r\n        const rewind = localization.rewind;\r\n\r\n        // Do not show the volume toggle in the mobile SDKs or <iOS10\r\n        if (!_model.get('sdkplatform') && !(OS.iOS && OS.version.major < 10)) {\r\n            // Clone icons so that can be used in VolumeTooltip\r\n            const svgIcons = cloneIcons('volume-0,volume-100');\r\n            muteButton = button('jw-icon-volume', () => {\r\n                _api.setMute();\r\n            }, vol, svgIcons);\r\n        }\r\n\r\n        // Do not initialize volume slider or tooltip on mobile\r\n        if (!this._isMobile) {\r\n            volumeTooltip = new VolumeTooltip(_model, 'jw-icon-volume', vol,\r\n                cloneIcons('volume-0,volume-50,volume-100'));\r\n        }\r\n\r\n        const nextButton = button('jw-icon-next', () => {\r\n            _api.next();\r\n        }, next, cloneIcons('next'));\r\n\r\n        const settingsButton = button('jw-icon-settings jw-settings-submenu-button', (event) => {\r\n            this.trigger('settingsInteraction', 'quality', true, event);\r\n        }, localization.settings, cloneIcons('settings'));\r\n        settingsButton.element().setAttribute('aria-haspopup', 'true');\r\n\r\n        const captionsButton = button('jw-icon-cc jw-settings-submenu-button', (event) => {\r\n            this.trigger('settingsInteraction', 'captions', false, event);\r\n        }, localization.cc, cloneIcons('cc-off,cc-on'));\r\n        captionsButton.element().setAttribute('aria-haspopup', 'true');\r\n\r\n        const elements = this.elements = {\r\n            alt: text('jw-text-alt', 'status'),\r\n            play: button('jw-icon-playback', () => {\r\n                _api.playToggle(reasonInteraction());\r\n            }, play, cloneIcons('play,pause')),\r\n            rewind: button('jw-icon-rewind', () => {\r\n                this.rewind();\r\n            }, rewind, cloneIcons('rewind')),\r\n            live: button('jw-icon-live', () => {\r\n                this.goToLiveEdge();\r\n            }, localization.liveBroadcast, cloneIcons('live,dvr')),\r\n            next: nextButton,\r\n            elapsed: textIcon('jw-text-elapsed', 'timer'),\r\n            countdown: textIcon('jw-text-countdown', 'timer'),\r\n            time: timeSlider,\r\n            duration: textIcon('jw-text-duration', 'timer'),\r\n            mute: muteButton,\r\n            volumetooltip: volumeTooltip,\r\n            cast: createCastButton(() => {\r\n                _api.castToggle();\r\n            }, localization),\r\n            fullscreen: button('jw-icon-fullscreen', () => {\r\n                _api.setFullscreen();\r\n            }, localization.fullscreen, cloneIcons('fullscreen-off,fullscreen-on')),\r\n            spacer: div('jw-spacer'),\r\n            buttonContainer: div('jw-button-container'),\r\n            settingsButton,\r\n            captionsButton\r\n        };\r\n\r\n        // Add text tooltips\r\n        const captionsTip = SimpleTooltip(captionsButton.element(), 'captions', localization.cc);\r\n        const onCaptionsChanged = (model) => {\r\n            const currentCaptions = model.get('captionsList')[model.get('captionsIndex')];\r\n            let newText = localization.cc;\r\n            if (currentCaptions && currentCaptions.label !== 'Off') {\r\n                newText = currentCaptions.label;\r\n            }\r\n            captionsTip.setText(newText);\r\n        };\r\n\r\n        const nextUpTip = SimpleTooltip(elements.next.element(), 'next', localization.nextUp, () => {\r\n            const nextUp = _model.get('nextUp');\r\n\r\n            this.trigger('nextShown', {\r\n                mode: nextUp.mode,\r\n                ui: 'nextup',\r\n                itemsShown: [nextUp],\r\n                feedData: nextUp.feedData,\r\n                reason: 'hover'\r\n            });\r\n        });\r\n        SimpleTooltip(elements.rewind.element(), 'rewind', localization.rewind);\r\n        SimpleTooltip(elements.settingsButton.element(), 'settings', localization.settings);\r\n        SimpleTooltip(elements.fullscreen.element(), 'fullscreen', localization.fullscreen);\r\n\r\n        // Filter out undefined elements\r\n        const buttonLayout = [\r\n            elements.play,\r\n            elements.rewind,\r\n            elements.next,\r\n            elements.volumetooltip,\r\n            elements.mute,\r\n            elements.alt,\r\n            elements.live,\r\n            elements.elapsed,\r\n            elements.countdown,\r\n            elements.duration,\r\n            elements.spacer,\r\n            elements.cast,\r\n            elements.captionsButton,\r\n            elements.settingsButton,\r\n            elements.fullscreen\r\n        ].filter(e => e);\r\n\r\n        const layout = [\r\n            elements.time,\r\n            elements.buttonContainer\r\n        ].filter(e => e);\r\n\r\n        const menus = this.menus = [\r\n            elements.volumetooltip\r\n        ].filter(e => e);\r\n\r\n        this.el = document.createElement('div');\r\n        this.el.className = 'jw-controlbar jw-reset';\r\n\r\n        appendChildren(elements.buttonContainer, buttonLayout);\r\n        appendChildren(this.el, layout);\r\n\r\n        const logo = _model.get('logo');\r\n        if (logo && logo.position === 'control-bar') {\r\n            this.addLogo(logo);\r\n        }\r\n\r\n        // Initial State\r\n        elements.play.show();\r\n        elements.fullscreen.show();\r\n        if (elements.mute) {\r\n            elements.mute.show();\r\n        }\r\n\r\n        // Listen for model changes\r\n        _model.change('volume', this.onVolume, this);\r\n        _model.change('mute', this.onMute, this);\r\n        _model.change('duration', this.onDuration, this);\r\n        _model.change('position', this.onElapsed, this);\r\n        _model.change('fullscreen', this.onFullscreen, this);\r\n        _model.change('streamType', this.onStreamTypeChange, this);\r\n        _model.change('cues', this.addCues, this);\r\n        _model.change('altText', this.setAltText, this);\r\n        _model.change('customButtons', this.updateButtons, this);\r\n        _model.change('state', () => {\r\n            // Check for change of position to counter race condition where state is updated before the current position\r\n            _model.once('change:position', this.checkDvrLiveEdge, this);\r\n        }, this);\r\n        _model.on('change:captionsIndex', onCaptionsChanged, this);\r\n        _model.on('change:captionsList', onCaptionsChanged, this);\r\n        _model.change('nextUp', (model, nextUp) => {\r\n            let tipText = localization.nextUp;\r\n            if (nextUp && nextUp.title) {\r\n                tipText += (`: ${nextUp.title}`);\r\n            }\r\n            nextUpTip.setText(tipText);\r\n            elements.next.toggle(!!nextUp);\r\n        });\r\n        _model.on('change:audioMode', this.onAudioMode, this);\r\n        if (elements.cast) {\r\n            _model.change('castAvailable', this.onCastAvailable, this);\r\n            _model.change('castActive', this.onCastActive, this);\r\n        }\r\n\r\n        // Event listeners\r\n        // Volume sliders do not exist on mobile so don't assign listeners to them.\r\n        if (elements.volume) {\r\n            elements.volume.on('update', function (pct) {\r\n                var val = pct.percentage;\r\n                this._api.setVolume(val);\r\n            }, this);\r\n        }\r\n        if (elements.volumetooltip) {\r\n            elements.volumetooltip.on('update', function (pct) {\r\n                const val = pct.percentage;\r\n                this._api.setVolume(val);\r\n            }, this);\r\n            elements.volumetooltip.on('toggleValue', function () {\r\n                this._api.setMute();\r\n            }, this);\r\n        }\r\n\r\n        if (elements.cast && elements.cast.button) {\r\n            new UI(elements.cast.element()).on('click tap enter', function(evt) {\r\n                // controlbar cast button needs to manually trigger a click\r\n                // on the native cast button for taps and enter key\r\n                if (evt.type !== 'click') {\r\n                    elements.cast.button.click();\r\n                }\r\n                this._model.set('castClicked', true);\r\n            }, this);\r\n        }\r\n\r\n        this._model.mediaController.on('seeked', function () {\r\n            _model.once('change:position', this.checkDvrLiveEdge, this);\r\n        }, this);\r\n\r\n        new UI(elements.duration).on('click tap enter', function () {\r\n            if (this._model.get('streamType') === 'DVR') {\r\n                // Seek to \"Live\" position within live buffer, but not before current position\r\n                const currentPosition = this._model.get('position');\r\n                this._api.seek(Math.max(dvrSeekLimit, currentPosition), reasonInteraction());\r\n            }\r\n        }, this);\r\n\r\n        // When the control bar is interacted with, trigger a user action event\r\n        new UI(this.el).on('click tap drag', function () {\r\n            this.trigger('userAction');\r\n        }, this);\r\n\r\n        _.each(menus, function (ele) {\r\n            ele.on('open-tooltip', this.closeMenus, this);\r\n        }, this);\r\n\r\n        if (_model.get('audioMode')) {\r\n            this.onAudioMode(_model, true);\r\n        }\r\n    }\r\n\r\n    onVolume(model, pct) {\r\n        this.renderVolume(model.get('mute'), pct);\r\n    }\r\n\r\n    onMute(model, muted) {\r\n        this.renderVolume(muted, model.get('volume'));\r\n    }\r\n\r\n    renderVolume(muted, vol) {\r\n        // mute, volume, and volumetooltip do not exist on mobile devices.\r\n        if (this.elements.mute) {\r\n            utils.toggleClass(this.elements.mute.element(), 'jw-off', muted);\r\n            utils.toggleClass(this.elements.mute.element(), 'jw-full', !muted);\r\n        }\r\n        if (this.elements.volume) {\r\n            this.elements.volume.render(muted ? 0 : vol);\r\n        }\r\n        if (this.elements.volumetooltip) {\r\n            this.elements.volumetooltip.volumeSlider.render(muted ? 0 : vol);\r\n            utils.toggleClass(this.elements.volumetooltip.element(), 'jw-off', muted);\r\n            utils.toggleClass(this.elements.volumetooltip.element(), 'jw-full', vol >= 75 && !muted);\r\n        }\r\n    }\r\n\r\n    onCastAvailable(model, val) {\r\n        this.elements.cast.toggle(val);\r\n    }\r\n\r\n    onCastActive(model, val) {\r\n        this.elements.fullscreen.toggle(!val);\r\n        if (this.elements.cast.button) {\r\n            utils.toggleClass(this.elements.cast.button, 'jw-off', !val);\r\n        }\r\n    }\r\n\r\n    onElapsed(model, val) {\r\n        let elapsedTime;\r\n        let countdownTime;\r\n        const duration = model.get('duration');\r\n        if (model.get('streamType') === 'DVR') {\r\n            elapsedTime = countdownTime = Math.ceil(val) >= dvrSeekLimit ? '' : '-' + utils.timeFormat(-val);\r\n        } else {\r\n            elapsedTime = utils.timeFormat(val);\r\n            countdownTime = utils.timeFormat(duration - val);\r\n        }\r\n        this.elements.elapsed.textContent = elapsedTime;\r\n        this.elements.countdown.textContent = countdownTime;\r\n    }\r\n\r\n    onDuration(model, val) {\r\n        this.elements.duration.textContent = utils.timeFormat(Math.abs(val));\r\n    }\r\n\r\n    onFullscreen(model, val) {\r\n        utils.toggleClass(this.elements.fullscreen.element(), 'jw-off', val);\r\n        this.elements.play.element().focus();\r\n    }\r\n\r\n    onAudioMode(model, val) {\r\n        const timeSlider = this.elements.time.element();\r\n        if (val) {\r\n            this.elements.buttonContainer.insertBefore(\r\n                timeSlider,\r\n                this.elements.elapsed\r\n            );\r\n        } else {\r\n            prependChild(this.el, timeSlider);\r\n        }\r\n    }\r\n\r\n    checkDvrLiveEdge() {\r\n        if (this._model.get('streamType') === 'DVR') {\r\n            const currentPosition = Math.ceil(this._model.get('position'));\r\n            // update live icon and displayed time when DVR stream enters or exits live edge\r\n            utils.toggleClass(this.elements.live.element(), 'jw-dvr-live', currentPosition >= dvrSeekLimit);\r\n            this.onElapsed(this._model, currentPosition);\r\n        }\r\n    }\r\n\r\n    element() {\r\n        return this.el;\r\n    }\r\n\r\n    setAltText(model, altText) {\r\n        this.elements.alt.textContent = altText;\r\n    }\r\n\r\n    addCues(model, cues) {\r\n        if (this.elements.time) {\r\n            _.each(cues, function (ele) {\r\n                this.elements.time.addCue(ele);\r\n            }, this);\r\n            this.elements.time.drawCues();\r\n        }\r\n    }\r\n\r\n    // Close menus if it has no event.  Otherwise close all but the event's target.\r\n    closeMenus(evt) {\r\n        _.each(this.menus, function (ele) {\r\n            if (!evt || evt.target !== ele.el) {\r\n                ele.closeTooltip(evt);\r\n            }\r\n        });\r\n    }\r\n\r\n    rewind() {\r\n        const currentPosition = this._model.get('position');\r\n        const duration = this._model.get('duration');\r\n        const rewindPosition = currentPosition - 10;\r\n        let startPosition = 0;\r\n\r\n        // duration is negative in DVR mode\r\n        if (this._model.get('streamType') === 'DVR') {\r\n            startPosition = duration;\r\n        }\r\n        // Seek 10s back. Seek value should be >= 0 in VOD mode and >= (negative) duration in DVR mode\r\n        this._api.seek(Math.max(rewindPosition, startPosition), reasonInteraction());\r\n    }\r\n\r\n    onStreamTypeChange(model) {\r\n        // Hide rewind button when in LIVE mode\r\n        const streamType = model.get('streamType');\r\n        this.elements.rewind.toggle(streamType !== 'LIVE');\r\n        this.elements.live.toggle(streamType === 'LIVE' || streamType === 'DVR');\r\n        this.elements.duration.style.display = streamType === 'DVR' ? 'none' : '';\r\n        const duration = model.get('duration');\r\n        this.onDuration(model, duration);\r\n    }\r\n\r\n    addLogo(logo) {\r\n        const buttonContainer = this.elements.buttonContainer;\r\n\r\n        const logoButton = new CustomButton(\r\n            logo.file,\r\n            'Logo',\r\n            () => {\r\n                if (logo.link) {\r\n                    window.open(logo.link, '_blank');\r\n                }\r\n            },\r\n            'logo',\r\n            'jw-logo-button'\r\n        );\r\n\r\n        if (!logo.link) {\r\n            logoButton.element().setAttribute('tabindex', '-1');\r\n        }\r\n        buttonContainer.insertBefore(\r\n            logoButton.element(),\r\n            buttonContainer.querySelector('.jw-spacer').nextSibling\r\n        );\r\n    }\r\n\r\n    goToLiveEdge() {\r\n        if (this._model.get('streamType') === 'DVR') {\r\n            // Seek to \"Live\" position within live buffer, but not before current position\r\n            const currentPosition = this._model.get('position');\r\n            this._api.seek(Math.max(dvrSeekLimit, currentPosition), reasonInteraction());\r\n        }\r\n    }\r\n\r\n    updateButtons(model, newButtons, oldButtons) {\r\n        // If buttons are undefined exit, buttons are only removed if newButtons is an array\r\n        if (!newButtons) {\r\n            return;\r\n        }\r\n\r\n        const buttonContainer = this.elements.buttonContainer;\r\n\r\n        let addedButtons;\r\n        let removedButtons;\r\n\r\n        // On model.change these obects are the same and all buttons need to be added\r\n        if (newButtons === oldButtons || !oldButtons) {\r\n            addedButtons = newButtons;\r\n\r\n        } else {\r\n            addedButtons = buttonsInFirstNotInSecond(newButtons, oldButtons);\r\n            removedButtons = buttonsInFirstNotInSecond(oldButtons, newButtons);\r\n\r\n            this.removeButtons(buttonContainer, removedButtons);\r\n        }\r\n\r\n        for (let i = addedButtons.length - 1; i >= 0; i--) {\r\n            let buttonProps = addedButtons[i];\r\n            const newButton = new CustomButton(\r\n                buttonProps.img,\r\n                buttonProps.tooltip,\r\n                buttonProps.callback,\r\n                buttonProps.id,\r\n                buttonProps.btnClass\r\n            );\r\n\r\n            if (buttonProps.tooltip) {\r\n                SimpleTooltip(newButton.element(), buttonProps.id, buttonProps.tooltip);\r\n            }\r\n\r\n            let firstButton;\r\n            if (newButton.id === 'related') {\r\n                firstButton = this.elements.settingsButton.element();\r\n            } else if (newButton.id === 'share') {\r\n                firstButton = buttonContainer.querySelector('[button=\"related\"]') ||\r\n                    this.elements.settingsButton.element();\r\n            } else {\r\n                firstButton = this.elements.spacer.nextSibling;\r\n                if (firstButton && firstButton.getAttribute('button') === 'logo') {\r\n                    firstButton = firstButton.nextSibling;\r\n                }\r\n            }\r\n            buttonContainer.insertBefore(newButton.element(), firstButton);\r\n        }\r\n    }\r\n\r\n    removeButtons(buttonContainer, buttonsToRemove) {\r\n        for (let i = buttonsToRemove.length; i--;) {\r\n            const buttonElement = buttonContainer.querySelector(`[button=\"${buttonsToRemove[i].id}\"]`);\r\n            if (buttonElement) {\r\n                buttonContainer.removeChild(buttonElement);\r\n            }\r\n        }\r\n    }\r\n\r\n    useInstreamTime(instreamModel) {\r\n        // While in instream mode, the time slider needs to move according to instream time\r\n        const timeSlider = this.elements.time;\r\n        if (!timeSlider) {\r\n            return;\r\n        }\r\n\r\n        instreamModel\r\n            .change('position', timeSlider.onPosition, timeSlider)\r\n            .change('duration', timeSlider.onDuration, timeSlider)\r\n            .change('duration', () => {\r\n                timeSlider.streamType = 'VOD';\r\n            }, timeSlider);\r\n    }\r\n\r\n    syncPlaybackTime(model) {\r\n        // When resuming playback mode, trigger a change so that the slider immediately resumes it's original position\r\n        const timeSlider = this.elements.time;\r\n        if (!timeSlider) {\r\n            return;\r\n        }\r\n\r\n        timeSlider.onPosition(model, model.get('position'));\r\n        timeSlider.onDuration(model, model.get('duration'));\r\n        timeSlider.onStreamType(model, model.get('streamType'));\r\n    }\r\n\r\n    toggleCaptionsButtonState(active) {\r\n        const captionsButton = this.elements.captionsButton;\r\n        if (!captionsButton) {\r\n            return;\r\n        }\r\n\r\n        utils.toggleClass(captionsButton.element(), 'jw-off', !active);\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/controlbar.js","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-buffer\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M120,186.667a66.667,66.667,0,0,1,0-133.333V40a80,80,0,1,0,80,80H186.667A66.846,66.846,0,0,1,120,186.667Z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/buffer.svg\n// module id = 91\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-replay\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M120,41.9v-20c0-5-4-8-8-4l-44,28a5.865,5.865,0,0,0-3.3,7.6A5.943,5.943,0,0,0,68,56.8l43,29c5,4,9,1,9-4v-20a60,60,0,1,1-60,60H40a80,80,0,1,0,80-79.9Z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/replay.svg\n// module id = 92\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-error\\\" viewBox=\\\"0 0 36 36\\\" style=\\\"width:100%;height:100%;\\\"><path fill=\\\"#FFF\\\" d=\\\"M34.6 20.2L10 33.2 27.6 16l7 3.7a.4.4 0 0 1 .2.5.4.4 0 0 1-.2.2zM33.3 0L21 12.2 9 6c-.2-.3-.6 0-.6.5V25L0 33.6 2.5 36 36 2.7z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/playback-error.svg\n// module id = 93\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-play\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M62.8,199.5c-1,0.8-2.4,0.6-3.3-0.4c-0.4-0.5-0.6-1.1-0.5-1.8V42.6c-0.2-1.3,0.7-2.4,1.9-2.6c0.7-0.1,1.3,0.1,1.9,0.4l154.7,77.7c2.1,1.1,2.1,2.8,0,3.8L62.8,199.5z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/play.svg\n// module id = 94\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-pause\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M100,194.9c0.2,2.6-1.8,4.8-4.4,5c-0.2,0-0.4,0-0.6,0H65c-2.6,0.2-4.8-1.8-5-4.4c0-0.2,0-0.4,0-0.6V45c-0.2-2.6,1.8-4.8,4.4-5c0.2,0,0.4,0,0.6,0h30c2.6-0.2,4.8,1.8,5,4.4c0,0.2,0,0.4,0,0.6V194.9z M180,45.1c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0h-30c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6V195c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h30c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6V45.1z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/pause.svg\n// module id = 95\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-rewind\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M113.2,131.078a21.589,21.589,0,0,0-17.7-10.6,21.589,21.589,0,0,0-17.7,10.6,44.769,44.769,0,0,0,0,46.3,21.589,21.589,0,0,0,17.7,10.6,21.589,21.589,0,0,0,17.7-10.6,44.769,44.769,0,0,0,0-46.3Zm-17.7,47.2c-7.8,0-14.4-11-14.4-24.1s6.6-24.1,14.4-24.1,14.4,11,14.4,24.1S103.4,178.278,95.5,178.278Zm-43.4,9.7v-51l-4.8,4.8-6.8-6.8,13-13a4.8,4.8,0,0,1,8.2,3.4v62.7l-9.6-.1Zm162-130.2v125.3a4.867,4.867,0,0,1-4.8,4.8H146.6v-19.3h48.2v-96.4H79.1v19.3c0,5.3-3.6,7.2-8,4.3l-41.8-27.9a6.013,6.013,0,0,1-2.7-8,5.887,5.887,0,0,1,2.7-2.7l41.8-27.9c4.4-2.9,8-1,8,4.3v19.3H209.2A4.974,4.974,0,0,1,214.1,57.778Z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/rewind-10.svg\n// module id = 96\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-next\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M165,60v53.3L59.2,42.8C56.9,41.3,55,42.3,55,45v150c0,2.7,1.9,3.8,4.2,2.2L165,126.6v53.3h20v-120L165,60L165,60z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/next.svg\n// module id = 97\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-volume-0\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M116.4,42.8v154.5c0,2.8-1.7,3.6-3.8,1.7l-54.1-48.1H28.9c-2.8,0-5.2-2.3-5.2-5.2V94.2c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48.1C114.6,39.1,116.4,39.9,116.4,42.8z M212.3,96.4l-14.6-14.6l-23.6,23.6l-23.6-23.6l-14.6,14.6l23.6,23.6l-23.6,23.6l14.6,14.6l23.6-23.6l23.6,23.6l14.6-14.6L188.7,120L212.3,96.4z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/volume-0.svg\n// module id = 98\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-volume-50\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M116.4,42.8v154.5c0,2.8-1.7,3.6-3.8,1.7l-54.1-48.1H28.9c-2.8,0-5.2-2.3-5.2-5.2V94.2c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48.1C114.7,39.1,116.4,39.9,116.4,42.8z M178.2,120c0-22.7-18.5-41.2-41.2-41.2v20.6c11.4,0,20.6,9.2,20.6,20.6c0,11.4-9.2,20.6-20.6,20.6v20.6C159.8,161.2,178.2,142.7,178.2,120z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/volume-50.svg\n// module id = 99\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-volume-100\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M116.5,42.8v154.4c0,2.8-1.7,3.6-3.8,1.7l-54.1-48H29c-2.8,0-5.2-2.3-5.2-5.2V94.3c0-2.8,2.3-5.2,5.2-5.2h29.6l54.1-48C114.8,39.2,116.5,39.9,116.5,42.8z\\\"></path><path d=\\\"M136.2,160v-20c11.1,0,20-8.9,20-20s-8.9-20-20-20V80c22.1,0,40,17.9,40,40S158.3,160,136.2,160z\\\"></path><path d=\\\"M216.2,120c0-44.2-35.8-80-80-80v20c33.1,0,60,26.9,60,60s-26.9,60-60,60v20C180.4,199.9,216.1,164.1,216.2,120z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/volume-100.svg\n// module id = 100\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-cc-on\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M215,40H25c-2.7,0-5,2.2-5,5v150c0,2.7,2.2,5,5,5h190c2.7,0,5-2.2,5-5V45C220,42.2,217.8,40,215,40z M108.1,137.7c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9c-2.4-3.7-6.5-5.9-10.9-5.9c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6C90.4,141.7,102,143.5,108.1,137.7z M152.9,137.7c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9c-2.4-3.7-6.5-5.9-10.9-5.9c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6C135.2,141.7,146.8,143.5,152.9,137.7z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/captions-on.svg\n// module id = 101\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-cc-off\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M99.4,97.8c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6c0,9.6,11.6,11.4,17.7,5.5c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9C107.9,100,103.8,97.8,99.4,97.8z M144.1,97.8c-2.4-0.2-4.8,0.7-6.6,2.3c-1.7,1.7-2.5,4.1-2.4,6.5v25.6c0,9.6,11.6,11.4,17.7,5.5c0.7-0.7,1.5-1.5,2.4-2.3l6.6,7.8c-2.2,2.4-5,4.4-8,5.8c-8,3.5-17.3,2.4-24.3-2.9c-3.9-3.6-5.9-8.7-5.5-14v-25.6c0-2.7,0.5-5.3,1.5-7.8c0.9-2.2,2.4-4.3,4.2-5.9c5.7-4.5,13.2-6.2,20.3-4.6c3.3,0.5,6.3,2,8.7,4.3c1.3,1.3,2.5,2.6,3.5,4.2l-7.1,6.9C152.6,100,148.5,97.8,144.1,97.8L144.1,97.8z M200,60v120H40V60H200 M215,40H25c-2.7,0-5,2.2-5,5v150c0,2.7,2.2,5,5,5h190c2.7,0,5-2.2,5-5V45C220,42.2,217.8,40,215,40z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/captions-off.svg\n// module id = 102\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-airplay-on\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M229.9,40v130c0.2,2.6-1.8,4.8-4.4,5c-0.2,0-0.4,0-0.6,0h-44l-17-20h46V55H30v100h47l-17,20h-45c-2.6,0.2-4.8-1.8-5-4.4c0-0.2,0-0.4,0-0.6V40c-0.2-2.6,1.8-4.8,4.4-5c0.2,0,0.4,0,0.6,0h209.8c2.6-0.2,4.8,1.8,5,4.4C229.9,39.7,229.9,39.9,229.9,40z M104.9,122l15-18l15,18l11,13h44V75H50v60h44L104.9,122z M179.9,205l-60-70l-60,70H179.9z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/airplay-on.svg\n// module id = 103\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-airplay-off\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M210,55v100h-50l20,20h45c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6V40c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0H15c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6v130c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h45l20-20H30V55H210 M60,205l60-70l60,70H60L60,205z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/airplay-off.svg\n// module id = 104\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-dvr\\\" viewBox=\\\"60 0 359.9 240\\\"><path d=\\\"M399.9,60v120H80V60H399.9 M414.9,40H65c-2.7,0-5,2.2-5,5v149.9c0,2.7,2.2,5,5,5h349.9c2.7,0,5-2.2,5-5V45C419.9,42.2,417.7,40,414.9,40z M216.6,88.8v51.3h22.7v9.9h-33.5V88.8L216.6,88.8L216.6,88.8z M249.2,88.8h11.2V150h-11.2V88.8z M282.1,88.8l12,45.2l12.2-45.2h11.4L300.6,150h-13L271,88.8H282.1z M335.7,123.7v16.4h20.9v9.9H325V88.8h30.1v9.9h-19.4v15.6H352v9.4L335.7,123.7L335.7,123.7z M140,90c-16.6,0-30,13.4-30,30s13.4,30,30,30s30-13.4,30-30S156.6,90,140,90z M160,119.9c0,3.5-1,7.1-2.9,10.1l-27.2-27.2c9.4-5.6,21.6-2.6,27.2,6.8C159.1,112.7,160,116.3,160,119.9z M120,119.9c0-3.5,1-7.1,2.9-10.1l27.2,27.2c-9.4,5.6-21.6,2.6-27.2-6.8C121,127.1,120,123.6,120,119.9z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/dvr.svg\n// module id = 105\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-live\\\" viewBox=\\\"0 0 360 240\\\"><path d=\\\"M354.777,40H5.048a5.013,5.013,0,0,0-5,5V194.9a5.013,5.013,0,0,0,5,5h349.73a5.013,5.013,0,0,0,5-5V45A4.95,4.95,0,0,0,354.777,40ZM80.011,139.9a20,20,0,1,1,19.99-20A19.99,19.99,0,0,1,80.011,139.9Zm99.352,10H145.879V88.7h10.795V140h22.689Zm20.99,0H189.158V88.7h11.195Zm40.081,0H227.439L210.847,88.7h11.195l11.994,45.2L246.23,88.7h11.394Zm56.073,0H264.821V88.7h30.085v9.9H275.516v15.6h16.292v9.4H275.516V140h20.89ZM355,40H5.051a5.016,5.016,0,0,0-5,5V195a5.016,5.016,0,0,0,5,5H355a5.016,5.016,0,0,0,5-5V45A4.953,4.953,0,0,0,355,40ZM80.061,139.962a20.013,20.013,0,1,1,20-20.013A20,20,0,0,1,80.061,139.962Zm99.414,10.006h-33.5V88.73h10.8v51.332h22.7Zm21,0h-11.2V88.73h11.2Zm40.106,0h-13l-16.6-61.238h11.2l12,45.228,12.2-45.228h11.4Zm56.108,0h-31.7V88.73h30.1v9.906h-19.4v15.61h16.3v9.406h-16.3v16.41h20.9ZM354.826,40H5a5.016,5.016,0,0,0-5,5V195a5.016,5.016,0,0,0,5,5H354.826a5.016,5.016,0,0,0,5-5V45A4.952,4.952,0,0,0,354.826,40ZM79.983,139.962a20.013,20.013,0,1,1,20-20.013A20,20,0,0,1,79.983,139.962Zm99.379,10.006H145.87V88.73h10.8v51.332h22.7Zm21,0h-11.2V88.73h11.2Zm40.092,0h-13l-16.6-61.238h11.2l12,45.228,12.2-45.228h11.4Zm56.088,0H264.845V88.73h30.094v9.906h-19.4v15.61h16.3v9.406h-16.3v16.41h20.9Z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/live.svg\n// module id = 106\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-playback-rate\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M158.83,48.83A71.17,71.17,0,1,0,230,120,71.163,71.163,0,0,0,158.83,48.83Zm45.293,77.632H152.34V74.708h12.952v38.83h38.83ZM35.878,74.708h38.83V87.66H35.878ZM10,113.538H61.755V126.49H10Zm25.878,38.83h38.83V165.32H35.878Z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/playback-rate.svg\n// module id = 107\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-settings\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M204,145l-25-14c0.8-3.6,1.2-7.3,1-11c0.2-3.7-0.2-7.4-1-11l25-14c2.2-1.6,3.1-4.5,2-7l-16-26c-1.2-2.1-3.8-2.9-6-2l-25,14c-6-4.2-12.3-7.9-19-11V35c0.2-2.6-1.8-4.8-4.4-5c-0.2,0-0.4,0-0.6,0h-30c-2.6-0.2-4.8,1.8-5,4.4c0,0.2,0,0.4,0,0.6v28c-6.7,3.1-13,6.7-19,11L56,60c-2.2-0.9-4.8-0.1-6,2L35,88c-1.6,2.2-1.3,5.3,0.9,6.9c0,0,0.1,0,0.1,0.1l25,14c-0.8,3.6-1.2,7.3-1,11c-0.2,3.7,0.2,7.4,1,11l-25,14c-2.2,1.6-3.1,4.5-2,7l16,26c1.2,2.1,3.8,2.9,6,2l25-14c5.7,4.6,12.2,8.3,19,11v28c-0.2,2.6,1.8,4.8,4.4,5c0.2,0,0.4,0,0.6,0h30c2.6,0.2,4.8-1.8,5-4.4c0-0.2,0-0.4,0-0.6v-28c7-2.3,13.5-6,19-11l25,14c2.5,1.3,5.6,0.4,7-2l15-26C206.7,149.4,206,146.7,204,145z M120,149.9c-16.5,0-30-13.4-30-30s13.4-30,30-30s30,13.4,30,30c0.3,16.3-12.6,29.7-28.9,30C120.7,149.9,120.4,149.9,120,149.9z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/settings.svg\n// module id = 108\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-audio-tracks\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M35,34h160v20H35V34z M35,94h160V74H35V94z M35,134h60v-20H35V134z M160,114c-23.4-1.3-43.6,16.5-45,40v50h20c5.2,0.3,9.7-3.6,10-8.9c0-0.4,0-0.7,0-1.1v-20c0.3-5.2-3.6-9.7-8.9-10c-0.4,0-0.7,0-1.1,0h-10v-10c1.5-17.9,17.1-31.3,35-30c17.9-1.3,33.6,12.1,35,30v10H185c-5.2-0.3-9.7,3.6-10,8.9c0,0.4,0,0.7,0,1.1v20c-0.3,5.2,3.6,9.7,8.9,10c0.4,0,0.7,0,1.1,0h20v-50C203.5,130.6,183.4,112.7,160,114z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/audio-tracks.svg\n// module id = 109\n// module chunks = 0 1 2 3 4","module.exports = \"<svg class=\\\"jw-svg-icon jw-svg-icon-quality-100\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M55,200H35c-3,0-5-2-5-4c0,0,0,0,0-1v-30c0-3,2-5,4-5c0,0,0,0,1,0h20c3,0,5,2,5,4c0,0,0,0,0,1v30C60,198,58,200,55,200L55,200z M110,195v-70c0-3-2-5-4-5c0,0,0,0-1,0H85c-3,0-5,2-5,4c0,0,0,0,0,1v70c0,3,2,5,4,5c0,0,0,0,1,0h20C108,200,110,198,110,195L110,195z M160,195V85c0-3-2-5-4-5c0,0,0,0-1,0h-20c-3,0-5,2-5,4c0,0,0,0,0,1v110c0,3,2,5,4,5c0,0,0,0,1,0h20C158,200,160,198,160,195L160,195z M210,195V45c0-3-2-5-4-5c0,0,0,0-1,0h-20c-3,0-5,2-5,4c0,0,0,0,0,1v150c0,3,2,5,4,5c0,0,0,0,1,0h20C208,200,210,198,210,195L210,195z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/quality-100.svg\n// module id = 110\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-fullscreen-off\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M109.2,134.9l-8.4,50.1c-0.4,2.7-2.4,3.3-4.4,1.4L82,172l-27.9,27.9l-14.2-14.2l27.9-27.9l-14.4-14.4c-1.9-1.9-1.3-3.9,1.4-4.4l50.1-8.4c1.8-0.5,3.6,0.6,4.1,2.4C109.4,133.7,109.4,134.3,109.2,134.9L109.2,134.9z M172.1,82.1L200,54.2L185.8,40l-27.9,27.9l-14.4-14.4c-1.9-1.9-3.9-1.3-4.4,1.4l-8.4,50.1c-0.5,1.8,0.6,3.6,2.4,4.1c0.5,0.2,1.2,0.2,1.7,0l50.1-8.4c2.7-0.4,3.3-2.4,1.4-4.4L172.1,82.1z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/fullscreen-not.svg\n// module id = 111\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-fullscreen-on\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M96.3,186.1c1.9,1.9,1.3,4-1.4,4.4l-50.6,8.4c-1.8,0.5-3.7-0.6-4.2-2.4c-0.2-0.6-0.2-1.2,0-1.7l8.4-50.6c0.4-2.7,2.4-3.4,4.4-1.4l14.5,14.5l28.2-28.2l14.3,14.3l-28.2,28.2L96.3,186.1z M195.8,39.1l-50.6,8.4c-2.7,0.4-3.4,2.4-1.4,4.4l14.5,14.5l-28.2,28.2l14.3,14.3l28.2-28.2l14.5,14.5c1.9,1.9,4,1.3,4.4-1.4l8.4-50.6c0.5-1.8-0.6-3.6-2.4-4.2C197,39,196.4,39,195.8,39.1L195.8,39.1z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/fullscreen.svg\n// module id = 112\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-close\\\" viewBox=\\\"0 0 240 240\\\"><path d=\\\"M134.8,120l48.6-48.6c2-1.9,2.1-5.2,0.2-7.2c0,0-0.1-0.1-0.2-0.2l-7.4-7.4c-1.9-2-5.2-2.1-7.2-0.2c0,0-0.1,0.1-0.2,0.2L120,105.2L71.4,56.6c-1.9-2-5.2-2.1-7.2-0.2c0,0-0.1,0.1-0.2,0.2L56.6,64c-2,1.9-2.1,5.2-0.2,7.2c0,0,0.1,0.1,0.2,0.2l48.6,48.7l-48.6,48.6c-2,1.9-2.1,5.2-0.2,7.2c0,0,0.1,0.1,0.2,0.2l7.4,7.4c1.9,2,5.2,2.1,7.2,0.2c0,0,0.1-0.1,0.2-0.2l48.7-48.6l48.6,48.6c1.9,2,5.2,2.1,7.2,0.2c0,0,0.1-0.1,0.2-0.2l7.4-7.4c2-1.9,2.1-5.2,0.2-7.2c0,0-0.1-0.1-0.2-0.2L134.8,120z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/close.svg\n// module id = 113\n// module chunks = 0 1 2 3 4","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"jw-svg-icon jw-svg-icon-jwplayer-logo\\\" viewBox=\\\"0 0 992 1024\\\"><path d=\\\"M144 518.4c0 6.4-6.4 6.4-6.4 0l-3.2-12.8c0 0-6.4-19.2-12.8-38.4 0-6.4-6.4-12.8-9.6-22.4-6.4-6.4-16-9.6-28.8-6.4-9.6 3.2-16 12.8-16 22.4s0 16 0 25.6c3.2 25.6 22.4 121.6 32 140.8 9.6 22.4 35.2 32 54.4 22.4 22.4-9.6 28.8-35.2 38.4-54.4 9.6-25.6 60.8-166.4 60.8-166.4 6.4-12.8 9.6-12.8 9.6 0 0 0 0 140.8-3.2 204.8 0 25.6 0 67.2 9.6 89.6 6.4 16 12.8 28.8 25.6 38.4s28.8 12.8 44.8 12.8c6.4 0 16-3.2 22.4-6.4 9.6-6.4 16-12.8 25.6-22.4 16-19.2 28.8-44.8 38.4-64 25.6-51.2 89.6-201.6 89.6-201.6 6.4-12.8 9.6-12.8 9.6 0 0 0-9.6 256-9.6 355.2 0 25.6 6.4 48 12.8 70.4 9.6 22.4 22.4 38.4 44.8 48s48 9.6 70.4-3.2c16-9.6 28.8-25.6 38.4-38.4 12.8-22.4 25.6-48 32-70.4 19.2-51.2 35.2-102.4 51.2-153.6s153.6-540.8 163.2-582.4c0-6.4 0-9.6 0-12.8 0-9.6-6.4-19.2-16-22.4-16-6.4-32 0-38.4 12.8-6.4 16-195.2 470.4-195.2 470.4-6.4 12.8-9.6 12.8-9.6 0 0 0 0-156.8 0-288 0-70.4-35.2-108.8-83.2-118.4-22.4-3.2-44.8 0-67.2 12.8s-35.2 32-48 54.4c-16 28.8-105.6 297.6-105.6 297.6-6.4 12.8-9.6 12.8-9.6 0 0 0-3.2-115.2-6.4-144-3.2-41.6-12.8-108.8-67.2-115.2-51.2-3.2-73.6 57.6-86.4 99.2-9.6 25.6-51.2 163.2-51.2 163.2v3.2z\\\"></path></svg>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/SVG/jw-logo.svg\n// module id = 114\n// module chunks = 0 1 2 3 4","import { style } from 'utils/css';\r\nimport UI from 'utils/ui';\r\nimport svgParse from 'utils/svgParser';\r\n\r\nexport default class CustomButton {\r\n\r\n    constructor(img, ariaText, callback, id, btnClass) {\r\n        const buttonElement = document.createElement('div');\r\n        buttonElement.className = `jw-icon jw-icon-inline jw-button-color jw-reset ${btnClass}`;\r\n        buttonElement.setAttribute('button', id);\r\n        buttonElement.setAttribute('role', 'button');\r\n        buttonElement.setAttribute('tabindex', '0');\r\n        if (ariaText) {\r\n            buttonElement.setAttribute('aria-label', ariaText);\r\n        }\r\n\r\n        let iconElement;\r\n        if (img && img.substring(0, 4) === '<svg') {\r\n            iconElement = svgParse(img);\r\n        } else {\r\n            iconElement = document.createElement('div');\r\n            iconElement.className = 'jw-icon jw-button-image jw-button-color jw-reset';\r\n            if (img) {\r\n                style(iconElement, {\r\n                    backgroundImage: `url(${img})`\r\n                });\r\n            }\r\n        }\r\n\r\n        buttonElement.appendChild(iconElement);\r\n\r\n        new UI(buttonElement).on('click tap enter', callback, this);\r\n\r\n        // Prevent button from being focused on mousedown so that the tooltips don't remain visible until\r\n        // the user interacts with another element on the page\r\n        buttonElement.addEventListener('mousedown', (e) => {\r\n            e.preventDefault();\r\n        });\r\n\r\n        this.id = id;\r\n        this.buttonElement = buttonElement;\r\n    }\r\n\r\n    element() {\r\n        return this.buttonElement;\r\n    }\r\n\r\n    toggle(show) {\r\n        if (show) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    show() {\r\n        this.buttonElement.style.display = '';\r\n    }\r\n    hide() {\r\n        this.buttonElement.style.display = 'none';\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/custom-button.js","import { dvrSeekLimit } from 'view/constants';\r\nimport _ from 'utils/underscore';\r\nimport utils from 'utils/helpers';\r\nimport UI from 'utils/ui';\r\nimport Slider from 'view/controls/components/slider';\r\nimport Tooltip from 'view/controls/components/tooltip';\r\nimport ChaptersMixin from 'view/controls/components/chapters.mixin';\r\nimport ThumbnailsMixin from 'view/controls/components/thumbnails.mixin';\r\n\r\nclass TimeTip extends Tooltip {\r\n\r\n    setup() {\r\n        this.text = document.createElement('span');\r\n        this.text.className = 'jw-text jw-reset';\r\n        this.img = document.createElement('div');\r\n        this.img.className = 'jw-time-thumb jw-reset';\r\n        this.containerWidth = 0;\r\n        this.textLength = 0;\r\n        this.dragJustReleased = false;\r\n\r\n        var wrapper = document.createElement('div');\r\n        wrapper.className = 'jw-time-tip jw-reset';\r\n        wrapper.appendChild(this.img);\r\n        wrapper.appendChild(this.text);\r\n\r\n        this.addContent(wrapper);\r\n    }\r\n\r\n    image(style) {\r\n        utils.style(this.img, style);\r\n    }\r\n\r\n    update(txt) {\r\n        this.text.textContent = txt;\r\n    }\r\n\r\n    getWidth () {\r\n        if (!this.containerWidth) {\r\n            this.setWidth();\r\n        }\r\n\r\n        return this.containerWidth;\r\n    }\r\n\r\n    setWidth (width) {\r\n        const tolerance = 16; // add a little padding so the tooltip isn't flush against the edge\r\n\r\n        if (width) {\r\n            this.containerWidth = width + tolerance;\r\n            return;\r\n        }\r\n\r\n        if (!this.container) {\r\n            return;\r\n        }\r\n\r\n        this.containerWidth = utils.bounds(this.container).width + tolerance;\r\n    }\r\n\r\n    resetWidth () {\r\n        this.containerWidth = 0;\r\n    }\r\n}\r\n\r\nfunction reasonInteraction() {\r\n    return { reason: 'interaction' };\r\n}\r\n\r\nclass TimeSlider extends Slider {\r\n    constructor(_model, _api) {\r\n        super('jw-slider-time', 'horizontal');\r\n\r\n        this._model = _model;\r\n        this._api = _api;\r\n\r\n        this.timeTip = new TimeTip('jw-tooltip-time', null, true);\r\n        this.timeTip.setup();\r\n\r\n        this.cues = [];\r\n\r\n        // Store the attempted seek, until the previous one completes\r\n        this.seekThrottled = _.throttle(this.performSeek, 400);\r\n        this.mobileHoverDistance = 5;\r\n\r\n        this.setup();\r\n    }\r\n\r\n    // These overwrite Slider methods\r\n    setup() {\r\n        super.setup.apply(this, arguments);\r\n\r\n        this._model\r\n            .on('duration', this.onDuration, this)\r\n            .change('playlistItem', this.onPlaylistItem, this)\r\n            .change('position', this.onPosition, this)\r\n            .change('buffer', this.onBuffer, this)\r\n            .change('streamType', this.onStreamType, this);\r\n\r\n        this.elementRail.appendChild(this.timeTip.element());\r\n\r\n        // Show the tooltip on while dragging (touch) moving(mouse), or moving over(mouse)\r\n        this.elementUI = new UI(this.el, { useHover: true, useMove: true })\r\n            .on('drag move over', this.showTimeTooltip.bind(this), this)\r\n            .on('dragEnd out', this.hideTimeTooltip.bind(this), this);\r\n    }\r\n\r\n    limit(percent) {\r\n        if (this.activeCue && _.isNumber(this.activeCue.pct)) {\r\n            return this.activeCue.pct;\r\n        }\r\n        var duration = this._model.get('duration');\r\n        if (this.streamType === 'DVR') {\r\n            var position = (1 - (percent / 100)) * duration;\r\n            var currentPosition = this._model.get('position');\r\n            var updatedPosition = Math.min(position, Math.max(dvrSeekLimit, currentPosition));\r\n            var updatedPercent = updatedPosition * 100 / duration;\r\n            return 100 - updatedPercent;\r\n        }\r\n        return percent;\r\n    }\r\n\r\n    update(percent) {\r\n        this.seekTo = percent;\r\n        this.seekThrottled();\r\n        super.update.apply(this, arguments);\r\n    }\r\n\r\n    dragStart() {\r\n        this._model.set('scrubbing', true);\r\n        super.dragStart.apply(this, arguments);\r\n    }\r\n\r\n    dragEnd() {\r\n        super.dragEnd.apply(this, arguments);\r\n        this._model.set('scrubbing', false);\r\n        this.dragJustReleased = true;\r\n    }\r\n\r\n    // Event Listeners\r\n    onSeeked () {\r\n        // When we are done scrubbing there will be a final seeked event\r\n        if (this._model.get('scrubbing')) {\r\n            this.performSeek();\r\n        }\r\n    }\r\n\r\n    onBuffer(model, pct) {\r\n        this.updateBuffer(pct);\r\n    }\r\n\r\n    onPosition(model, position) {\r\n        if (this.dragJustReleased) {\r\n            // prevents firing an outdated position and causing the timeslider to jump back and forth\r\n            this.dragJustReleased = false;\r\n            return;\r\n        }\r\n        this.updateTime(position, model.get('duration'));\r\n    }\r\n\r\n    onDuration(model, duration) {\r\n        this.updateTime(model.get('position'), duration);\r\n    }\r\n\r\n    onStreamType(model, streamType) {\r\n        this.streamType = streamType;\r\n    }\r\n\r\n    updateTime(position, duration) {\r\n        var pct = 0;\r\n        if (duration) {\r\n            if (this.streamType === 'DVR') {\r\n                pct = (duration - position) / duration * 100;\r\n            } else if (this.streamType === 'VOD' || !this.streamType) {\r\n                // Default to VOD behavior if streamType isn't set\r\n                pct = position / duration * 100;\r\n            }\r\n        }\r\n        this.render(pct);\r\n    }\r\n\r\n    onPlaylistItem(model, playlistItem) {\r\n        if (!playlistItem) {\r\n            return;\r\n        }\r\n        this.reset();\r\n\r\n        model.mediaModel.on('seeked', this.onSeeked, this);\r\n\r\n        var tracks = playlistItem.tracks;\r\n        _.each(tracks, function (track) {\r\n            if (track && track.kind && track.kind.toLowerCase() === 'thumbnails') {\r\n                this.loadThumbnails(track.file);\r\n            } else if (track && track.kind && track.kind.toLowerCase() === 'chapters') {\r\n                this.loadChapters(track.file);\r\n            }\r\n        }, this);\r\n    }\r\n\r\n    performSeek() {\r\n        var percent = this.seekTo;\r\n        var duration = this._model.get('duration');\r\n        var position;\r\n        if (duration === 0) {\r\n            this._api.play(reasonInteraction());\r\n        } else if (this.streamType === 'DVR') {\r\n            position = (100 - percent) / 100 * duration;\r\n            this._api.seek(position, reasonInteraction());\r\n        } else {\r\n            position = percent / 100 * duration;\r\n            this._api.seek(Math.min(position, duration - 0.25), reasonInteraction());\r\n        }\r\n    }\r\n\r\n    showTimeTooltip(evt) {\r\n        var duration = this._model.get('duration');\r\n        if (duration === 0) {\r\n            return;\r\n        }\r\n\r\n        var playerWidth = this._model.get('containerWidth');\r\n        var railBounds = utils.bounds(this.elementRail);\r\n        var position = (evt.pageX ? (evt.pageX - railBounds.left) : evt.x);\r\n        position = utils.between(position, 0, railBounds.width);\r\n        var pct = position / railBounds.width;\r\n        var time = duration * pct;\r\n\r\n        // For DVR we need to swap it around\r\n        if (duration < 0) {\r\n            time = duration - time;\r\n        }\r\n\r\n        var timetipText;\r\n\r\n        // With touch events, we never will get the hover events on the cues that cause cues to be active.\r\n        // Therefore use the info we about the scroll position to detect if there is a nearby cue to be active.\r\n        if (UI.getPointerType(evt.sourceEvent) === 'touch') {\r\n            this.activeCue = _.reduce(this.cues, function(closeCue, cue) {\r\n                if (Math.abs(position - (parseInt(cue.pct) / 100 * railBounds.width)) < this.mobileHoverDistance) {\r\n                    return cue;\r\n                }\r\n                return closeCue;\r\n            }.bind(this), undefined);\r\n        }\r\n\r\n        if (this.activeCue) {\r\n            timetipText = this.activeCue.text;\r\n        } else {\r\n            var allowNegativeTime = true;\r\n            timetipText = utils.timeFormat(time, allowNegativeTime);\r\n\r\n            // If DVR and within live buffer\r\n            if (duration < 0 && time > dvrSeekLimit) {\r\n                timetipText = 'Live';\r\n            }\r\n        }\r\n        var timeTip = this.timeTip;\r\n\r\n        timeTip.update(timetipText);\r\n        if (this.textLength !== timetipText.length) {\r\n            // An activeCue may cause the width of the timeTip container to change\r\n            this.textLength = timetipText.length;\r\n            timeTip.resetWidth();\r\n        }\r\n        this.showThumbnail(time);\r\n\r\n        utils.addClass(timeTip.el, 'jw-open');\r\n\r\n        var timeTipWidth = timeTip.getWidth();\r\n        var widthPct = railBounds.width / 100;\r\n        var tolerance = playerWidth - railBounds.width;\r\n        var timeTipPct = 0;\r\n        if (timeTipWidth > tolerance) {\r\n            // timeTip may go outside the bounds of the player. Determine the % of tolerance needed\r\n            timeTipPct = (timeTipWidth - tolerance) / (2 * 100 * widthPct);\r\n        }\r\n        var safePct = Math.min(1 - timeTipPct, Math.max(timeTipPct, pct)).toFixed(3) * 100;\r\n        utils.style(timeTip.el, { left: safePct + '%' });\r\n    }\r\n\r\n    hideTimeTooltip() {\r\n        utils.removeClass(this.timeTip.el, 'jw-open');\r\n    }\r\n\r\n    reset() {\r\n        this.resetChapters();\r\n        this.resetThumbnails();\r\n        this.timeTip.resetWidth();\r\n        this.textLength = 0;\r\n    }\r\n}\r\n\r\nObject.assign(TimeSlider.prototype, ChaptersMixin, ThumbnailsMixin);\r\n\r\nexport default TimeSlider;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/timeslider.js","export default (className = '', orientation = '') => {\r\n    return (\r\n        `<div class=\"${className} ${orientation} jw-reset\" aria-hidden=\"true\">` +\r\n            `<div class=\"jw-slider-container jw-reset\">` +\r\n                `<div class=\"jw-rail jw-reset\"></div>` +\r\n                `<div class=\"jw-buffer jw-reset\"></div>` +\r\n                `<div class=\"jw-progress jw-reset\"></div>` +\r\n                `<div class=\"jw-knob jw-reset\"></div>` +\r\n            `</div>` +\r\n        `</div>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/slider.js","import _ from 'utils/underscore';\r\nimport utils from 'utils/helpers';\r\nimport srt from 'parsers/captions/srt';\r\n\r\nclass Cue {\r\n    constructor (time, text) {\r\n        this.time = time;\r\n        this.text = text;\r\n        this.el = document.createElement('div');\r\n        this.el.className = 'jw-cue jw-reset';\r\n    }\r\n\r\n    align(duration) {\r\n        // If a percentage, use it, else calculate the percentage\r\n        if (this.time.toString().slice(-1) === '%') {\r\n            this.pct = this.time;\r\n        } else {\r\n            const percentage = (this.time / duration) * 100;\r\n            this.pct = percentage + '%';\r\n        }\r\n\r\n        this.el.style.left = this.pct;\r\n    }\r\n}\r\n\r\nconst ChaptersMixin = {\r\n\r\n    loadChapters: function (file) {\r\n        utils.ajax(file, this.chaptersLoaded.bind(this), this.chaptersFailed, {\r\n            plainText: true\r\n        });\r\n    },\r\n\r\n    chaptersLoaded: function (evt) {\r\n        const data = srt(evt.responseText);\r\n        if (_.isArray(data)) {\r\n            _.each(data, this.addCue, this);\r\n            this.drawCues();\r\n        }\r\n    },\r\n\r\n    chaptersFailed: function () {},\r\n\r\n    addCue: function (obj) {\r\n        this.cues.push(new Cue(obj.begin, obj.text));\r\n    },\r\n\r\n    drawCues: function () {\r\n        // We won't want to draw them until we have a duration\r\n        const duration = this._model.get('duration');\r\n        if (!duration || duration <= 0) {\r\n            this._model.once('change:duration', this.drawCues, this);\r\n            return;\r\n        }\r\n\r\n        _.each(this.cues, (cue) => {\r\n            cue.align(duration);\r\n            cue.el.addEventListener('mouseover', () => {\r\n                this.activeCue = cue;\r\n            });\r\n            cue.el.addEventListener('mouseout', () => {\r\n                this.activeCue = null;\r\n            });\r\n            this.elementRail.appendChild(cue.el);\r\n        });\r\n    },\r\n\r\n    resetChapters: function() {\r\n        _.each(this.cues, (cue) => {\r\n            if (cue.el.parentNode) {\r\n                cue.el.parentNode.removeChild(cue.el);\r\n            }\r\n        });\r\n        this.cues = [];\r\n    }\r\n};\r\n\r\nexport default ChaptersMixin;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/chapters.mixin.js","import _ from 'utils/underscore';\r\nimport utils from 'utils/helpers';\r\nimport srt from 'parsers/captions/srt';\r\n\r\nfunction Thumbnail(obj) {\r\n    this.begin = obj.begin;\r\n    this.end = obj.end;\r\n    this.img = obj.text;\r\n}\r\n\r\nconst ThumbnailsMixin = {\r\n    loadThumbnails: function (file) {\r\n        if (!file) {\r\n            return;\r\n        }\r\n        this.vttPath = file.split('?')[0].split('/').slice(0, -1).join('/');\r\n        // Only load the first individual image file so we can get its dimensions. All others are loaded when\r\n        // they're set as background-images.\r\n        this.individualImage = null;\r\n        utils.ajax(file, this.thumbnailsLoaded.bind(this), this.thumbnailsFailed.bind(this), {\r\n            plainText: true\r\n        });\r\n    },\r\n\r\n    thumbnailsLoaded: function (evt) {\r\n        var data = srt(evt.responseText);\r\n        if (_.isArray(data)) {\r\n            _.each(data, function(obj) {\r\n                this.thumbnails.push(new Thumbnail(obj));\r\n            }, this);\r\n            this.drawCues();\r\n        }\r\n    },\r\n\r\n    thumbnailsFailed: function () { },\r\n\r\n    chooseThumbnail: function(seconds) {\r\n        var idx = _.sortedIndex(this.thumbnails, { end: seconds }, _.property('end'));\r\n        if (idx >= this.thumbnails.length) {\r\n            idx = this.thumbnails.length - 1;\r\n        }\r\n        var url = this.thumbnails[idx].img;\r\n        if (url.indexOf('://') < 0) {\r\n            url = this.vttPath ? this.vttPath + '/' + url : url;\r\n        }\r\n\r\n        return url;\r\n    },\r\n\r\n    loadThumbnail: function(seconds) {\r\n        var url = this.chooseThumbnail(seconds);\r\n        var style = {\r\n            margin: '0 auto',\r\n            backgroundPosition: '0 0'\r\n        };\r\n\r\n        var hashIndex = url.indexOf('#xywh');\r\n        if (hashIndex > 0) {\r\n            try {\r\n                var matched = (/(.+)#xywh=(\\d+),(\\d+),(\\d+),(\\d+)/).exec(url);\r\n                url = matched[1];\r\n                style.backgroundPosition = (matched[2] * -1) + 'px ' + (matched[3] * -1) + 'px';\r\n                style.width = matched[4];\r\n                this.timeTip.setWidth(+style.width);\r\n                style.height = matched[5];\r\n            } catch (e) {\r\n                // this.vttFailed('Could not parse thumbnail');\r\n                return;\r\n            }\r\n        } else if (!this.individualImage) {\r\n            this.individualImage = new Image();\r\n            this.individualImage.onload = _.bind(function () {\r\n                this.individualImage.onload = null;\r\n                this.timeTip.image({ width: this.individualImage.width, height: this.individualImage.height });\r\n                this.timeTip.setWidth(this.individualImage.width);\r\n            }, this);\r\n            this.individualImage.src = url;\r\n        }\r\n\r\n        style.backgroundImage = 'url(\"' + url + '\")';\r\n\r\n        return style;\r\n    },\r\n\r\n    showThumbnail: function(seconds) {\r\n        // Don't attempt to set thumbnail for small players or when a thumbnail doesn't exist\r\n        if (this._model.get('containerWidth') <= 420 || this.thumbnails.length < 1) {\r\n            return;\r\n        }\r\n        this.timeTip.image(this.loadThumbnail(seconds));\r\n    },\r\n\r\n    resetThumbnails: function() {\r\n        this.timeTip.image({\r\n            backgroundImage: '',\r\n            width: 0,\r\n            height: 0\r\n        });\r\n        this.thumbnails = [];\r\n    }\r\n};\r\n\r\nexport default ThumbnailsMixin;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/thumbnails.mixin.js","import Tooltip from 'view/controls/components/tooltip';\r\nimport Slider from 'view/controls/components/slider';\r\nimport UI from 'utils/ui';\r\n\r\nexport default class VolumeTooltip extends Tooltip {\r\n    constructor(_model, name, ariaText, svgIcons) {\r\n        super(name, ariaText, true, svgIcons);\r\n\r\n        this._model = _model;\r\n        this.volumeSlider = new Slider('jw-slider-volume jw-volume-tip', 'vertical');\r\n        this.volumeSlider.setup();\r\n        this.volumeSlider.element().classList.remove('jw-background-color');\r\n\r\n        this.addContent(this.volumeSlider.element());\r\n\r\n        this.volumeSlider.on('update', function (evt) {\r\n            this.trigger('update', evt);\r\n        }, this);\r\n\r\n        new UI(this.el, { useHover: true, directSelect: true, useFocus: true })\r\n            .on('click enter', this.toggleValue, this)\r\n            .on('tap', this.toggleOpenState, this)\r\n            .on('over', this.openTooltip, this)\r\n            .on('out', this.closeTooltip, this);\r\n\r\n        this._model.on('change:volume', this.onVolume, this);\r\n    }\r\n\r\n    toggleValue() {\r\n        this.trigger('toggleValue');\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/volumetooltip.js","import displayContainerTemplate from 'view/controls/templates/display-container';\r\nimport RewindDisplayIcon from 'view/controls/rewind-display-icon';\r\nimport PlayDisplayIcon from 'view/controls/play-display-icon';\r\nimport NextDisplayIcon from 'view/controls/next-display-icon';\r\nimport { cloneIcons } from 'view/controls/icons';\r\nimport utils from 'utils/helpers';\r\n\r\nexport default class DisplayContainer {\r\n    constructor(model, api) {\r\n        this.el = utils.createElement(displayContainerTemplate(model.get('localization')));\r\n\r\n        const container = this.el.querySelector('.jw-display-controls');\r\n        const buttons = {};\r\n\r\n        addButton('rewind', cloneIcons('rewind'), RewindDisplayIcon, container, buttons, model, api);\r\n        addButton('display', cloneIcons('play,pause,buffer,replay'), PlayDisplayIcon, container, buttons, model, api);\r\n        addButton('next', cloneIcons('next'), NextDisplayIcon, container, buttons, model, api);\r\n\r\n        this.container = container;\r\n        this.buttons = buttons;\r\n    }\r\n\r\n    element() {\r\n        return this.el;\r\n    }\r\n}\r\n\r\nfunction addButton(name, iconElements, ButtonClass, container, buttons, model, api) {\r\n    const buttonElement = container.querySelector(`.jw-display-icon-${name}`);\r\n    const iconContainer = container.querySelector(`.jw-icon-${name}`);\r\n    iconElements.forEach(icon => {\r\n        iconContainer.appendChild(icon); \r\n    });\r\n    buttons[name] = new ButtonClass(model, api, buttonElement);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/display-container.js","import displayIconTemplate from 'view/controls/templates/display-icon';\r\n\r\nexport default (localization) => {\r\n    return (\r\n        `<div class=\"jw-display jw-reset\">` +\r\n            `<div class=\"jw-display-container jw-reset\">` +\r\n                `<div class=\"jw-display-controls jw-reset\">` +\r\n                    displayIconTemplate('rewind', localization.rewind) +\r\n                    displayIconTemplate('display', localization.playback) +\r\n                    displayIconTemplate('next', localization.next) +\r\n                `</div>` +\r\n            `</div>` +\r\n        `</div>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/display-container.js","export default (iconName = '', ariaLabel = '') => {\r\n    return (\r\n        `<div class=\"jw-display-icon-container jw-display-icon-${iconName} jw-reset\">` +\r\n            `<div class=\"jw-icon jw-icon-${iconName} jw-button-color jw-reset\" role=\"button\" tabindex=\"0\" aria-label=\"${ariaLabel}\"></div>` +\r\n        `</div>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/display-icon.js","import UI from 'utils/ui';\r\n\r\nexport default class RewindDisplayIcon {\r\n    constructor(model, api, element) {\r\n        this.el = element;\r\n\r\n        new UI(this.el).on('click tap enter', function() {\r\n            const currentPosition = model.get('position');\r\n            const duration = model.get('duration');\r\n            const rewindPosition = currentPosition - 10;\r\n            let startPosition = 0;\r\n\r\n            // duration is negative in DVR mode\r\n            if (model.get('streamType') === 'DVR') {\r\n                startPosition = duration;\r\n            }\r\n            // Seek 10s back. Seek value should be >= 0 in VOD mode and >= (negative) duration in DVR mode\r\n            api.seek(Math.max(rewindPosition, startPosition));\r\n        });\r\n    }\r\n\r\n    element() {\r\n        return this.el;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/rewind-display-icon.js","import Events from 'utils/backbone.events';\r\nimport UI from 'utils/ui';\r\n\r\nexport default class PlayDisplayIcon {\r\n    constructor(_model, api, element) {\r\n        Object.assign(this, Events);\r\n\r\n        const localization = _model.get('localization');\r\n        const iconDisplay = element.getElementsByClassName('jw-icon-display')[0];\r\n        element.style.cursor = 'pointer';\r\n        this.icon = iconDisplay;\r\n        this.el = element;\r\n\r\n        new UI(this.el).on('click tap enter', (evt) => {\r\n            this.trigger(evt.type);\r\n        });\r\n\r\n        _model.on('change:state', (model, newstate) => {\r\n            let newstateLabel;\r\n            switch (newstate) {\r\n                case 'buffering':\r\n                    newstateLabel = localization.buffer;\r\n                    break;\r\n                case 'playing':\r\n                    newstateLabel = localization.pause;\r\n                    break;\r\n                case 'paused':\r\n                    newstateLabel = localization.playback;\r\n                    break;\r\n                case 'complete':\r\n                    newstateLabel = localization.replay;\r\n                    break;\r\n                default:\r\n                    newstateLabel = '';\r\n                    break;\r\n            }\r\n            if (newstateLabel === '') {\r\n                iconDisplay.removeAttribute('aria-label');\r\n            } else {\r\n                iconDisplay.setAttribute('aria-label', newstateLabel);\r\n            }\r\n        });\r\n    }\r\n\r\n    element() {\r\n        return this.el;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/play-display-icon.js","import UI from 'utils/ui';\r\n\r\nexport default class NextDisplayIcon {\r\n    constructor(model, api, element) {\r\n\r\n        new UI(element).on('click tap enter', function() {\r\n            api.next();\r\n        });\r\n\r\n        model.change('nextUp', function(nextUpChangeModel, nextUp) {\r\n            element.style.visibility = nextUp ? '' : 'hidden';\r\n        });\r\n\r\n        this.el = element;\r\n    }\r\n\r\n    element() {\r\n        return this.el;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/next-display-icon.js","import nextUpTemplate from 'view/controls/templates/nextup';\r\nimport { toggleClass } from 'utils/dom';\r\nimport UI from 'utils/ui';\r\nimport Events from 'utils/backbone.events';\r\nimport utils from 'utils/helpers';\r\nimport { cloneIcon } from 'view/controls/icons';\r\n\r\nexport default class NextUpTooltip {\r\n    constructor(_model, _api, playerElement) {\r\n        Object.assign(this, Events);\r\n        this._model = _model;\r\n        this._api = _api;\r\n        this._playerElement = playerElement;\r\n        this.nextUpText = _model.get('localization').nextUp;\r\n        this.nextUpClose = _model.get('localization').nextUpClose;\r\n        this.state = 'tooltip';\r\n        this.enabled = false;\r\n        this.shown = false;\r\n        this.reset();\r\n    }\r\n\r\n    setup(context) {\r\n        this.container = context.createElement('div');\r\n        this.container.className = 'jw-nextup-container jw-reset';\r\n        const element = utils.createElement(nextUpTemplate());\r\n        element.querySelector('.jw-nextup-close').appendChild(cloneIcon('close'));\r\n        this.addContent(element);\r\n\r\n        this.closeButton = this.content.querySelector('.jw-nextup-close');\r\n        this.closeButton.setAttribute('aria-label', this.nextUpClose);\r\n        this.tooltip = this.content.querySelector('.jw-nextup-tooltip');\r\n\r\n        const model = this._model;\r\n        // Next Up is hidden until we get a valid NextUp item from the nextUp event\r\n        this.enabled = false;\r\n\r\n        // Events\r\n        model.on('change:nextUp', this.onNextUp, this);\r\n\r\n        // Listen for duration changes to determine the offset from the end for when next up should be shown\r\n        model.change('duration', this.onDuration, this);\r\n        // Listen for position changes so we can show the tooltip when the offset has been crossed\r\n        model.change('position', this.onElapsed, this);\r\n\r\n        model.change('streamType', this.onStreamType, this);\r\n        model.change('mediaModel', this.onMediaModel, this);\r\n\r\n        // Close button\r\n        new UI(this.closeButton, { directSelect: true })\r\n            .on('click tap enter', function() {\r\n                this.nextUpSticky = false;\r\n                this.toggle(false);\r\n            }, this);\r\n        // Tooltip\r\n        new UI(this.tooltip)\r\n            .on('click tap', this.click, this);\r\n    }\r\n\r\n    loadThumbnail(url) {\r\n        this.nextUpImage = new Image();\r\n        this.nextUpImage.onload = (function() {\r\n            this.nextUpImage.onload = null;\r\n        }).bind(this);\r\n        this.nextUpImage.src = url;\r\n\r\n        return {\r\n            backgroundImage: 'url(\"' + url + '\")'\r\n        };\r\n    }\r\n\r\n    click() {\r\n        this.reset();\r\n        this._api.next();\r\n    }\r\n\r\n    toggle(show, reason) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        toggleClass(this.container, 'jw-nextup-sticky', !!this.nextUpSticky);\r\n        if (this.shown !== show) {\r\n            this.shown = show;\r\n            toggleClass(this.container, 'jw-nextup-container-visible', show);\r\n            toggleClass(this._playerElement, 'jw-flag-nextup', show);\r\n            const nextUp = this._model.get('nextUp');\r\n            if (show && nextUp) {\r\n                this.trigger('nextShown', {\r\n                    mode: nextUp.mode,\r\n                    ui: 'nextup',\r\n                    itemsShown: [ nextUp ],\r\n                    feedData: nextUp.feedData,\r\n                    reason: reason,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    setNextUpItem(nextUpItem) {\r\n        // Give the previous item time to complete its animation\r\n        setTimeout(() => {\r\n            // Set thumbnail\r\n            this.thumbnail = this.content.querySelector('.jw-nextup-thumbnail');\r\n            toggleClass(this.content, 'jw-nextup-thumbnail-visible', !!nextUpItem.image);\r\n            if (nextUpItem.image) {\r\n                const thumbnailStyle = this.loadThumbnail(nextUpItem.image);\r\n                utils.style(this.thumbnail, thumbnailStyle);\r\n            }\r\n\r\n            // Set header\r\n            this.header = this.content.querySelector('.jw-nextup-header');\r\n            this.header.innerText = this.nextUpText;\r\n\r\n            // Set title\r\n            this.title = this.content.querySelector('.jw-nextup-title');\r\n            const title = nextUpItem.title;\r\n            this.title.innerText = title ? utils.createElement(title).textContent : '';\r\n\r\n            // Set duration\r\n            if (nextUpItem.duration) {\r\n                this.duration = this.content.querySelector('.jw-nextup-duration');\r\n                const duration = nextUpItem.duration;\r\n                this.duration.innerText = duration ? utils.createElement(duration).textContent : '';\r\n            }\r\n\r\n        }, 500);\r\n    }\r\n\r\n    onNextUp(model, nextUp) {\r\n        this.reset();\r\n        if (!nextUp) {\r\n            return;\r\n        }\r\n\r\n        this.enabled = !!(nextUp.title || nextUp.image);\r\n\r\n        if (this.enabled) {\r\n            if (!nextUp.showNextUp) {\r\n                // The related plugin will countdown the nextUp item\r\n                this.nextUpSticky = false;\r\n                this.toggle(false);\r\n            }\r\n            this.setNextUpItem(nextUp);\r\n        }\r\n    }\r\n\r\n    onDuration(model, duration) {\r\n        if (!duration) {\r\n            return;\r\n        }\r\n\r\n        // Use nextupoffset if set or default to 10 seconds from the end of playback\r\n        let offset = utils.seconds(model.get('nextupoffset') || -10);\r\n        if (offset < 0) {\r\n            // Determine offset from the end. Duration may change.\r\n            offset += duration;\r\n        }\r\n\r\n        this.offset = offset;\r\n    }\r\n\r\n    onMediaModel(model, mediaModel) {\r\n        mediaModel.change('state', function(stateChangeMediaModel, state) {\r\n            if (state === 'complete') {\r\n                this.toggle(false);\r\n            }\r\n        }, this);\r\n    }\r\n\r\n    onElapsed(model, val) {\r\n        const nextUpSticky = this.nextUpSticky;\r\n        if (!this.enabled || nextUpSticky === false) {\r\n            return;\r\n        }\r\n        // Show nextup during VOD streams if:\r\n        // - in playlist mode but not playing an ad\r\n        // - autoplaying in related mode and autoplaytimer is set to 0\r\n        const showUntilEnd = val >= this.offset;\r\n        if (showUntilEnd && nextUpSticky === undefined) { // show if nextUpSticky is unset\r\n            this.nextUpSticky = showUntilEnd;\r\n            this.toggle(showUntilEnd, 'time');\r\n        } else if (!showUntilEnd && nextUpSticky) { // reset if there was a backward seek\r\n            this.reset();\r\n        }\r\n    }\r\n\r\n    onStreamType(model, streamType) {\r\n        if (streamType !== 'VOD') {\r\n            this.nextUpSticky = false;\r\n            this.toggle(false);\r\n        }\r\n    }\r\n\r\n    element() {\r\n        return this.container;\r\n    }\r\n\r\n    addContent(elem) {\r\n        if (this.content) {\r\n            this.removeContent();\r\n        }\r\n        this.content = elem;\r\n        this.container.appendChild(elem);\r\n    }\r\n\r\n    removeContent() {\r\n        if (this.content) {\r\n            this.container.removeChild(this.content);\r\n            this.content = null;\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.nextUpSticky = undefined;\r\n        this.toggle(false);\r\n    }\r\n\r\n    destroy() {\r\n        this.off();\r\n        this._model.off(null, null, this);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/nextuptooltip.js","export default (header = '', title = '', duration = '', closeAriaLabel = '') => {\r\n    return (\r\n        `<div class=\"jw-nextup jw-background-color jw-reset\">` +\r\n             `<div class=\"jw-nextup-tooltip jw-reset\">` +\r\n                `<div class=\"jw-nextup-thumbnail jw-reset\"></div>` +\r\n                `<div class=\"jw-nextup-body jw-reset\">` +\r\n                    `<div class=\"jw-nextup-header jw-reset\">${header}</div>` +\r\n                    `<div class=\"jw-nextup-title jw-reset\">${title}</div>` +\r\n                    `<div class=\"jw-nextup-duration jw-reset\">${duration}</div>` +\r\n                `</div>` +\r\n            `</div>` +\r\n            `<button type=\"button\" class=\"jw-icon jw-nextup-close jw-reset\" aria-label=\"${closeAriaLabel}\"></button>` +\r\n        `</div>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/nextup.js","import rightclickTemplate from 'view/controls/templates/rightclick';\r\nimport { cloneIcon } from 'view/controls/icons';\r\nimport { version } from 'version';\r\nimport { flashVersion } from 'utils/browser';\r\nimport { createElement, emptyElement, addClass, removeClass, bounds } from 'utils/dom';\r\nimport UI from 'utils/ui';\r\n\r\nfunction createDomElement(html) {\r\n    const element = createElement(html);\r\n    const logoContainer = element.querySelector('.jw-rightclick-logo');\r\n    if (logoContainer) {\r\n        logoContainer.appendChild(cloneIcon('jwplayer-logo'));\r\n    }\r\n    return element;\r\n}\r\n\r\nexport default class RightClick {\r\n\r\n    buildArray() {\r\n        var semverParts = version.split('+');\r\n        var majorMinorPatchPre = semverParts[0];\r\n\r\n        var menu = {\r\n            items: [{\r\n                title: 'Powered by <span class=\"jw-reset\">JW Player ' + majorMinorPatchPre + '</span>',\r\n                featured: true,\r\n                showLogo: true,\r\n                link: 'https://jwplayer.com/learn-more'\r\n            }]\r\n        };\r\n\r\n        var provider = this.model.get('provider');\r\n        if (provider && provider.name.indexOf('flash') >= 0) {\r\n            var text = 'Flash Version ' + flashVersion();\r\n            menu.items.push({\r\n                title: text,\r\n                link: 'http://www.adobe.com/software/flash/about/'\r\n            });\r\n        }\r\n\r\n        return menu;\r\n    }\r\n\r\n    rightClick(evt) {\r\n        this.lazySetup();\r\n\r\n        if (this.mouseOverContext) {\r\n            // right click on menu item should execute it\r\n            return false;\r\n        }\r\n\r\n        this.hideMenu();\r\n        this.showMenu(evt);\r\n\r\n        return false;\r\n    }\r\n\r\n    getOffset(evt) {\r\n        var playerBounds = bounds(this.playerElement);\r\n        var x = evt.pageX - playerBounds.left;\r\n        var y = evt.pageY - playerBounds.top;\r\n\r\n        return { x: x, y: y };\r\n    }\r\n\r\n    showMenu(evt) {\r\n        // Offset relative to player element\r\n        var off = this.getOffset(evt);\r\n\r\n        this.el.style.left = off.x + 'px';\r\n        this.el.style.top = off.y + 'px';\r\n\r\n        addClass(this.playerElement, 'jw-flag-rightclick-open');\r\n        addClass(this.el, 'jw-open');\r\n        clearTimeout(this._menuTimeout);\r\n        this._menuTimeout = setTimeout(() => this.hideMenu(), 3000);\r\n        return false;\r\n    }\r\n\r\n    hideMenu() {\r\n        this.elementUI.off('out', this.hideMenu, this);\r\n        if (this.mouseOverContext) {\r\n            // If mouse is over the menu, hide the menu when mouse moves out\r\n            this.elementUI.on('out', this.hideMenu, this);\r\n            return;\r\n        }\r\n        removeClass(this.playerElement, 'jw-flag-rightclick-open');\r\n        removeClass(this.el, 'jw-open');\r\n    }\r\n\r\n    lazySetup() {\r\n        const html = rightclickTemplate(this.buildArray());\r\n        if (this.el) {\r\n            if (this.html !== html) {\r\n                this.html = html;\r\n                const newEl = createDomElement(html);\r\n                emptyElement(this.el);\r\n                for (let i = newEl.childNodes.length; i--;) {\r\n                    this.el.appendChild(newEl.firstChild);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.html = html;\r\n        this.el = createDomElement(this.html);\r\n\r\n        this.layer.appendChild(this.el);\r\n\r\n        this.hideMenuHandler = this.hideMenu.bind(this);\r\n        this.addOffListener(this.playerElement);\r\n        this.addOffListener(document);\r\n\r\n        // Track if the mouse is above the menu or not\r\n        this.elementUI = new UI(this.el, { useHover: true })\r\n            .on('over', function() {\r\n                this.mouseOverContext = true;\r\n            }, this)\r\n            .on('out', function() {\r\n                this.mouseOverContext = false;\r\n            }, this);\r\n    }\r\n\r\n    setup(_model, _playerElement, layer) {\r\n        this.playerElement = _playerElement;\r\n        this.model = _model;\r\n        this.mouseOverContext = false;\r\n        this.layer = layer;\r\n\r\n        // Defer the rest of setup until the first click\r\n        _playerElement.oncontextmenu = this.rightClick.bind(this);\r\n    }\r\n\r\n    addOffListener(element) {\r\n        element.addEventListener('mousedown', this.hideMenuHandler);\r\n        element.addEventListener('touchstart', this.hideMenuHandler);\r\n        element.addEventListener('pointerdown', this.hideMenuHandler);\r\n    }\r\n\r\n    removeOffListener(element) {\r\n        element.removeEventListener('mousedown', this.hideMenuHandler);\r\n        element.removeEventListener('touchstart', this.hideMenuHandler);\r\n        element.removeEventListener('pointerdown', this.hideMenuHandler);\r\n    }\r\n\r\n    destroy() {\r\n        clearTimeout(this._menuTimeout);\r\n        if (this.el) {\r\n            this.hideMenu();\r\n            this.elementUI.off();\r\n            this.removeOffListener(this.playerElement);\r\n            this.removeOffListener(document);\r\n            this.hideMenuHandler = null;\r\n            this.el = null;\r\n        }\r\n\r\n        if (this.playerElement) {\r\n            this.playerElement.oncontextmenu = null;\r\n            this.playerElement = null;\r\n        }\r\n\r\n        if (this.model) {\r\n            this.model = null;\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/rightclick.js","export default (menu) => {\r\n    const { items = [] } = menu;\r\n    const itemsHtml = items\r\n        .map(item => {\r\n            return rightClickItem(item.link, item.title, item.featured, item.showLogo);\r\n        })\r\n        .join('');\r\n\r\n    return (\r\n        `<div class=\"jw-rightclick jw-reset\">` +\r\n            `<ul class=\"jw-rightclick-list jw-reset\">${itemsHtml}</ul>` +\r\n        `</div>`\r\n    );\r\n};\r\n\r\nconst rightClickItem = (link = '', title = '', featured, showLogo) => {\r\n    const logo = showLogo ? `<span class=\"jw-rightclick-logo jw-reset\"></span>` : '';\r\n    return (\r\n        `<li class=\"jw-reset jw-rightclick-item ${featured ? 'jw-featured' : ''}\">` +\r\n            `<a href=\"${link}\" class=\"jw-rightclick-link jw-reset\" target=\"_blank\">${logo}${title}</a>` +\r\n        `</li>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/rightclick.js","import { SettingsMenu } from 'view/controls/components/settings/menu';\r\nimport {\r\n    addCaptionsSubmenu,\r\n    removeCaptionsSubmenu,\r\n    addQualitiesSubmenu,\r\n    removeQualitiesSubmenu,\r\n    addAudioTracksSubmenu,\r\n    removeAudioTracksSubmenu,\r\n    addPlaybackRatesSubmenu,\r\n    removePlaybackRatesSubmenu\r\n} from 'view/utils/submenu-factory';\r\n\r\nexport function createSettingsMenu(controlbar, onVisibility) {\r\n    const settingsButton = controlbar.elements.settingsButton;\r\n    const onSubmenuAdded = () => {\r\n        settingsButton.show();\r\n    };\r\n    const onMenuEmpty = () => {\r\n        settingsButton.hide();\r\n    };\r\n\r\n    const settingsMenu = SettingsMenu(onVisibility, onSubmenuAdded, onMenuEmpty);\r\n\r\n    controlbar.on('settingsInteraction', (submenuName, isDefault, event) => {\r\n        const submenu = settingsMenu.getSubmenu(submenuName);\r\n        if (!submenu && !isDefault) {\r\n            // Do nothing if activating an invalid submenu\r\n            // An invalid submenu is one which does not exist\r\n            // The default submenu may not exist, but this case has defined behavior\r\n            return;\r\n        }\r\n\r\n        if (settingsMenu.visible) {\r\n            if (isDefault || submenu.active) {\r\n                // Close the submenu if clicking the default button (the gear) or if we're already at that submenu\r\n                settingsMenu.close();\r\n            } else {\r\n                // Tab to the newly activated submenu\r\n                settingsMenu.activateSubmenu(submenuName);\r\n            }\r\n        } else {\r\n            if (submenu) {\r\n                // Activate the selected submenu\r\n                settingsMenu.activateSubmenu(submenuName);\r\n            } else {\r\n                // Activate the first submenu if clicking the default button\r\n                settingsMenu.activateFirstSubmenu();\r\n            }\r\n            settingsMenu.open(isDefault, event);\r\n        }\r\n    });\r\n\r\n    return settingsMenu;\r\n}\r\n\r\n\r\nexport function setupSubmenuListeners(settingsMenu, controlbar, model, api) {\r\n    const activateSubmenuItem = (submenuName, itemIndex) => {\r\n        const submenu = settingsMenu.getSubmenu(submenuName);\r\n        if (submenu) {\r\n            submenu.activateItem(itemIndex);\r\n        }\r\n    };\r\n\r\n    const onAudiotracksChanged = (mediaModel, changedModel, audioTracks) => {\r\n        if (!audioTracks || audioTracks.length <= 1) {\r\n            removeAudioTracksSubmenu(settingsMenu);\r\n            return;\r\n        }\r\n\r\n        addAudioTracksSubmenu(\r\n            settingsMenu,\r\n            audioTracks,\r\n            model.getVideo().setCurrentAudioTrack.bind(model.getVideo()),\r\n            mediaModel.get('currentAudioTrack'),\r\n            model.get('localization').audioTracks\r\n        );\r\n    };\r\n\r\n    const onQualitiesChanged = (changedModel, levels) => {\r\n        if (!levels || levels.length <= 1) {\r\n            removeQualitiesSubmenu(settingsMenu);\r\n            return;\r\n        }\r\n\r\n        addQualitiesSubmenu(\r\n            settingsMenu,\r\n            levels,\r\n            model.getVideo().setCurrentQuality.bind(model.getVideo()),\r\n            changedModel.get('currentLevel'),\r\n            model.get('localization').hd\r\n        );\r\n    };\r\n\r\n    const onCaptionsChanged = (changedModel, captionsList) => {\r\n        const controlbarButton = controlbar.elements.captionsButton;\r\n        if (!captionsList || captionsList.length <= 1) {\r\n            removeCaptionsSubmenu(settingsMenu);\r\n            controlbarButton.hide();\r\n            return;\r\n        }\r\n\r\n        addCaptionsSubmenu(settingsMenu,\r\n            captionsList,\r\n            api.setCurrentCaptions.bind(this),\r\n            model.get('captionsIndex'),\r\n            model.get('localization').cc\r\n        );\r\n        controlbar.toggleCaptionsButtonState(!!model.get('captionsIndex'));\r\n        controlbarButton.show();\r\n    };\r\n\r\n    const setupPlaybackRatesMenu = (changedModel, playbackRates) => {\r\n        const provider = model.getVideo();\r\n        const showPlaybackRateControls = \r\n            provider &&\r\n            provider.supportsPlaybackRate && \r\n            model.get('streamType') !== 'LIVE' &&\r\n            model.get('playbackRateControls') &&\r\n            playbackRates.length > 1;\r\n\r\n        if (!showPlaybackRateControls) {\r\n            removePlaybackRatesSubmenu(settingsMenu);\r\n            return;\r\n        }\r\n\r\n        addPlaybackRatesSubmenu(\r\n            settingsMenu,\r\n            playbackRates,\r\n            model.setPlaybackRate.bind(model),\r\n            model.get('playbackRate'),\r\n            model.get('localization').playbackRates\r\n        );\r\n    };\r\n\r\n    model.change('mediaModel', (newModel, mediaModel) => {\r\n        // Quality Levels\r\n        mediaModel.change('levels', onQualitiesChanged, this);\r\n        mediaModel.on('change:currentLevel', (changedModel, currentQuality) => {\r\n            activateSubmenuItem('quality', currentQuality);\r\n        }, this);\r\n\r\n        // Audio Tracks\r\n        mediaModel.change('audioTracks', onAudiotracksChanged.bind(this, mediaModel), this);\r\n        mediaModel.on('change:currentAudioTrack', (changedModel, currentAudioTrack) => {\r\n            activateSubmenuItem('audioTracks', currentAudioTrack);\r\n        }, this);\r\n    }, this);\r\n\r\n    // Captions\r\n    model.change('captionsList', onCaptionsChanged, this);\r\n    model.change('captionsIndex', (changedModel, index) => {\r\n        const captionsSubmenu = settingsMenu.getSubmenu('captions');\r\n        if (captionsSubmenu) {\r\n            captionsSubmenu.activateItem(index);\r\n            controlbar.toggleCaptionsButtonState(!!index);\r\n        }\r\n    }, this);\r\n\r\n    // Playback Rates\r\n    model.change('playbackRates', setupPlaybackRatesMenu, this);\r\n    model.change('playbackRate', (changedModel, playbackRate) => {\r\n        const rates = model.get('playbackRates');\r\n        if (rates) {\r\n            activateSubmenuItem('playbackRates', rates.indexOf(playbackRate));\r\n        }\r\n    }, this);\r\n\r\n    // Remove the audio tracks, qualities, and playback rates submenus when casting\r\n    model.on('change:castActive', (changedModel, active, previousState) => {\r\n        if (active === previousState) {\r\n            return;\r\n        }\r\n\r\n        if (active) {\r\n            removeAudioTracksSubmenu(settingsMenu);\r\n            removeQualitiesSubmenu(settingsMenu);\r\n            removePlaybackRatesSubmenu(settingsMenu);\r\n        } else {\r\n            const mediaModel = model.get('mediaModel');\r\n            onAudiotracksChanged(mediaModel, mediaModel, mediaModel.get('audioTracks'));\r\n            onQualitiesChanged(model, mediaModel.get('levels'));\r\n            setupPlaybackRatesMenu(model, model.get('playbackRates'));\r\n        }\r\n    });\r\n\r\n    model.on('change:streamType', () => {  \r\n        setupPlaybackRatesMenu(model, model.get('playbackRates'));\r\n    });\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/settings-menu.js","import { cloneIcon } from 'view/controls/icons';\r\nimport button from 'view/controls/components/button';\r\nimport SettingsMenuTemplate from 'view/controls/templates/settings/menu';\r\nimport { createElement, emptyElement, prependChild } from 'utils/dom';\r\n\r\nexport function SettingsMenu(onVisibility, onSubmenuAdded, onMenuEmpty) {\r\n    const documentClickHandler = (e) => {\r\n        // Close if anything other than the settings menu has been clicked\r\n        // Let the display (jw-video) handles closing itself (display clicks do not pause if the menu is open)\r\n        // Don't close if the user has dismissed the nextup tooltip via it's close button (the tooltip overlays the menu)\r\n        const targetClass = e.target.className;\r\n        if (!targetClass.match(/jw-(settings|video|nextup-close|sharing-link)/)) {\r\n            instance.close();\r\n        }\r\n    };\r\n\r\n    let visible;\r\n    let active = null;\r\n    const submenus = {};\r\n\r\n    const settingsMenuElement = createElement(SettingsMenuTemplate());\r\n\r\n    const closeOnEnter = function(evt) {\r\n        if (evt && evt.keyCode === 27) {\r\n            instance.close(evt);\r\n            evt.stopPropagation();\r\n        }\r\n    };\r\n    settingsMenuElement.addEventListener('keydown', closeOnEnter);\r\n\r\n    const closeButton = button('jw-settings-close', () => {\r\n        instance.close();\r\n    }, 'Close Settings', [cloneIcon('close')]);\r\n\r\n    const closeOnButton = function(evt) {\r\n        // Close settings menu when enter is pressed on the close button\r\n        // or when tab key is pressed since it is the last element in topbar\r\n        if (evt.keyCode === 13 || (evt.keyCode === 9 && !evt.shiftKey)) {\r\n            instance.close(evt);\r\n        }\r\n    };\r\n    closeButton.show();\r\n    closeButton.element().addEventListener('keydown', closeOnButton);\r\n\r\n    const topbarElement = settingsMenuElement.querySelector('.jw-settings-topbar');\r\n    topbarElement.appendChild(closeButton.element());\r\n\r\n    const instance = {\r\n        open(isDefault, event) {\r\n            visible = true;\r\n            onVisibility(visible, event);\r\n            settingsMenuElement.setAttribute('aria-expanded', 'true');\r\n            addDocumentListeners(documentClickHandler);\r\n\r\n            if (isDefault) {\r\n                if (event && event.type === 'enter') {\r\n                    active.categoryButtonElement.focus();\r\n                }\r\n            } else {\r\n                active.element().firstChild.focus();\r\n            }\r\n\r\n        },\r\n        close(event) {\r\n            visible = false;\r\n            onVisibility(visible, event);\r\n\r\n            active = null;\r\n            deactivateAllSubmenus(submenus);\r\n\r\n            settingsMenuElement.setAttribute('aria-expanded', 'false');\r\n            removeDocumentListeners(documentClickHandler);\r\n        },\r\n        toggle() {\r\n            if (visible) {\r\n                this.close();\r\n            } else {\r\n                this.open();\r\n            }\r\n        },\r\n        addSubmenu(submenu) {\r\n            if (!submenu) {\r\n                return;\r\n            }\r\n            const name = submenu.name;\r\n            submenus[name] = submenu;\r\n\r\n            if (submenu.isDefault) {\r\n                prependChild(topbarElement, submenu.categoryButtonElement);\r\n                submenu.categoryButtonElement.addEventListener('keydown', function(evt) {\r\n                    // close settings menu if you shift-tab on the first category button element\r\n                    if (evt.keyCode === 9 && evt.shiftKey) {\r\n                        instance.close(evt);\r\n                    }\r\n                });\r\n            } else {\r\n                // sharing should always be the last submenu\r\n                const sharingButton = topbarElement.querySelector('.jw-submenu-sharing');\r\n                topbarElement.insertBefore(\r\n                    submenu.categoryButtonElement,\r\n                    sharingButton || closeButton.element()\r\n                );\r\n            }\r\n\r\n            settingsMenuElement.appendChild(submenu.element());\r\n\r\n            onSubmenuAdded();\r\n        },\r\n        getSubmenu(name) {\r\n            return submenus[name];\r\n        },\r\n        removeSubmenu(name) {\r\n            const submenu = submenus[name];\r\n            if (!submenu || submenu.element().parentNode !== settingsMenuElement) {\r\n                return;\r\n            }\r\n            settingsMenuElement.removeChild(submenu.element());\r\n            topbarElement.removeChild(submenu.categoryButtonElement);\r\n            submenu.destroy();\r\n            delete submenus[name];\r\n\r\n            if (!Object.keys(submenus).length) {\r\n                this.close();\r\n                onMenuEmpty();\r\n            }\r\n        },\r\n        activateSubmenu(name) {\r\n            const submenu = submenus[name];\r\n            if (!submenu || submenu.active) {\r\n                return;\r\n            }\r\n\r\n            deactivateAllSubmenus(submenus);\r\n            submenu.activate();\r\n            active = submenu;\r\n\r\n            if (!submenu.isDefault) {\r\n                active.element().firstChild.focus();\r\n            }\r\n        },\r\n        activateFirstSubmenu() {\r\n            const firstSubmenuName = Object.keys(submenus)[0];\r\n            this.activateSubmenu(firstSubmenuName);\r\n        },\r\n        element() {\r\n            return settingsMenuElement;\r\n        },\r\n        destroy() {\r\n            this.close();\r\n            settingsMenuElement.removeEventListener('keydown', closeOnEnter);\r\n            closeButton.element().removeEventListener('keydown', closeOnButton);\r\n            emptyElement(settingsMenuElement);\r\n        }\r\n    };\r\n\r\n    Object.defineProperties(instance, {\r\n        visible: {\r\n            enumerable: true,\r\n            get: () => visible\r\n        },\r\n    });\r\n\r\n    return instance;\r\n}\r\n\r\nconst addDocumentListeners = (handler) => {\r\n    document.addEventListener('mouseup', handler);\r\n    document.addEventListener('pointerup', handler);\r\n    document.addEventListener('touchstart', handler);\r\n};\r\n\r\nconst removeDocumentListeners = (handler) => {\r\n    document.removeEventListener('mouseup', handler);\r\n    document.removeEventListener('pointerup', handler);\r\n    document.removeEventListener('touchstart', handler);\r\n};\r\n\r\nconst deactivateAllSubmenus = (submenus) => {\r\n    Object.keys(submenus).forEach(name => {\r\n        submenus[name].deactivate();\r\n    });\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/settings/menu.js","export default () => {\r\n    return (\r\n        `<div class=\"jw-reset jw-settings-menu\" role=\"menu\" aria-expanded=\"false\">` +\r\n            `<div class=\"jw-reset jw-settings-topbar\" role=\"menubar\">` +\r\n            `</div>` +\r\n        `</div>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/settings/menu.js","import { cloneIcon } from 'view/controls/icons';\r\nimport SettingsSubmenu from 'view/controls/components/settings/submenu';\r\nimport SettingsContentItem from 'view/controls/components/settings/content-item';\r\nimport button from 'view/controls/components/button';\r\nimport { SimpleTooltip } from 'view/controls/components/simple-tooltip';\r\n\r\nconst AUDIO_TRACKS_SUBMENU = 'audioTracks';\r\nconst CAPTIONS_SUBMENU = 'captions';\r\nconst QUALITIES_SUBMENU = 'quality';\r\nconst PLAYBACK_RATE_SUBMENU = 'playbackRates';\r\nconst DEFAULT_SUBMENU = QUALITIES_SUBMENU;\r\n\r\nexport const makeSubmenu = (settingsMenu, name, contentItems, icon, tooltipText) => {\r\n    let submenu = settingsMenu.getSubmenu(name);\r\n    if (submenu) {\r\n        submenu.replaceContent(contentItems);\r\n    } else {\r\n        const categoryButton = button(`jw-settings-${name}`, () => {\r\n            settingsMenu.activateSubmenu(name);\r\n            submenu.element().children[0].focus();\r\n        }, name, [icon]);\r\n        const categoryButtonElement = categoryButton.element();\r\n        categoryButtonElement.setAttribute('role', 'menuitemradio');\r\n        categoryButtonElement.setAttribute('aria-checked', 'false');\r\n\r\n        // Qualities submenu is the default submenu\r\n        submenu = SettingsSubmenu(name, categoryButton, name === DEFAULT_SUBMENU);\r\n        submenu.addContent(contentItems);\r\n        if (!('ontouchstart' in window)) {\r\n            SimpleTooltip(categoryButtonElement, name, tooltipText);\r\n        }\r\n        settingsMenu.addSubmenu(submenu);\r\n    }\r\n\r\n    return submenu;\r\n};\r\n\r\nexport function addCaptionsSubmenu(settingsMenu, captionsList, action, initialSelectionIndex, tooltipText) {\r\n    const captionsContentItems = captionsList.map((track, index) => {\r\n        const contentItemElement = SettingsContentItem(track.id, track.label, (evt) => {\r\n            action(index);\r\n            settingsMenu.close(evt);\r\n        });\r\n\r\n        return contentItemElement;\r\n    });\r\n\r\n    const captionsSubmenu = makeSubmenu(settingsMenu, CAPTIONS_SUBMENU, captionsContentItems, cloneIcon('cc-off'), tooltipText);\r\n    captionsSubmenu.activateItem(initialSelectionIndex);\r\n}\r\n\r\nexport function removeCaptionsSubmenu(settingsMenu) {\r\n    settingsMenu.removeSubmenu(CAPTIONS_SUBMENU);\r\n}\r\n\r\nexport function addAudioTracksSubmenu(settingsMenu, audioTracksList, action, initialSelectionIndex, tooltipText) {\r\n    const audioTracksItems = audioTracksList.map((track, index) => {\r\n        return SettingsContentItem(track.name, track.name, (evt) => {\r\n            action(index);\r\n            settingsMenu.close(evt);\r\n        });\r\n    });\r\n\r\n    const audioTracksSubmenu = makeSubmenu(settingsMenu, AUDIO_TRACKS_SUBMENU, audioTracksItems,\r\n        cloneIcon('audio-tracks'), tooltipText);\r\n    audioTracksSubmenu.activateItem(initialSelectionIndex);\r\n}\r\n\r\nexport function removeAudioTracksSubmenu(settingsMenu) {\r\n    settingsMenu.removeSubmenu(AUDIO_TRACKS_SUBMENU);\r\n}\r\n\r\nexport function addQualitiesSubmenu(settingsMenu, qualitiesList, action, initialSelectionIndex, tooltipText) {\r\n    const qualitiesItems = qualitiesList.map((track, index) => {\r\n        return SettingsContentItem(track.label, track.label, (evt) => {\r\n            action(index);\r\n            settingsMenu.close(evt);\r\n        });\r\n    });\r\n\r\n    const qualitiesSubmenu = makeSubmenu(settingsMenu, QUALITIES_SUBMENU, qualitiesItems, cloneIcon('quality-100'), tooltipText);\r\n    qualitiesSubmenu.activateItem(initialSelectionIndex);\r\n}\r\n\r\nexport function removeQualitiesSubmenu(settingsMenu) {\r\n    settingsMenu.removeSubmenu(QUALITIES_SUBMENU);\r\n}\r\n\r\nexport function addPlaybackRatesSubmenu(settingsMenu, rateList, action, initialSelectionIndex, tooltipText) {\r\n    const rateItems = rateList.map((playbackRate) => {\r\n        return SettingsContentItem(playbackRate, playbackRate + 'x', (evt) => {\r\n            action(playbackRate);\r\n            settingsMenu.close(evt);\r\n        });\r\n    });\r\n\r\n    const playbackRatesSubmenu = makeSubmenu(settingsMenu, PLAYBACK_RATE_SUBMENU, rateItems, cloneIcon('playback-rate'), tooltipText);\r\n    playbackRatesSubmenu.activateItem(initialSelectionIndex);\r\n}\r\n\r\nexport function removePlaybackRatesSubmenu(settingsMenu) {\r\n    settingsMenu.removeSubmenu(PLAYBACK_RATE_SUBMENU);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/submenu-factory.js","import SubmenuTemplate from 'view/controls/templates/settings/submenu';\r\nimport { createElement, emptyElement, toggleClass } from 'utils/dom';\r\n\r\nexport default function SettingsSubmenu(name, categoryButton, isDefault) {\r\n\r\n    let active;\r\n    let contentItems = [];\r\n    const submenuElement = createElement(SubmenuTemplate(name));\r\n    const categoryButtonElement = categoryButton.element();\r\n\r\n    categoryButtonElement.setAttribute('name', name);\r\n    categoryButtonElement.className += ' jw-submenu-' + name;\r\n    categoryButton.show();\r\n\r\n    // return focus to topbar element when tabbing after the first or last item\r\n    const onFocus = function(evt) {\r\n        const focus =\r\n            categoryButtonElement &&\r\n            evt.keyCode === 9 && (\r\n                evt.srcElement === contentItems[0].element() && evt.shiftKey ||\r\n                evt.srcElement === contentItems[contentItems.length - 1].element() && !evt.shiftKey\r\n            );\r\n\r\n        if (focus) {\r\n            categoryButtonElement.focus();\r\n        }\r\n    };\r\n\r\n    const instance = {\r\n        addContent(items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            items.forEach(item => {\r\n                submenuElement.appendChild(item.element());\r\n            });\r\n\r\n            contentItems = items;\r\n\r\n            contentItems[0].element().addEventListener('keydown', onFocus);\r\n            contentItems[contentItems.length - 1].element().addEventListener('keydown', onFocus);\r\n        },\r\n        replaceContent(items) {\r\n            instance.removeContent();\r\n            this.addContent(items);\r\n        },\r\n        removeContent() {\r\n            contentItems[0].element().removeEventListener('keydown', onFocus);\r\n            contentItems[contentItems.length - 1].element().removeEventListener('keydown', onFocus);\r\n\r\n            emptyElement(submenuElement);\r\n            contentItems = [];\r\n        },\r\n        activate() {\r\n            toggleClass(submenuElement, 'jw-settings-submenu-active', true);\r\n            submenuElement.setAttribute('aria-expanded', 'true');\r\n            categoryButtonElement.setAttribute('aria-checked', 'true');\r\n            active = true;\r\n        },\r\n        deactivate() {\r\n            toggleClass(submenuElement, 'jw-settings-submenu-active', false);\r\n            submenuElement.setAttribute('aria-expanded', 'false');\r\n            categoryButtonElement.setAttribute('aria-checked', 'false');\r\n            active = false;\r\n        },\r\n        activateItem(itemOrdinal = 0) {\r\n            const item = contentItems[itemOrdinal];\r\n            if (!item || item.active) {\r\n                return;\r\n            }\r\n            deactivateAllItems(contentItems);\r\n            item.activate();\r\n        },\r\n        element() {\r\n            return submenuElement;\r\n        },\r\n        destroy() {\r\n            if (!contentItems) {\r\n                return;\r\n            }\r\n            contentItems.forEach(item => {\r\n                item.destroy();\r\n            });\r\n            this.removeContent();\r\n        }\r\n    };\r\n\r\n    Object.defineProperties(instance,\r\n        {\r\n            name: {\r\n                enumerable: true,\r\n                get: () => name\r\n            },\r\n            active: {\r\n                enumerable: true,\r\n                get: () => active\r\n            },\r\n            categoryButtonElement: {\r\n                enumerable: true,\r\n                get: () => categoryButtonElement\r\n            },\r\n            isDefault: {\r\n                enumerable: true,\r\n                get: () => isDefault\r\n            }\r\n        }\r\n    );\r\n\r\n    return instance;\r\n}\r\n\r\nconst deactivateAllItems = (items) => {\r\n    items.forEach(item => {\r\n        item.deactivate();\r\n    });\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/settings/submenu.js","export default () => {\r\n    return (\r\n        `<div class=\"jw-reset jw-settings-submenu\" role=\"menu\" aria-expanded=\"false\">` +\r\n        `</div>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/settings/submenu.js","import ContentItemTemplate from 'view/controls/templates/settings/content-item';\r\nimport { createElement, toggleClass } from 'utils/dom';\r\nimport UI from 'utils/ui';\r\n\r\nexport default function SettingsContentItem(name, content, action) {\r\n    let active;\r\n    const contentItemElement = createElement(ContentItemTemplate(content));\r\n    const contentItemUI = new UI(contentItemElement);\r\n    contentItemUI.on('click tap enter', (evt) => {\r\n        action(evt);\r\n    });\r\n\r\n    const instance = {\r\n        activate() {\r\n            toggleClass(contentItemElement, 'jw-settings-item-active', true);\r\n            contentItemElement.setAttribute('aria-checked', 'true');\r\n            active = true;\r\n        },\r\n        deactivate() {\r\n            toggleClass(contentItemElement, 'jw-settings-item-active', false);\r\n            contentItemElement.setAttribute('aria-checked', 'false');\r\n            active = false;\r\n        },\r\n        element() {\r\n            return contentItemElement;\r\n        },\r\n        uiElement() {\r\n            return contentItemUI;\r\n        },\r\n        destroy() {\r\n            this.deactivate();\r\n            contentItemUI.destroy();\r\n        }\r\n    };\r\n\r\n    Object.defineProperty(instance, 'active', {\r\n        enumerable: true,\r\n        get: () => active\r\n    });\r\n\r\n    return instance;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/components/settings/content-item.js","export default (content) => {\r\n    return (\r\n        `<button type=\"button\" class=\"jw-reset jw-settings-content-item\" role=\"menuitemradio\" aria-checked=\"false\">` +\r\n            `${content}` +\r\n        `</button>`\r\n    );\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/controls/templates/settings/content-item.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js!../../node_modules/less-loader/dist/cjs.js??ref--0-3!./controls.less\");\nif(typeof content === 'string') content = [['all-players', content, '']];\n// add the styles to the DOM\nrequire(\"!../../node_modules/simple-style-loader/addStyles.js\").style(content,'all-players');\nif(content.locals) module.exports = content.locals;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/controls.less\n// module id = 139\n// module chunks = 0 1 2 3 4","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".jw-overlays,.jw-controls,.jw-controls-backdrop,.jw-settings-submenu{height:100%;width:100%}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after,.jw-settings-menu .jw-icon.jw-button-color::after{position:absolute;right:0}.jw-overlays,.jw-controls,.jw-controls-backdrop{top:0;position:absolute;left:0}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after,.jw-settings-menu .jw-icon.jw-button-color::after{position:absolute;bottom:0;left:0}.jw-nextup-close{position:absolute;top:0;right:0}.jw-overlays,.jw-controls{position:absolute;bottom:0;right:0}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after,.jw-time-tip::after,.jw-settings-menu .jw-icon.jw-button-color::after,.jw-controlbar .jw-tooltip::after,.jw-settings-menu .jw-tooltip::after{content:\\\"\\\";display:block}.jw-svg-icon{height:24px;width:24px;fill:currentColor;pointer-events:none}.jw-icon{height:44px;width:44px;background-color:transparent}.jw-icon-airplay .jw-svg-icon-airplay-off{display:none}.jw-off.jw-icon-airplay .jw-svg-icon-airplay-off{display:block}.jw-icon-airplay .jw-svg-icon-airplay-on{display:block}.jw-off.jw-icon-airplay .jw-svg-icon-airplay-on{display:none}.jw-icon-cc .jw-svg-icon-cc-off{display:none}.jw-off.jw-icon-cc .jw-svg-icon-cc-off{display:block}.jw-icon-cc .jw-svg-icon-cc-on{display:block}.jw-off.jw-icon-cc .jw-svg-icon-cc-on{display:none}.jw-icon-fullscreen .jw-svg-icon-fullscreen-off{display:none}.jw-off.jw-icon-fullscreen .jw-svg-icon-fullscreen-off{display:block}.jw-icon-fullscreen .jw-svg-icon-fullscreen-on{display:block}.jw-off.jw-icon-fullscreen .jw-svg-icon-fullscreen-on{display:none}.jw-icon-volume .jw-svg-icon-volume-0{display:none}.jw-off.jw-icon-volume .jw-svg-icon-volume-0{display:block}.jw-icon-volume .jw-svg-icon-volume-100{display:none}.jw-full.jw-icon-volume .jw-svg-icon-volume-100{display:block}.jw-icon-volume .jw-svg-icon-volume-50{display:block}.jw-off.jw-icon-volume .jw-svg-icon-volume-50,.jw-full.jw-icon-volume .jw-svg-icon-volume-50{display:none}.jw-icon-live .jw-svg-icon-dvr,.jw-icon-live .jw-svg-icon-live{width:44px}.jw-icon-live.jw-dvr-live .jw-svg-icon-dvr{display:none}.jw-settings-menu .jw-icon::after,.jw-icon-settings::after,.jw-icon-volume::after{height:100%;width:24px;box-shadow:inset 0 -3px 0 -1px currentColor;margin:auto;opacity:0;transition:opacity 150ms cubic-bezier(0, -0.25, .25, 1)}.jw-settings-menu .jw-icon[aria-checked=\\\"true\\\"]::after,.jw-settings-open .jw-icon-settings::after,.jw-icon-volume.jw-open::after{opacity:1}.jw-overlays,.jw-controls{pointer-events:none}.jw-controls-backdrop{display:block;background:linear-gradient(to bottom, transparent, rgba(0,0,0,0.4) 77%, rgba(0,0,0,0.4) 100%) 100% 100% / 100% 240px no-repeat transparent;transition:opacity 250ms cubic-bezier(0, -0.25, .25, 1),background-size 250ms cubic-bezier(0, -0.25, .25, 1);pointer-events:none}.jw-overlays{cursor:auto}.jw-controls{overflow:hidden}.jw-flag-small-player .jw-controls{text-align:center}.jw-text{height:1em;font-family:Arial,Helvetica,sans-serif;font-size:.75em;font-style:normal;font-weight:normal;color:#fff;text-align:center;font-variant:normal;font-stretch:normal}.jw-controlbar,.jw-skip,.jw-display-icon-container,.jw-display-icon-container .jw-icon,.jw-nextup-container,.jw-autostart-mute,.jw-overlays .jw-plugin{pointer-events:all}.jwplayer .jw-display-icon-container,.jw-error .jw-display-icon-container{width:auto;height:auto;box-sizing:content-box}.jw-display{display:table;height:100%;padding:57px 0;position:relative;width:100%}.jw-flag-dragging .jw-display{display:none}.jw-state-idle:not(.jw-flag-cast-available) .jw-display{padding:0}.jw-display-container{display:table-cell;height:100%;text-align:center;vertical-align:middle}.jw-display-controls{display:inline-block}.jwplayer .jw-display-icon-container{float:left}.jw-display-icon-container{display:inline-block}.jw-display-icon-container .jw-icon{height:75px;width:75px;cursor:pointer;display:flex;justify-content:center;align-items:center}.jw-display-icon-container .jw-icon .jw-svg-icon{height:33px;width:33px;padding:0;position:relative}.jw-display-icon-container .jw-icon .jw-svg-icon-rewind{padding:.2em .05em}.jw-breakpoint-0 .jw-display-icon-next,.jw-breakpoint-0 .jw-display-icon-rewind{display:none}.jw-breakpoint-0 .jw-display .jw-icon,.jw-breakpoint-0 .jw-display .jw-svg-icon{width:44px;height:44px;line-height:44px}.jw-breakpoint-0 .jw-display .jw-icon:before,.jw-breakpoint-0 .jw-display .jw-svg-icon:before{width:22px;height:22px}.jw-breakpoint-1 .jw-display-icon-container{padding:5.5px;margin:0 22px}.jw-breakpoint-1 .jw-display .jw-icon,.jw-breakpoint-1 .jw-display .jw-svg-icon{width:44px;height:44px;line-height:44px}.jw-breakpoint-1 .jw-display .jw-icon:before,.jw-breakpoint-1 .jw-display .jw-svg-icon:before{width:22px;height:22px}.jw-breakpoint-1 .jw-display .jw-icon.jw-icon-rewind:before{width:33px;height:33px}.jw-breakpoint-2 .jw-display .jw-icon,.jw-breakpoint-3 .jw-display .jw-icon,.jw-breakpoint-2 .jw-display .jw-svg-icon,.jw-breakpoint-3 .jw-display .jw-svg-icon{width:77px;height:77px;line-height:77px}.jw-breakpoint-2 .jw-display .jw-icon:before,.jw-breakpoint-3 .jw-display .jw-icon:before,.jw-breakpoint-2 .jw-display .jw-svg-icon:before,.jw-breakpoint-3 .jw-display .jw-svg-icon:before{width:38.5px;height:38.5px}.jw-breakpoint-4 .jw-display .jw-icon,.jw-breakpoint-5 .jw-display .jw-icon,.jw-breakpoint-6 .jw-display .jw-icon,.jw-breakpoint-7 .jw-display .jw-icon,.jw-breakpoint-4 .jw-display .jw-svg-icon,.jw-breakpoint-5 .jw-display .jw-svg-icon,.jw-breakpoint-6 .jw-display .jw-svg-icon,.jw-breakpoint-7 .jw-display .jw-svg-icon{width:88px;height:88px;line-height:88px}.jw-breakpoint-4 .jw-display .jw-icon:before,.jw-breakpoint-5 .jw-display .jw-icon:before,.jw-breakpoint-6 .jw-display .jw-icon:before,.jw-breakpoint-7 .jw-display .jw-icon:before,.jw-breakpoint-4 .jw-display .jw-svg-icon:before,.jw-breakpoint-5 .jw-display .jw-svg-icon:before,.jw-breakpoint-6 .jw-display .jw-svg-icon:before,.jw-breakpoint-7 .jw-display .jw-svg-icon:before{width:44px;height:44px}.jw-controlbar{display:flex;flex-flow:row wrap;align-items:center;justify-content:center;position:absolute;left:0;bottom:0;width:100%;border:none;border-radius:0;background-size:auto;box-shadow:none;max-height:72px;transition:250ms cubic-bezier(0, -0.25, .25, 1);transition-property:opacity,visibility;transition-delay:0s}.jw-controlbar .jw-button-image{background:no-repeat 50% 50%;background-size:contain;max-height:24px}.jw-controlbar .jw-spacer{flex:1 1 auto;align-self:stretch}.jw-controlbar .jw-icon.jw-button-color:hover{color:#fff}.jw-button-container{display:flex;flex-flow:row nowrap;flex:1 1 auto;align-items:center;justify-content:center;width:100%;padding:0 12px}.jw-slider-horizontal{background-color:transparent}.jw-icon-inline{position:relative}.jw-icon-inline,.jw-icon-tooltip{height:44px;width:44px;align-items:center;display:flex;justify-content:center}.jw-icon-inline:not(.jw-text),.jw-icon-tooltip,.jw-slider-horizontal{cursor:pointer}.jw-text-elapsed,.jw-text-duration{justify-content:flex-start;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.jw-icon-tooltip{position:relative}.jw-knob:hover,.jw-icon-inline:hover,.jw-icon-tooltip:hover,.jw-icon-display:hover,.jw-option:before:hover{color:#fff}.jw-time-tip,.jw-controlbar .jw-tooltip,.jw-settings-menu .jw-tooltip{pointer-events:none}.jw-icon-cast{display:none;margin:0;padding:0}.jw-icon-cast button{background-color:transparent;border:none;padding:0;width:24px;height:24px;cursor:pointer}.jw-icon-inline.jw-icon-volume{display:none}.jwplayer .jw-text-countdown{display:none}.jw-flag-small-player .jw-display{padding-top:44px;padding-bottom:66px}.jw-flag-small-player:not(.jw-flag-audio-player):not(.jw-flag-ads) .jw-controlbar .jw-button-container>.jw-icon-rewind,.jw-flag-small-player:not(.jw-flag-audio-player):not(.jw-flag-ads) .jw-controlbar .jw-button-container>.jw-icon-next,.jw-flag-small-player:not(.jw-flag-audio-player):not(.jw-flag-ads) .jw-controlbar .jw-button-container>.jw-icon-playback{display:none}.jw-flag-ads-vpaid:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-autostart:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-user-inactive.jw-state-playing:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar,.jw-flag-user-inactive.jw-state-buffering:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controlbar{visibility:hidden;pointer-events:none;opacity:0;transition-delay:0s,250ms}.jw-flag-ads-vpaid:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controls-backdrop,.jw-flag-autostart:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controls-backdrop,.jw-flag-user-inactive.jw-state-playing:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controls-backdrop,.jw-flag-user-inactive.jw-state-buffering:not(.jw-flag-media-audio):not(.jw-flag-audio-player):not(.jw-flag-ads-vpaid-controls):not(.jw-flag-casting) .jw-controls-backdrop{opacity:0}.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint-0 .jw-text-countdown{display:flex}.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint-0 .jw-text-elapsed,.jwplayer:not(.jw-flag-ads):not(.jw-flag-live).jw-breakpoint-0 .jw-text-duration{display:none}.jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-icon-live:not(.jw-dvr-live){margin-right:16px}.jwplayer:not(.jw-flag-ads):not(.jw-flag-live) .jw-icon-live:not(.jw-dvr-live) .jw-svg-icon-live{display:none}.jwplayer.jw-flag-live .jw-icon-live .jw-svg-icon-dvr{display:none}.jwplayer:not(.jw-breakpoint-0) .jw-text-duration:before{content:\\\"/\\\";padding-right:1ch;padding-left:1ch}.jwplayer:not(.jw-flag-user-inactive) .jw-controlbar{will-change:transform}.jwplayer:not(.jw-flag-user-inactive) .jw-controlbar .jw-text{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.jw-slider-container{display:flex;align-items:center;position:relative;touch-action:none}.jw-rail,.jw-buffer,.jw-progress{position:absolute;cursor:pointer}.jw-progress{background-color:#f2f2f2}.jw-rail{background-color:rgba(255,255,255,0.3)}.jw-buffer{background-color:rgba(255,255,255,0.3)}.jw-knob{height:13px;width:13px;background-color:#fff;border-radius:50%;box-shadow:0 0 10px rgba(0,0,0,0.4);opacity:1;pointer-events:none;position:absolute;-webkit-transform:translate(-50%, -50%) scale(0);transform:translate(-50%, -50%) scale(0);transition:150ms cubic-bezier(0, -0.25, .25, 1);transition-property:opacity,-webkit-transform;transition-property:opacity,transform;transition-property:opacity,transform,-webkit-transform}.jw-flag-dragging .jw-slider-time .jw-knob,.jw-icon-volume:active .jw-slider-volume .jw-knob{box-shadow:0 0 26px rgba(0,0,0,0.2),0 0 10px rgba(0,0,0,0.4),0 0 0 6px rgba(255,255,255,0.2)}.jw-slider-horizontal,.jw-slider-vertical{display:flex}.jw-slider-horizontal .jw-slider-container{height:5px;width:100%}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-cue,.jw-slider-horizontal .jw-knob{top:50%}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-cue{-webkit-transform:translate(0, -50%);transform:translate(0, -50%)}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress{height:5px}.jw-slider-horizontal .jw-rail{width:100%}.jw-slider-vertical{align-items:center;flex-direction:column}.jw-slider-vertical .jw-slider-container{height:88px;width:5px}.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-knob{left:50%}.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress{height:100%;width:5px;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translate(-50%, 0);transform:translate(-50%, 0);transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out;bottom:0}.jw-slider-vertical .jw-knob{-webkit-transform:translate(-50%, 50%);transform:translate(-50%, 50%)}.jw-slider-time{height:17px;width:100%;align-items:center;background:transparent none;padding:0 12px;z-index:1}.jw-slider-time .jw-rail,.jw-slider-time .jw-buffer,.jw-slider-time .jw-progress,.jw-slider-time .jw-cue{-webkit-backface-visibility:hidden;backface-visibility:hidden;height:100%;-webkit-transform:translate(0, -50%) scale(1, .6);transform:translate(0, -50%) scale(1, .6);transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}.jw-slider-time .jw-cue{background-color:rgba(33,33,33,0.8);cursor:pointer;position:relative;width:6px}.jw-slider-time:hover .jw-rail,.jw-flag-touch .jw-slider-time .jw-rail,.jw-slider-time:hover .jw-buffer,.jw-flag-touch .jw-slider-time .jw-buffer,.jw-slider-time:hover .jw-progress,.jw-flag-touch .jw-slider-time .jw-progress,.jw-slider-time:hover .jw-cue,.jw-flag-touch .jw-slider-time .jw-cue{-webkit-transform:translate(0, -50%) scale(1, 1);transform:translate(0, -50%) scale(1, 1)}.jw-slider-time .jw-rail{background-color:rgba(255,255,255,0.2)}.jw-slider-time .jw-buffer{background-color:rgba(255,255,255,0.4)}.jw-slider-time:hover .jw-knob,.jw-flag-dragging .jw-slider-time .jw-knob,.jw-flag-touch .jw-slider-time .jw-knob{-webkit-transform:translate(-50%, -50%) scale(1);transform:translate(-50%, -50%) scale(1)}.jw-flag-touch .jw-slider-time::before{height:44px;width:100%;content:\\\"\\\";position:absolute;display:block;bottom:calc(100% - 17px);left:0}.jwplayer .jw-rightclick{display:none;position:absolute;white-space:nowrap}.jwplayer .jw-rightclick.jw-open{display:block}.jwplayer .jw-rightclick .jw-rightclick-list{border-radius:1px;list-style:none;margin:0;padding:0}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item{background-color:rgba(0,0,0,0.8);border-bottom:1px solid #444;margin:0}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item .jw-rightclick-logo{color:#fff;display:inline-flex;padding:0 10px 0 0;vertical-align:middle}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item .jw-rightclick-logo .jw-svg-icon{height:20px;width:20px}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item .jw-rightclick-link{border:none;color:#fff;display:block;font-size:11px;line-height:1em;padding:15px 23px;text-decoration:none}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item:last-child{border-bottom:none}.jwplayer .jw-rightclick .jw-rightclick-list .jw-rightclick-item:hover{cursor:pointer}.jwplayer .jw-rightclick .jw-rightclick-list .jw-featured{vertical-align:middle}.jwplayer .jw-rightclick .jw-rightclick-list .jw-featured .jw-rightclick-link{color:#d2d2d2}.jwplayer .jw-rightclick .jw-rightclick-list .jw-featured .jw-rightclick-link span{color:#fff}.jw-icon-tooltip.jw-open .jw-overlay{opacity:1;transition-delay:0s;visibility:visible}.jw-slider-time .jw-overlay:before{height:1em;top:auto}.jw-volume-tip{padding:13px 0 26px}.jw-time-tip,.jw-controlbar .jw-tooltip,.jw-settings-menu .jw-tooltip{height:auto;width:100%;box-shadow:0 0 10px rgba(0,0,0,0.4);color:#fff;display:block;margin:0 0 14px;pointer-events:none;position:relative;z-index:0}.jw-time-tip::after,.jw-controlbar .jw-tooltip::after,.jw-settings-menu .jw-tooltip::after{top:100%;position:absolute;left:50%;height:14px;width:14px;border-radius:1px;background-color:currentColor;-webkit-transform-origin:75% 50%;transform-origin:75% 50%;-webkit-transform:translate(-50%, -50%) rotate(45deg);transform:translate(-50%, -50%) rotate(45deg);z-index:-1}.jw-time-tip .jw-text,.jw-controlbar .jw-tooltip .jw-text,.jw-settings-menu .jw-tooltip .jw-text{background-color:#fff;border-radius:1px;color:#000;font-size:10px;height:auto;line-height:1;padding:7px 10px;display:inline-block;min-width:100%;vertical-align:middle}.jw-controlbar .jw-overlay{position:absolute;bottom:100%;left:50%;margin:0;min-height:44px;min-width:44px;opacity:0;transition:150ms cubic-bezier(0, -0.25, .25, 1);transition-property:opacity,visibility;transition-delay:0s,150ms;-webkit-transform:translate(-50%, 0);transform:translate(-50%, 0);visibility:hidden;width:100%;z-index:1}.jw-controlbar .jw-overlay .jw-contents{position:relative}.jw-controlbar .jw-option{position:relative;white-space:nowrap;cursor:pointer;list-style:none;height:1.5em;font-family:inherit;line-height:1.5em;padding:0 .5em;font-size:.8em;margin:0}.jw-controlbar .jw-option::before{padding-right:.125em}.jw-controlbar .jw-tooltip,.jw-settings-menu .jw-tooltip{position:absolute;bottom:100%;left:50%;opacity:0;-webkit-transform:translate(-50%, 0);transform:translate(-50%, 0);transition:100ms 0s cubic-bezier(0, -0.25, .25, 1);transition-property:opacity,visibility,-webkit-transform;transition-property:opacity,transform,visibility;transition-property:opacity,transform,visibility,-webkit-transform;visibility:hidden;white-space:nowrap;width:auto;z-index:1}.jw-controlbar .jw-tooltip.jw-open,.jw-settings-menu .jw-tooltip.jw-open,.jw-controlbar .jw-icon:focus>.jw-tooltip,.jw-settings-menu .jw-icon:focus>.jw-tooltip{opacity:1;-webkit-transform:translate(-50%, -10px);transform:translate(-50%, -10px);transition-duration:150ms;transition-delay:500ms,0s,500ms;visibility:visible}.jw-tooltip-time{height:auto;width:0;bottom:100%;line-height:normal;padding:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jw-tooltip-time .jw-overlay{bottom:0;min-height:0;width:auto}.jw-tooltip{bottom:57px;display:none;position:absolute}.jw-tooltip .jw-text{height:100%;white-space:nowrap;text-overflow:ellipsis;max-width:246px;overflow:hidden}.jw-flag-audio-player .jw-tooltip{display:none}.jw-flag-small-player .jw-time-thumb{display:none}.jw-skip{color:rgba(255,255,255,0.8);cursor:default;position:absolute;display:flex;right:.75em;bottom:56px;padding:.5em;border:1px solid #333;background-color:#000;align-items:center;height:2em}.jw-skip.jw-skippable{cursor:pointer;padding:.25em .75em}.jw-skip.jw-skippable:hover{cursor:pointer;color:#fff}.jw-skip.jw-skippable .jw-skip-icon{display:inline;height:24px;width:24px;margin:0}.jw-skip .jw-skip-icon{display:none;margin-left:-0.75em;padding:0 .5em}.jw-skip .jw-skip-icon .jw-svg-icon-next{display:block;padding:0}.jw-skip .jw-text,.jw-skip .jw-skip-icon{vertical-align:middle;font-size:.7em}.jw-skip .jw-text{font-weight:bold}.jw-cast{background-size:cover;display:none;height:100%;position:relative;width:100%}.jw-cast-container{background:linear-gradient(180deg, rgba(25,25,25,0.75), rgba(25,25,25,0.25), rgba(25,25,25,0));left:0;padding:20px 20px 80px;position:absolute;top:0;width:100%}.jw-cast-text{color:#fff;font-size:1.6em}.jw-breakpoint-0 .jw-cast-text{font-size:1.15em}.jw-breakpoint-1 .jw-cast-text,.jw-breakpoint-2 .jw-cast-text,.jw-breakpoint-3 .jw-cast-text{font-size:1.3em}.jw-nextup-container{position:absolute;bottom:66px;left:0;background-color:transparent;cursor:pointer;margin:0 auto;padding:12px;pointer-events:none;right:0;text-align:right;visibility:hidden;width:100%}.jw-flag-small-player .jw-nextup-container,.jw-settings-open .jw-nextup-container{display:none}.jw-nextup{background:#333;border-radius:0;box-shadow:0 0 10px rgba(0,0,0,0.5);color:rgba(255,255,255,0.8);display:inline-block;max-width:280px;overflow:hidden;opacity:0;position:relative;width:64%;pointer-events:all;-webkit-transform:translate(0, -5px);transform:translate(0, -5px);transition:150ms cubic-bezier(0, -0.25, .25, 1);transition-property:opacity,-webkit-transform;transition-property:opacity,transform;transition-property:opacity,transform,-webkit-transform;transition-delay:0s}.jw-nextup:hover .jw-nextup-tooltip{color:#fff}.jw-nextup.jw-nextup-thumbnail-visible{max-width:400px}.jw-nextup.jw-nextup-thumbnail-visible .jw-nextup-thumbnail{display:block}.jw-nextup-container-visible{visibility:visible}.jw-nextup-container-visible .jw-nextup{opacity:1;-webkit-transform:translate(0, 0);transform:translate(0, 0);transition-delay:0s,0s,150ms}.jw-nextup-tooltip{display:flex;height:80px}.jw-nextup-thumbnail{width:120px;background-position:center;background-size:cover;flex:0 0 auto;display:none}.jw-nextup-body{flex:1 1 auto;overflow:hidden;padding:.75em .875em;display:flex;flex-flow:column wrap;justify-content:space-between}.jw-nextup-header,.jw-nextup-title{font-size:14px;line-height:1.35}.jw-nextup-header{font-weight:bold}.jw-nextup-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.jw-nextup-duration{align-self:flex-end;text-align:right;font-size:12px}.jw-nextup-close{height:24px;width:24px;border:none;color:rgba(255,255,255,0.8);cursor:pointer;margin:6px;visibility:hidden}.jw-nextup-close:hover{color:#fff}.jw-nextup-sticky .jw-nextup-close{visibility:visible}.jw-autostart-mute{position:absolute;bottom:.5em;right:.5em;height:44px;width:44px;background-color:rgba(33,33,33,0.8);padding:5px 4px 5px 6px}.jwplayer.jw-flag-autostart:not(.jw-flag-media-audio):not(.jw-state-buffering):not(.jw-state-error):not(.jw-state-complete) .jw-display,.jwplayer.jw-flag-autostart:not(.jw-flag-media-audio) .jw-nextup{display:none}.jw-settings-menu{display:none;position:absolute;flex-flow:column nowrap;align-items:flex-start;right:12px;bottom:57px;max-width:284px;background-color:#333;pointer-events:auto}.jw-settings-open .jw-settings-menu{display:flex}.jw-breakpoint-7 .jw-settings-menu,.jw-breakpoint-6 .jw-settings-menu,.jw-breakpoint-5 .jw-settings-menu{height:232px;width:284px;max-height:232px}.jw-breakpoint-4 .jw-settings-menu,.jw-breakpoint-3 .jw-settings-menu{height:192px;width:284px;max-height:192px}.jw-breakpoint-2 .jw-settings-menu{height:179px;width:284px;max-height:179px}.jw-flag-small-player .jw-settings-menu{bottom:0;right:0;height:100%;width:100%;max-width:none}.jw-settings-menu .jw-icon.jw-button-color::after{height:100%;width:24px;box-shadow:inset 0 -3px 0 -1px currentColor;margin:auto;opacity:0;transition:opacity 150ms cubic-bezier(0, -0.25, .25, 1)}.jw-settings-menu .jw-icon.jw-button-color[aria-checked=\\\"true\\\"]::after{opacity:1}.jw-settings-topbar{display:flex;flex:0 0 auto;align-items:center;width:100%;background-color:rgba(0,0,0,0.4);padding:3px 5px 0}.jw-settings-topbar .jw-settings-close{margin-left:auto}.jw-settings-submenu{display:none;flex:1 1 auto;overflow-y:auto;padding:8px 20px 0 5px}.jw-settings-submenu.jw-settings-submenu-active{display:block}.jw-settings-submenu::-webkit-scrollbar{background-color:transparent;width:6px}.jw-settings-submenu::-webkit-scrollbar-thumb{background-color:#fff;border:1px solid #333;border-radius:6px}.jw-flag-touch .jw-settings-submenu{overflow-y:scroll;-webkit-overflow-scrolling:touch}.jw-settings-content-item{color:rgba(255,255,255,0.8);width:100%;font-size:12px;line-height:1;padding:7px 0 7px 15px;cursor:pointer}.jw-settings-content-item.jw-settings-item-active{color:#fff;font-weight:bold}.jw-settings-content-item:hover,.jw-settings-content-item:focus{color:#fff}.jw-settings-content-item:focus{outline:none}.jw-flag-small-player .jw-settings-content-item{line-height:1.75}.jw-breakpoint-2 .jw-settings-open .jw-display-container,.jw-flag-small-player .jw-settings-open .jw-display-container,.jw-flag-touch .jw-settings-open .jw-display-container{display:none}.jw-breakpoint-2 .jw-settings-open.jw-controls,.jw-flag-small-player .jw-settings-open.jw-controls,.jw-flag-touch .jw-settings-open.jw-controls{z-index:1}.jw-flag-small-player .jw-settings-open .jw-controlbar{display:none}.jw-settings-open .jw-icon-settings::after{opacity:1}.jw-settings-open .jw-tooltip-settings{display:none}.jw-sharing-link{cursor:pointer}.jw-state-idle:not(.jw-flag-cast-available) .jw-display{padding:0}.jw-state-idle .jw-controls{background:rgba(0,0,0,0.4)}.jw-state-idle.jw-flag-cast-available:not(.jw-flag-audio-player) .jw-controlbar .jw-slider-time,.jw-state-idle.jw-flag-cardboard-available .jw-controlbar .jw-slider-time,.jw-state-idle.jw-flag-cast-available:not(.jw-flag-audio-player) .jw-controlbar .jw-icon:not(.jw-icon-cardboard):not(.jw-icon-cast):not(.jw-icon-airplay),.jw-state-idle.jw-flag-cardboard-available .jw-controlbar .jw-icon:not(.jw-icon-cardboard):not(.jw-icon-cast):not(.jw-icon-airplay){display:none}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-icon{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-icon .jw-svg-icon-buffer{display:block}@-webkit-keyframes spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.jwplayer.jw-state-buffering .jw-icon-playback .jw-svg-icon-play{display:none}.jwplayer.jw-state-buffering .jw-icon-display .jw-svg-icon-pause{display:none}.jwplayer.jw-state-playing .jw-display .jw-icon-display .jw-svg-icon-play,.jwplayer.jw-state-playing .jw-icon-playback .jw-svg-icon-play{display:none}.jwplayer.jw-state-playing .jw-display .jw-icon-display .jw-svg-icon-pause,.jwplayer.jw-state-playing .jw-icon-playback .jw-svg-icon-pause{display:block}.jwplayer.jw-state-playing.jw-flag-user-inactive:not(.jw-flag-audio-player):not(.jw-flag-casting):not(.jw-flag-media-audio) .jw-controls-backdrop{opacity:0}.jwplayer.jw-state-playing.jw-flag-user-inactive:not(.jw-flag-audio-player):not(.jw-flag-casting):not(.jw-flag-media-audio) .jw-logo-bottom-left,.jwplayer.jw-state-playing.jw-flag-user-inactive:not(.jw-flag-audio-player):not(.jw-flag-casting):not(.jw-flag-media-audio):not(.jw-flag-autostart) .jw-logo-bottom-right{bottom:0}.jwplayer.jw-state-paused .jw-autostart-mute{display:none}.jwplayer.jw-state-paused .jw-svg-icon-pause,.jwplayer.jw-state-idle .jw-svg-icon-pause,.jwplayer.jw-state-error .jw-svg-icon-pause,.jwplayer.jw-state-complete .jw-svg-icon-pause{display:none}.jwplayer.jw-state-error .jw-icon-display .jw-svg-icon-play,.jwplayer.jw-state-complete .jw-icon-display .jw-svg-icon-play,.jwplayer.jw-state-buffering .jw-icon-display .jw-svg-icon-play{display:none}.jwplayer:not(.jw-state-buffering) .jw-svg-icon-buffer{display:none}.jwplayer:not(.jw-state-complete) .jw-svg-icon-replay{display:none}.jwplayer:not(.jw-state-error) .jw-svg-icon-error{display:none}.jwplayer.jw-state-complete .jw-display .jw-icon-display .jw-svg-icon-replay{display:block}.jwplayer.jw-state-complete .jw-display .jw-text{display:none}.jwplayer.jw-state-complete .jw-controls{background:rgba(0,0,0,0.4);height:100%}.jw-state-idle .jw-icon-display .jw-svg-icon-pause,.jwplayer.jw-state-paused .jw-icon-playback .jw-svg-icon-pause,.jwplayer.jw-state-paused .jw-icon-display .jw-svg-icon-pause,.jwplayer.jw-state-complete .jw-icon-playback .jw-svg-icon-pause{display:none}.jw-state-idle .jw-display-icon-rewind,.jwplayer.jw-state-buffering .jw-display-icon-rewind,.jwplayer.jw-state-complete .jw-display-icon-rewind,body .jw-error .jw-display-icon-rewind,body .jwplayer.jw-state-error .jw-display-icon-rewind,.jw-state-idle .jw-display-icon-next,.jwplayer.jw-state-buffering .jw-display-icon-next,.jwplayer.jw-state-complete .jw-display-icon-next,body .jw-error .jw-display-icon-next,body .jwplayer.jw-state-error .jw-display-icon-next{display:none}body .jw-error .jw-icon-display,body .jwplayer.jw-state-error .jw-icon-display{cursor:default}body .jw-error .jw-icon-display .jw-svg-icon-error,body .jwplayer.jw-state-error .jw-icon-display .jw-svg-icon-error{display:block}body .jw-error .jw-icon-container{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-preview{display:none}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title{padding-top:4px}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title-primary{width:auto;display:inline-block;padding-right:.5ch}body .jwplayer.jw-state-error.jw-flag-audio-player .jw-title-secondary{width:auto;display:inline-block;padding-left:0}body .jwplayer.jw-state-error .jw-controlbar,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-controlbar{display:none}body .jwplayer.jw-state-error .jw-settings-menu,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-settings-menu{height:100%;top:0;bottom:0}body .jwplayer.jw-state-error .jw-display,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-display{padding:0}body .jwplayer.jw-state-error .jw-logo-bottom-left,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-logo-bottom-left,body .jwplayer.jw-state-error .jw-logo-bottom-right,.jwplayer.jw-state-idle:not(.jw-flag-audio-player):not(.jw-flag-cast-available):not(.jw-flag-cardboard-available) .jw-logo-bottom-right{bottom:0}.jwplayer.jw-state-playing.jw-flag-user-inactive .jw-display{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-state-playing:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display,.jwplayer.jw-state-paused:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting):not(.jw-flag-play-rejected) .jw-display{display:none}.jwplayer.jw-state-paused.jw-flag-play-rejected:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display-icon-rewind,.jwplayer.jw-state-paused.jw-flag-play-rejected:not(.jw-flag-touch):not(.jw-flag-small-player):not(.jw-flag-casting) .jw-display-icon-next{display:none}.jwplayer.jw-state-buffering .jw-display-icon-display .jw-text,.jwplayer.jw-state-complete .jw-display .jw-text{display:none}.jwplayer.jw-flag-casting:not(.jw-flag-audio-player) .jw-cast{display:block}.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-display-icon-container{display:none}.jwplayer.jw-flag-casting .jw-icon-hd,.jwplayer.jw-flag-casting .jw-captions,.jwplayer.jw-flag-casting .jw-icon-fullscreen,.jwplayer.jw-flag-casting .jw-icon-audio-tracks{display:none}.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-icon-volume{display:none}.jwplayer.jw-flag-casting.jw-flag-airplay-casting .jw-icon-airplay{color:#fff}.jw-state-playing.jw-flag-casting:not(.jw-flag-audio-player) .jw-display,.jw-state-paused.jw-flag-casting:not(.jw-flag-audio-player) .jw-display{display:table}.jwplayer.jw-flag-cast-available .jw-icon-cast,.jwplayer.jw-flag-cast-available .jw-icon-airplay{display:flex}.jwplayer.jw-flag-cardboard-available .jw-icon-cardboard{display:flex}.jwplayer.jw-flag-live .jw-display-icon-rewind{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,.jwplayer.jw-flag-live .jw-controlbar .jw-text-countdown,.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt{display:flex}.jwplayer.jw-flag-live .jw-controlbar .jw-overlay:after{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-icon-live .jw-svg-icon-dvr{display:none}.jwplayer.jw-flag-live .jw-nextup-container{bottom:44px}.jwplayer.jw-flag-live .jw-text-elapsed,.jwplayer.jw-flag-live .jw-text-duration{display:none}.jwplayer.jw-flag-controls-hidden .jw-logo.jw-hide{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-flag-controls-hidden:not(.jw-flag-casting) .jw-logo-top-right{top:0}.jwplayer.jw-flag-controls-hidden .jw-plugin{bottom:.5em}.jwplayer.jw-flag-controls-hidden .jw-nextup-container{bottom:0}.jw-flag-controls-hidden .jw-controlbar,.jw-flag-controls-hidden .jw-display{visibility:hidden;pointer-events:none;opacity:0;transition-delay:0s,250ms}.jw-flag-controls-hidden .jw-controls-backdrop{opacity:0}.jw-flag-controls-hidden .jw-logo{visibility:visible}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-logo.jw-hide{visibility:hidden;pointer-events:none;opacity:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing:not(.jw-flag-casting) .jw-logo-top-right{top:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-plugin{bottom:.5em}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-nextup-container{bottom:0}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-captions{max-height:none}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing video::-webkit-media-text-track-container{max-height:none}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing .jw-media{cursor:none;-webkit-cursor-visibility:auto-hide}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-state-playing.jw-flag-casting .jw-display{display:table}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-flag-casting .jw-nextup-container{bottom:66px}.jwplayer.jw-flag-user-inactive:not(.jw-flag-media-audio).jw-flag-casting.jw-state-idle .jw-nextup-container{display:none}.jwplayer.jw-flag-media-audio .jw-autostart-mute{display:none}.jw-flag-media-audio .jw-preview{display:block}.jwplayer.jw-flag-ads .jw-preview,.jwplayer.jw-flag-ads .jw-logo,.jwplayer.jw-flag-ads .jw-captions.jw-captions-enabled,.jwplayer.jw-flag-ads .jw-nextup-container,.jwplayer.jw-flag-ads .jw-autostart-mute,.jwplayer.jw-flag-ads .jw-text-duration,.jwplayer.jw-flag-ads .jw-text-elapsed{display:none}.jwplayer.jw-flag-ads video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-rewind,.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-next,.jwplayer.jw-flag-ads.jw-flag-small-player .jw-display-icon-display{display:none}.jwplayer.jw-flag-ads.jw-flag-small-player.jw-state-buffering .jw-display-icon-display{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar{flex-wrap:wrap-reverse}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time{height:auto;padding:0;pointer-events:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-slider-container{height:5px}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-rail,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-knob,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-buffer,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-cue,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-icon-settings{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-time .jw-progress{-webkit-transform:none;transform:none;top:auto}.jwplayer.jw-flag-ads .jw-controlbar .jw-tooltip,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip:not(.jw-icon-volume),.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline:not(.jw-icon-playback):not(.jw-icon-fullscreen):not(.jw-icon-volume){display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-volume-tip{padding:13px 0}.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt{display:flex}.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid) .jw-controls .jw-controlbar,.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid).jw-flag-autostart .jw-controls .jw-controlbar{display:flex;pointer-events:all;visibility:visible;opacity:1}.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid).jw-flag-user-inactive .jw-controls-backdrop,.jwplayer.jw-flag-ads.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid).jw-flag-autostart.jw-flag-user-inactive .jw-controls-backdrop{opacity:1;background-size:100% 60px}.jwplayer.jw-flag-ads .jw-nextup-container{bottom:44px}.jwplayer.jw-flag-ads .jw-icon,.jwplayer.jw-flag-ads .jw-slider-horizontal{pointer-events:all}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar{font-size:1em}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display,.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display .jw-icon-display{pointer-events:none}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-controlbar .jw-icon{height:30px}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-icon-fullscreen{display:none}.jwplayer.jw-flag-ads-vpaid .jw-display-container,.jwplayer.jw-flag-touch.jw-flag-ads-vpaid .jw-display-container,.jwplayer.jw-flag-ads-vpaid .jw-skip,.jwplayer.jw-flag-touch.jw-flag-ads-vpaid .jw-skip{display:none}.jwplayer.jw-flag-ads-vpaid.jw-flag-small-player .jw-controls{background:none}.jwplayer.jw-flag-ads-vpaid.jw-flag-small-player .jw-controls::after{content:none}.jwplayer.jw-flag-ads-hide-controls .jw-controls-backdrop,.jwplayer.jw-flag-ads-hide-controls .jw-controls{display:none !important}.jw-flag-overlay-open-related .jw-controls,.jw-flag-overlay-open-related .jw-title,.jw-flag-overlay-open-related .jw-logo{display:none}.jwplayer.jw-flag-rightclick-open{overflow:visible}.jwplayer.jw-flag-rightclick-open .jw-rightclick{z-index:16777215}body .jwplayer.jw-flag-flash-blocked .jw-controls,body .jwplayer.jw-flag-flash-blocked .jw-overlays,body .jwplayer.jw-flag-flash-blocked .jw-controls-backdrop,body .jwplayer.jw-flag-flash-blocked .jw-preview{display:none}.jw-flag-touch.jw-breakpoint-7 .jw-captions,.jw-flag-touch.jw-breakpoint-6 .jw-captions,.jw-flag-touch.jw-breakpoint-5 .jw-captions,.jw-flag-touch.jw-breakpoint-4 .jw-captions,.jw-flag-touch.jw-breakpoint-7 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-6 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-5 .jw-nextup-container,.jw-flag-touch.jw-breakpoint-4 .jw-nextup-container{bottom:4.25em}.jw-flag-touch.jw-breakpoint-7 video::-webkit-media-text-track-container,.jw-flag-touch.jw-breakpoint-6 video::-webkit-media-text-track-container,.jw-flag-touch.jw-breakpoint-5 video::-webkit-media-text-track-container,.jw-flag-touch.jw-breakpoint-4 video::-webkit-media-text-track-container{max-height:calc(100% - 60px)}.jw-flag-touch .jw-controlbar .jw-icon-volume{display:flex}.jw-flag-touch .jw-display,.jw-flag-touch .jw-display-container,.jw-flag-touch .jw-display-controls{pointer-events:none}.jw-flag-touch.jw-state-paused:not(.jw-breakpoint-1) .jw-display-icon-next,.jw-flag-touch.jw-state-playing:not(.jw-breakpoint-1) .jw-display-icon-next,.jw-flag-touch.jw-state-paused:not(.jw-breakpoint-1) .jw-display-icon-rewind,.jw-flag-touch.jw-state-playing:not(.jw-breakpoint-1) .jw-display-icon-rewind{display:none}.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display{display:none}.jw-flag-audio-player{background-color:#000}.jw-flag-audio-player:not(.jw-flag-flash-blocked) .jw-media{visibility:hidden}.jw-flag-audio-player .jw-title{background:none}.jw-flag-audio-player object{min-height:44px}.jw-flag-audio-player .jw-preview,.jw-flag-audio-player .jw-display,.jw-flag-audio-player .jw-title,.jw-flag-audio-player .jw-nextup-container{display:none}.jw-flag-audio-player .jw-controlbar{position:relative}.jw-flag-audio-player .jw-controlbar .jw-button-container{padding-right:3px;padding-left:0}.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip,.jw-flag-audio-player .jw-controlbar .jw-icon-inline{display:none}.jw-flag-audio-player .jw-controlbar .jw-icon-volume:not(.jw-icon-tooltip),.jw-flag-audio-player .jw-controlbar .jw-icon-playback,.jw-flag-audio-player .jw-controlbar .jw-icon-next,.jw-flag-audio-player .jw-controlbar .jw-icon-rewind,.jw-flag-audio-player .jw-controlbar .jw-icon-cast,.jw-flag-audio-player .jw-controlbar .jw-icon-live,.jw-flag-audio-player .jw-controlbar .jw-icon-airplay,.jw-flag-audio-player .jw-controlbar .jw-logo-button,.jw-flag-audio-player .jw-controlbar .jw-text-elapsed,.jw-flag-audio-player .jw-controlbar .jw-text-duration{display:flex;flex:0 0 auto}.jw-flag-audio-player .jw-controlbar .jw-text-duration,.jw-flag-audio-player .jw-controlbar .jw-text-countdown{padding-right:10px}.jw-flag-audio-player .jw-controlbar .jw-slider-time{display:flex;flex:0 1 auto;align-items:center}.jw-flag-audio-player.jw-flag-small-player .jw-text-elapsed,.jw-flag-audio-player.jw-flag-small-player .jw-text-duration{display:none}.jw-flag-audio-player.jw-flag-ads .jw-slider-time{display:none}.jw-hidden{display:none}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/less-loader/dist/cjs.js?{\"compress\":true,\"strictMath\":true,\"noIeCompat\":true}!./src/css/controls.less\n// module id = 140\n// module chunks = 0 1 2 3 4","import _ from 'utils/underscore';\r\n\r\nconst supportedFields = [\r\n    'repeat',\r\n    'volume',\r\n    'mute',\r\n    'autostart'\r\n];\r\n\r\nfunction setAutoStart(model, controller, autoStart) {\r\n    model.setAutoStart(autoStart);\r\n\r\n    if (model.get('state') === 'idle' && autoStart === true) {\r\n        controller.play({ reason: 'autostart' });\r\n    }\r\n}\r\n\r\nexport default (controller, newConfig) => {\r\n    const model = controller._model;\r\n\r\n    if (!_.size(newConfig)) {\r\n        return;\r\n    }\r\n\r\n    supportedFields.forEach(field => {\r\n        const newValue = newConfig[field];\r\n\r\n        if (_.isUndefined(newValue)) {\r\n            return;\r\n        }\r\n\r\n        switch (field) {\r\n            case 'mute':\r\n                controller.setMute(newValue);\r\n                break;\r\n            case 'volume':\r\n                controller.setVolume(newValue);\r\n                break;\r\n            case 'autostart':\r\n                setAutoStart(model, controller, newValue);\r\n                break;\r\n            default:\r\n                model.set(field, newValue);\r\n        }\r\n    });\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/api/set-config.js","import { OS } from 'environment/environment';\r\nimport { STATE_BUFFERING, STATE_COMPLETE, STATE_PAUSED,\r\n    ERROR, MEDIA_META, MEDIA_TIME, MEDIA_COMPLETE,\r\n    PLAYLIST_ITEM, PLAYLIST_COMPLETE, INSTREAM_CLICK, AD_SKIPPED } from 'events/events';\r\nimport InstreamHtml5 from 'controller/instream-html5';\r\nimport InstreamFlash from 'controller/instream-flash';\r\nimport utils from 'utils/helpers';\r\nimport Events from 'utils/backbone.events';\r\nimport _ from 'utils/underscore';\r\n\r\nfunction chooseInstreamMethod(_model) {\r\n    var providerName = '';\r\n    var provider = _model.get('provider');\r\n    if (provider) {\r\n        providerName = provider.name;\r\n    }\r\n    if (providerName.indexOf('flash') >= 0) {\r\n        return InstreamFlash;\r\n    }\r\n\r\n    return InstreamHtml5;\r\n}\r\n\r\nvar _defaultOptions = {\r\n    skipoffset: null,\r\n    tag: null\r\n};\r\n\r\nvar InstreamAdapter = function(_controller, _model, _view) {\r\n    var InstreamMethod = chooseInstreamMethod(_model);\r\n    var _instream = new InstreamMethod(_controller, _model);\r\n\r\n    var _array;\r\n    var _arrayOptions;\r\n    var _arrayIndex = 0;\r\n    var _options = {};\r\n    var _oldpos;\r\n    var _olditem;\r\n    var _this = this;\r\n    var _skipAd = _instreamItemNext;\r\n\r\n    var _clickHandler = _.bind(function(evt) {\r\n        evt = evt || {};\r\n        evt.hasControls = !!_model.get('controls');\r\n\r\n        this.trigger(INSTREAM_CLICK, evt);\r\n\r\n        // toggle playback after click event\r\n        if (!_instream || !_instream._adModel) {\r\n            return;\r\n        }\r\n        if (_instream._adModel.get('state') === STATE_PAUSED) {\r\n            if (evt.hasControls) {\r\n                _instream.instreamPlay();\r\n            }\r\n        } else {\r\n            _instream.instreamPause();\r\n        }\r\n    }, this);\r\n\r\n    var _doubleClickHandler = _.bind(function() {\r\n        if (!_instream || !_instream._adModel) {\r\n            return;\r\n        }\r\n        if (_instream._adModel.get('state') === STATE_PAUSED) {\r\n            if (_model.get('controls')) {\r\n                _controller.setFullscreen();\r\n                _controller.play();\r\n            }\r\n        }\r\n    }, this);\r\n\r\n    this.type = 'instream';\r\n\r\n    this.init = function(sharedVideoTag) {\r\n        // Keep track of the original player state\r\n        const mediaElement = sharedVideoTag || _model.get('mediaElement');\r\n        _oldpos = _model.get('position');\r\n        _olditem = _model.get('playlist')[_model.get('item')];\r\n\r\n        _instream.on('all', _instreamForward, this);\r\n        _instream.on(MEDIA_TIME, _instreamTime, this);\r\n        _instream.on(MEDIA_COMPLETE, _instreamItemComplete, this);\r\n        _instream.init(mediaElement, _model.clone());\r\n\r\n        // Make sure the original player's provider stops broadcasting events (pseudo-lock...)\r\n        _controller.detachMedia();\r\n\r\n        // Let the element finish loading for mobile before calling pause\r\n        if (mediaElement) {\r\n            if (!mediaElement.paused) {\r\n                mediaElement.pause();\r\n            }\r\n            mediaElement.playbackRate = mediaElement.defaultPlaybackRate = 1;\r\n        }\r\n\r\n        if (_controller.checkBeforePlay() || (_oldpos === 0 && !_model.checkComplete())) {\r\n            // make sure video restarts after preroll\r\n            _oldpos = 0;\r\n        } else if (_model.checkComplete() || _model.get('state') === STATE_COMPLETE) {\r\n            _oldpos = null;\r\n        }\r\n\r\n        // Show instream state instead of normal player state\r\n        _model.set('adModel', _instream._adModel);\r\n        _view.setupInstream(_instream._adModel);\r\n        _instream._adModel.set('state', STATE_BUFFERING);\r\n\r\n        // don't trigger api play/pause on display click\r\n        if (_view.clickHandler()) {\r\n            _view.clickHandler().setAlternateClickHandlers(utils.noop, null);\r\n        }\r\n\r\n        this.setText(_model.get('localization').loadingAd);\r\n        return this;\r\n    };\r\n\r\n    function _loadNextItem() {\r\n        _arrayIndex++;\r\n        var item = _array[_arrayIndex];\r\n        var options;\r\n        if (_arrayOptions) {\r\n            options = _arrayOptions[_arrayIndex];\r\n        }\r\n        _this.loadItem(item, options);\r\n    }\r\n\r\n    function _instreamForward(type, data) {\r\n        if (type === 'complete') {\r\n            return;\r\n        }\r\n        data = data || {};\r\n\r\n        if (_options.tag && !data.tag) {\r\n            data.tag = _options.tag;\r\n        }\r\n\r\n        this.trigger(type, data);\r\n\r\n        if (type === 'mediaError' || type === 'error') {\r\n            if (_array && _arrayIndex + 1 < _array.length) {\r\n                _loadNextItem();\r\n            }\r\n        }\r\n    }\r\n\r\n    function _instreamTime(evt) {\r\n        _instream._adModel.set('duration', evt.duration);\r\n        _instream._adModel.set('position', evt.position);\r\n    }\r\n\r\n    function _instreamItemComplete(e) {\r\n        var data = {};\r\n        if (_options.tag) {\r\n            data.tag = _options.tag;\r\n        }\r\n        this.trigger(MEDIA_COMPLETE, data);\r\n        _instreamItemNext.call(this, e);\r\n    }\r\n\r\n    function _instreamItemNext(e) {\r\n        if (_array && _arrayIndex + 1 < _array.length) {\r\n            _loadNextItem();\r\n        } else {\r\n            // notify vast of breakEnd\r\n            this.trigger('adBreakEnd', {});\r\n            if (e.type === MEDIA_COMPLETE) {\r\n                // Dispatch playlist complete event for ad pods\r\n                this.trigger(PLAYLIST_COMPLETE, {});\r\n            }\r\n            this.destroy();\r\n        }\r\n    }\r\n\r\n    this.loadItem = function(item, options) {\r\n        if (!_instream) {\r\n            return;\r\n        }\r\n        if (OS.android && OS.version.major === 2 && OS.version.minor === 3) {\r\n            this.trigger({\r\n                type: ERROR,\r\n                message: 'Error loading instream: Cannot play instream on Android 2.3'\r\n            });\r\n            return;\r\n        }\r\n        // Copy the playlist item passed in and make sure it's formatted as a proper playlist item\r\n        let playlist = item;\r\n        if (_.isArray(item)) {\r\n            _array = item;\r\n            _arrayOptions = options;\r\n            item = _array[_arrayIndex];\r\n            if (_arrayOptions) {\r\n                options = _arrayOptions[_arrayIndex];\r\n            }\r\n        } else {\r\n            playlist = [item];\r\n        }\r\n\r\n        const adModel = _instream._adModel;\r\n        adModel.set('playlist', playlist);\r\n\r\n        _model.set('hideAdsControls', false);\r\n\r\n        // Dispatch playlist item event for ad pods\r\n        _this.trigger(PLAYLIST_ITEM, {\r\n            index: _arrayIndex,\r\n            item: item\r\n        });\r\n\r\n        _options = Object.assign({}, _defaultOptions, options);\r\n\r\n        _this.addClickHandler();\r\n\r\n        adModel.set('skipButton', false);\r\n\r\n        const playPromise = _instream.load(item);\r\n\r\n        const skipoffset = item.skipoffset || _options.skipoffset;\r\n        if (skipoffset) {\r\n            _this.setupSkipButton(skipoffset, _options);\r\n        }\r\n\r\n        return playPromise;\r\n    };\r\n\r\n    this.setupSkipButton = function(skipoffset, options, customNext) {\r\n        const adModel = _instream._adModel;\r\n        if (customNext) {\r\n            _skipAd = customNext;\r\n        } else {\r\n            _skipAd = _instreamItemNext;\r\n        }\r\n        adModel.set('skipMessage', options.skipMessage);\r\n        adModel.set('skipText', options.skipText);\r\n        adModel.set('skipOffset', skipoffset);\r\n        adModel.set('skipButton', false);\r\n        adModel.set('skipButton', true);\r\n    };\r\n\r\n    this.applyProviderListeners = function(provider) {\r\n        _instream.applyProviderListeners(provider);\r\n\r\n        this.addClickHandler();\r\n    };\r\n\r\n    this.play = function() {\r\n        _instream.instreamPlay();\r\n    };\r\n\r\n    this.pause = function() {\r\n        _instream.instreamPause();\r\n    };\r\n\r\n    this.addClickHandler = function() {\r\n        // start listening for ad click\r\n        if (_view.clickHandler()) {\r\n            _view.clickHandler().setAlternateClickHandlers(_clickHandler, _doubleClickHandler);\r\n        }\r\n\r\n        if (_instream) {\r\n            _instream.on(MEDIA_META, this.metaHandler, this);\r\n        }\r\n    };\r\n\r\n    this.skipAd = function(evt) {\r\n        var skipAdType = AD_SKIPPED;\r\n        this.trigger(skipAdType, evt);\r\n        _skipAd.call(this, {\r\n            type: skipAdType\r\n        });\r\n    };\r\n\r\n    /** Handle the MEDIA_META event **/\r\n    this.metaHandler = function (evt) {\r\n        // If we're getting video dimension metadata from the provider, allow the view to resize the media\r\n        if (evt.width && evt.height) {\r\n            _view.resizeMedia();\r\n        }\r\n    };\r\n\r\n    this.replacePlaylistItem = function(item) {\r\n        _model.set('playlistItem', item);\r\n    };\r\n\r\n    this.destroy = function() {\r\n        this.off();\r\n\r\n        _model.set('adModel', null);\r\n\r\n        if (_view.clickHandler()) {\r\n            _view.clickHandler().revertAlternateClickHandlers();\r\n        }\r\n\r\n        if (_instream) {\r\n            // Sync player state with ad for model \"change:state\" events to trigger\r\n            if (_instream._adModel) {\r\n                const adState = _instream._adModel.get('state');\r\n                _model.attributes.state = adState;\r\n            }\r\n\r\n            _model.off(null, null, _instream);\r\n            _instream.off(null, null, _this);\r\n            _instream.instreamDestroy();\r\n\r\n            // Must happen after instream.instreamDestroy()\r\n            _view.destroyInstream();\r\n\r\n            _instream = null;\r\n\r\n            // Player was destroyed\r\n            if (_model.attributes._destroyed) {\r\n                return;\r\n            }\r\n\r\n            // Re-attach the controller\r\n            _controller.attachMedia();\r\n\r\n            if (_oldpos === null) {\r\n                _model.stopVideo();\r\n            } else {\r\n                const mediaModelContext = _model.mediaModel;\r\n                const item = Object.assign({}, _olditem);\r\n                item.starttime = _oldpos;\r\n                _model.attributes.playlistItem = item;\r\n                _model.playVideo().catch(function(error) {\r\n                    if (mediaModelContext === _model.mediaModel) {\r\n                        _model.mediaController.trigger('error', {\r\n                            message: error.message\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    this.getState = function() {\r\n        if (_instream && _instream._adModel) {\r\n            return _instream._adModel.get('state');\r\n        }\r\n        // api expects false to know we aren't in instreamMode\r\n        return false;\r\n    };\r\n\r\n    this.setText = function(text) {\r\n        _view.setAltText(text ? text : '');\r\n    };\r\n\r\n    // This method is triggered by plugins which want to hide player controls\r\n    this.hide = function() {\r\n        _model.set('hideAdsControls', true);\r\n    };\r\n\r\n};\r\n\r\nObject.assign(InstreamAdapter.prototype, Events);\r\n\r\nexport default InstreamAdapter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/instream-adapter.js","import { STATE_PAUSED, STATE_PLAYING, ERROR, FULLSCREEN,\r\n    PLAYER_STATE, MEDIA_COMPLETE } from 'events/events';\r\nimport { OS } from 'environment/environment';\r\nimport Events from 'utils/backbone.events';\r\nimport changeStateEvent from 'events/change-state-event';\r\nimport Model from 'controller/model';\r\n\r\nconst InstreamHtml5 = function(_controller, _model) {\r\n    var _adModel;\r\n    var _currentProvider;\r\n    var _this = Object.assign(this, Events);\r\n\r\n    // Listen for player resize events\r\n    _controller.on(FULLSCREEN, function(data) {\r\n        this.trigger(FULLSCREEN, data);\r\n    }, _this);\r\n\r\n    /** ***************************************\r\n     *****  Public instream API methods  *****\r\n     *****************************************/\r\n\r\n    this.init = function(mediaElement) {\r\n        // Initialize the instream player's model copied from main player's model\r\n        const playerAttributes = _model.attributes;\r\n        const mediaModelContext = _model.mediaModel;\r\n        _adModel = new Model().setup({\r\n            id: playerAttributes.id,\r\n            volume: playerAttributes.volume,\r\n            fullscreen: playerAttributes.fullscreen,\r\n            instreamMode: true,\r\n            edition: playerAttributes.edition,\r\n            mediaContext: mediaModelContext,\r\n            mediaElement: mediaElement,\r\n            mediaSrc: mediaElement.src,\r\n            mute: playerAttributes.mute || playerAttributes.autostartMuted,\r\n            autostartMuted: playerAttributes.autostartMuted,\r\n            autostart: playerAttributes.autostart,\r\n            advertising: playerAttributes.advertising,\r\n            sdkplatform: playerAttributes.sdkplatform,\r\n            skipButton: false\r\n        });\r\n        if (!OS.mobile) {\r\n            _adModel.set('mediaContainer', _model.get('mediaContainer'));\r\n        }\r\n        _adModel.on('fullscreenchange', _nativeFullscreenHandler);\r\n        _adModel.on('change:state', changeStateEvent, _this);\r\n        _adModel.on(ERROR, function(data) {\r\n            _this.trigger(ERROR, data);\r\n        }, _this);\r\n        // Listen to media element for events that indicate src was reset or load() was called\r\n        _this.srcReset = function() {\r\n            mediaModelContext.srcReset();\r\n        };\r\n        mediaElement.addEventListener('abort', _this.srcReset);\r\n        mediaElement.addEventListener('emptied', _this.srcReset);\r\n        this._adModel = _adModel;\r\n    };\r\n\r\n    /** Load an instream item and initialize playback **/\r\n    _this.load = function() {\r\n        // Let the player media model know we're using it's video tag\r\n        _this.srcReset();\r\n\r\n        // Make sure it chooses a provider\r\n        _adModel.stopVideo();\r\n        _adModel.setItemIndex(0).then(() => {\r\n            if (!_adModel) {\r\n                return;\r\n            }\r\n            _checkProvider(_adModel.getVideo());\r\n        });\r\n        _checkProvider();\r\n\r\n        // Load the instream item\r\n        return _adModel.playVideo();\r\n    };\r\n\r\n    _this.applyProviderListeners = function(provider) {\r\n        // check provider after item change\r\n        _checkProvider(provider);\r\n\r\n        if (!provider) {\r\n            return;\r\n        }\r\n\r\n        // Match the main player's controls state\r\n        provider.off(ERROR);\r\n        provider.on(ERROR, function(data) {\r\n            this.trigger(ERROR, data);\r\n        }, _this);\r\n        _model.on('change:volume', function(data, value) {\r\n            provider.volume(value);\r\n        }, _this);\r\n        _model.on('change:mute', function(data, value) {\r\n            provider.mute(value);\r\n        }, _this);\r\n        _model.on('change:autostartMuted', function(data, value) {\r\n            if (!value) {\r\n                provider.mute(_model.get('mute'));\r\n            }\r\n        }, _this);\r\n    };\r\n\r\n    /** Stop the instream playback and revert the main player back to its original state **/\r\n    this.instreamDestroy = function() {\r\n        if (!_adModel) {\r\n            return;\r\n        }\r\n\r\n        _adModel.off();\r\n        if (_adModel.mediaModel) {\r\n            _adModel.mediaModel.off();\r\n        }\r\n\r\n        // We don't want the instream provider to be attached to the video tag anymore\r\n        this.off();\r\n        if (_currentProvider) {\r\n            _currentProvider.detachMedia();\r\n            _currentProvider.off();\r\n            if (_adModel.getVideo()) {\r\n                _currentProvider.destroy();\r\n            }\r\n        }\r\n\r\n        const mediaElement = _adModel.get('mediaElement');\r\n        mediaElement.removeEventListener('abort', _this.srcReset);\r\n        mediaElement.removeEventListener('emptied', _this.srcReset);\r\n\r\n        // Reset the player media model if the src was changed externally\r\n        const srcChanged = mediaElement.src !== _adModel.get('mediaSrc');\r\n        if (srcChanged) {\r\n            _model.mediaModel.srcReset();\r\n        }\r\n\r\n        // Return the view to its normal state\r\n        _adModel = null;\r\n\r\n        // Remove all callbacks for 'this' for all events\r\n        _controller.off(null, null, this);\r\n        _controller = null;\r\n    };\r\n\r\n    /** Start instream playback **/\r\n    _this.instreamPlay = function() {\r\n        if (!_adModel.getVideo()) {\r\n            return;\r\n        }\r\n        _adModel.getVideo().play();\r\n    };\r\n\r\n    /** Pause instream playback **/\r\n    _this.instreamPause = function() {\r\n        if (!_adModel.getVideo()) {\r\n            return;\r\n        }\r\n        _adModel.getVideo().pause();\r\n    };\r\n\r\n\r\n    /** ***************************\r\n     ****** Private methods ******\r\n     *****************************/\r\n\r\n    function _checkProvider(pseudoProvider) {\r\n        const provider = pseudoProvider || _adModel.getVideo();\r\n\r\n        // Clear current provider when applyProviderListeners(null) is called\r\n        _currentProvider = provider;\r\n\r\n        if (!provider) {\r\n            return;\r\n        }\r\n\r\n        var isVpaidProvider = provider.type === 'vpaid';\r\n\r\n        provider.off();\r\n        provider.on('all', function(type, data) {\r\n            if (isVpaidProvider && (type === MEDIA_COMPLETE)) {\r\n                return;\r\n            }\r\n            this.trigger(type, Object.assign({}, data, { type: type }));\r\n        }, _this);\r\n\r\n        const adMediaModelContext = _adModel.mediaModel;\r\n        provider.on(PLAYER_STATE, (event) => {\r\n            adMediaModelContext.set(PLAYER_STATE, event.newstate);\r\n        });\r\n        adMediaModelContext.on('change:' + PLAYER_STATE, (changeAdModel, state) => {\r\n            stateHandler(state);\r\n        });\r\n        provider.attachMedia();\r\n        provider.volume(_model.get('volume'));\r\n        provider.mute(_model.get('mute') || _model.get('autostartMuted'));\r\n        if (provider.setPlaybackRate) {\r\n            provider.setPlaybackRate(1);\r\n        }\r\n    }\r\n\r\n    function stateHandler(state) {\r\n        switch (state) {\r\n            case STATE_PLAYING:\r\n            case STATE_PAUSED:\r\n                _adModel.set(PLAYER_STATE, state);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    function _nativeFullscreenHandler(evt) {\r\n        _model.trigger(evt.type, evt);\r\n        _this.trigger(FULLSCREEN, {\r\n            fullscreen: evt.jwstate\r\n        });\r\n    }\r\n\r\n    return _this;\r\n};\r\n\r\nexport default InstreamHtml5;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/instream-html5.js","import { PLAYLIST_ITEM, MEDIA_PLAY_ATTEMPT, PROVIDER_FIRST_FRAME, MEDIA_TIME, MEDIA_FIRST_FRAME } from 'events/events';\r\nimport Timer from 'api/timer';\r\n\r\nconst TAB_HIDDEN = 'tabHidden';\r\nconst TAB_VISIBLE = 'tabVisible';\r\n\r\n// This is to provide a first frame event even when\r\n//  a provider does not give us one.\r\nconst onTimeIncreasesGenerator = (function(callback) {\r\n    let lastVal = 0;\r\n    return function (evt) {\r\n        const pos = evt.position;\r\n        if (pos > lastVal) {\r\n            callback();\r\n        }\r\n        // sometimes the number will wrap around (ie 100 down to 0)\r\n        //  so always update\r\n        lastVal = pos;\r\n    };\r\n});\r\n\r\nfunction unbindFirstFrameEvents(model) {\r\n    model.mediaController.off(MEDIA_PLAY_ATTEMPT, model._onPlayAttempt);\r\n    model.mediaController.off(PROVIDER_FIRST_FRAME, model._triggerFirstFrame);\r\n    model.mediaController.off(MEDIA_TIME, model._onTime);\r\n    model.off('change:activeTab', model._onTabVisible);\r\n}\r\n\r\nfunction trackFirstFrame(model) {\r\n    if (model._onTabVisible) {\r\n        unbindFirstFrameEvents(model);\r\n    }\r\n\r\n    // When it occurs, send the event, and unbind all listeners\r\n    let once = false;\r\n    model._triggerFirstFrame = function() {\r\n        if (once) {\r\n            return;\r\n        }\r\n        once = true;\r\n        const qoeItem = model._qoeItem;\r\n        qoeItem.tick(MEDIA_FIRST_FRAME);\r\n\r\n        const time = qoeItem.getFirstFrame();\r\n        model.mediaController.trigger(MEDIA_FIRST_FRAME, { loadTime: time });\r\n        unbindFirstFrameEvents(model);\r\n    };\r\n\r\n    model._onTime = onTimeIncreasesGenerator(model._triggerFirstFrame);\r\n\r\n    model._onPlayAttempt = function() {\r\n        model._qoeItem.tick(MEDIA_PLAY_ATTEMPT);\r\n    };\r\n\r\n    // track visibility change\r\n    model._onTabVisible = function(modelChanged, activeTab) {\r\n        if (activeTab) {\r\n            model._qoeItem.tick(TAB_VISIBLE);\r\n        } else {\r\n            model._qoeItem.tick(TAB_HIDDEN);\r\n        }\r\n    };\r\n\r\n    model.on('change:activeTab', model._onTabVisible);\r\n    model.mediaController.on(MEDIA_PLAY_ATTEMPT, model._onPlayAttempt);\r\n    model.mediaController.once(PROVIDER_FIRST_FRAME, model._triggerFirstFrame);\r\n    model.mediaController.on(MEDIA_TIME, model._onTime);\r\n}\r\n\r\nconst initQoe = function(initialModel) {\r\n    function onMediaModel(model, mediaModel, oldMediaModel) {\r\n        // finish previous item\r\n        if (model._qoeItem && oldMediaModel) {\r\n            model._qoeItem.end(oldMediaModel.get('state'));\r\n        }\r\n        // reset item level qoe\r\n        model._qoeItem = new Timer();\r\n        model._qoeItem.getFirstFrame = function() {\r\n            const time = this.between(MEDIA_PLAY_ATTEMPT, MEDIA_FIRST_FRAME);\r\n            // If time between the tab becoming visible and first frame is valid\r\n            // and less than the time since play attempt, play was not attempted until the tab became visible\r\n            const timeActive = this.between(TAB_VISIBLE, MEDIA_FIRST_FRAME);\r\n            if (timeActive > 0 && timeActive < time) {\r\n                return timeActive;\r\n            }\r\n            return time;\r\n        };\r\n        model._qoeItem.tick(PLAYLIST_ITEM);\r\n        model._qoeItem.start(mediaModel.get('state'));\r\n\r\n        trackFirstFrame(model);\r\n\r\n        mediaModel.on('change:state', function (changeMediaModel, newstate, oldstate) {\r\n            if (newstate !== oldstate) {\r\n                model._qoeItem.end(oldstate);\r\n                model._qoeItem.start(newstate);\r\n            }\r\n        });\r\n    }\r\n\r\n    initialModel.on('change:mediaModel', onMediaModel);\r\n};\r\n\r\nexport default initQoe;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/qoe.js","import { Browser } from 'environment/environment';\r\nimport { STATE_BUFFERING, STATE_PAUSED, STATE_PLAYING, PLAYER_STATE, MEDIA_COMPLETE, MEDIA_TIME, MEDIA_ERROR } from 'events/events';\r\nimport Events from 'utils/backbone.events';\r\nimport Model from 'controller/model';\r\nimport changeStateEvent from 'events/change-state-event';\r\nimport { resolved } from 'polyfills/promise';\r\n\r\nconst InstreamFlash = function(_controller, _model) {\r\n    this.model = _model;\r\n\r\n    this._adModel = new Model().setup({\r\n        id: _model.get('id'),\r\n        volume: _model.get('volume'),\r\n        fullscreen: _model.get('fullscreen'),\r\n        mute: _model.get('mute')\r\n    });\r\n\r\n    this._adModel.on('change:state', changeStateEvent, this);\r\n\r\n    var container = _controller.getContainer();\r\n    this.swf = container.querySelector('object');\r\n};\r\n\r\nObject.assign(InstreamFlash.prototype, {\r\n\r\n    init: function() {\r\n        // Pause playback when throttled, and only resume is paused here\r\n        if (Browser.chrome) {\r\n            var _throttleTimeout = -1;\r\n            var _throttlePaused = false;\r\n            this.swf.on('throttle', function(e) {\r\n                clearTimeout(_throttleTimeout);\r\n\r\n                if (e.state === 'resume') {\r\n                    if (_throttlePaused) {\r\n                        _throttlePaused = false;\r\n                        this.instreamPlay();\r\n                    }\r\n                } else {\r\n                    var _this = this;\r\n                    _throttleTimeout = setTimeout(function () {\r\n                        if (_this._adModel.get('state') === STATE_PLAYING) {\r\n                            _throttlePaused = true;\r\n                            _this.instreamPause();\r\n                        }\r\n                    }, 250);\r\n                }\r\n            }, this);\r\n        }\r\n\r\n        this.swf.on('instream:state', this.stateHandler, this)\r\n            .on('instream:time', function(evt) {\r\n                this._adModel.set('position', evt.position);\r\n                this._adModel.set('duration', evt.duration);\r\n                this.trigger(MEDIA_TIME, evt);\r\n            }, this)\r\n            .on('instream:complete', function(evt) {\r\n                this.trigger(MEDIA_COMPLETE, evt);\r\n            }, this)\r\n            .on('instream:error', function(evt) {\r\n                this.trigger(MEDIA_ERROR, evt);\r\n            }, this);\r\n\r\n        this.swf.triggerFlash('instream:init');\r\n\r\n        this.applyProviderListeners = function(provider) {\r\n            if (!provider) {\r\n                return;\r\n            }\r\n            this.model.on('change:volume', function(data, value) {\r\n                provider.volume(value);\r\n            }, this);\r\n            this.model.on('change:mute', function(data, value) {\r\n                provider.mute(value);\r\n            }, this);\r\n\r\n            provider.volume(this.model.get('volume'));\r\n            provider.mute(this.model.get('mute'));\r\n\r\n            // update admodel state when set from googima\r\n            provider.off();\r\n            provider.on(PLAYER_STATE, this.stateHandler, this);\r\n\r\n            // trigger time evemt when sent from freewheel\r\n            provider.on(MEDIA_TIME, function(data) {\r\n                this.trigger(MEDIA_TIME, data);\r\n            }, this);\r\n        };\r\n    },\r\n\r\n    stateHandler: function(evt) {\r\n        switch (evt.newstate) {\r\n            case STATE_PLAYING:\r\n            case STATE_PAUSED:\r\n                this._adModel.set('state', evt.newstate);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    instreamDestroy: function() {\r\n        if (!this._adModel) {\r\n            return;\r\n        }\r\n\r\n        this.off();\r\n\r\n        this.swf.off(null, null, this);\r\n        this.swf.triggerFlash('instream:destroy');\r\n        this.swf = null;\r\n\r\n        this._adModel.off();\r\n        this._adModel = null;\r\n\r\n        this.model = null;\r\n    },\r\n\r\n    load: function(item) {\r\n        this._adModel.set('state', STATE_BUFFERING);\r\n        // Show the instream layer\r\n        this.swf.triggerFlash('instream:load', item);\r\n        return resolved;\r\n    },\r\n\r\n    instreamPlay: function() {\r\n        this.swf.triggerFlash('instream:play');\r\n    },\r\n\r\n    instreamPause: function() {\r\n        this.swf.triggerFlash('instream:pause');\r\n    }\r\n\r\n}, Events);\r\n\r\nexport default InstreamFlash;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/instream-flash.js","import { loadFile } from 'controller/tracks-loader';\r\nimport { createId, createLabel } from 'controller/tracks-helper';\r\nimport Events from 'utils/backbone.events';\r\nimport { ERROR } from 'events/events';\r\n\r\n\r\n/** Displays closed captions or subtitles on top of the video. **/\r\nconst Captions = function(_model) {\r\n\r\n    // Reset and load external captions on playlist item\r\n    _model.on('change:playlistItem', _itemHandler, this);\r\n\r\n    // Listen for captions menu index changes from the view\r\n    _model.on('change:captionsIndex', _captionsIndexHandler, this);\r\n\r\n    // Listen for item ready to determine which provider is in use\r\n    _model.on('itemReady', _itemReadyHandler, this);\r\n\r\n    // Listen for provider subtitle tracks\r\n    //   ignoring provider \"subtitlesTrackChanged\" since index should be managed here\r\n    _model.mediaController.on('subtitlesTracks', _subtitlesTracksHandler, this);\r\n\r\n    function _subtitlesTracksHandler(e) {\r\n        if (!e.tracks.length) {\r\n            return;\r\n        }\r\n\r\n        const tracks = e.tracks || [];\r\n        for (let i = 0; i < tracks.length; i++) {\r\n            _addTrack(tracks[i]);\r\n        }\r\n\r\n        // To avoid duplicate tracks in the menu when we reuse an _id, regenerate the tracks array\r\n        _tracks = Object.keys(_tracksById).map(id => _tracksById[id]);\r\n\r\n        const captionsMenu = _captionsMenu();\r\n        _selectDefaultIndex();\r\n        this.setCaptionsList(captionsMenu);\r\n    }\r\n\r\n    let _tracks = [];\r\n    let _tracksById = {};\r\n    let _unknownCount = 0;\r\n\r\n    /** Listen to playlist item updates. **/\r\n    function _itemHandler() {\r\n        _tracks = [];\r\n        _tracksById = {};\r\n        _unknownCount = 0;\r\n    }\r\n\r\n    function _itemReadyHandler(item) {\r\n        // Clean up in case we're replaying\r\n        _itemHandler(_model, item);\r\n\r\n        const tracks = item.tracks;\r\n        const len = tracks && tracks.length;\r\n\r\n        // Sideload tracks when not rendering natively\r\n        if (!_model.get('renderCaptionsNatively') && len) {\r\n            for (let i = 0; i < len; i++) {\r\n                /* eslint-disable no-loop-func */\r\n                const track = tracks[i];\r\n                if (_kindSupported(track.kind) && !_tracksById[track._id]) {\r\n                    _addTrack(track);\r\n                    loadFile(track,\r\n                        (vttCues) => {\r\n                            _addVTTCuesToTrack(track, vttCues);\r\n                        },\r\n                        (error) => {\r\n                            this.trigger(ERROR, {\r\n                                message: 'Captions failed to load',\r\n                                reason: error\r\n                            });\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        const captionsMenu = _captionsMenu();\r\n        _selectDefaultIndex();\r\n        this.setCaptionsList(captionsMenu);\r\n    }\r\n\r\n    function _kindSupported(kind) {\r\n        return kind === 'subtitles' || kind === 'captions';\r\n    }\r\n\r\n    function _addVTTCuesToTrack(track, vttCues) {\r\n        track.data = vttCues;\r\n    }\r\n\r\n    function _captionsIndexHandler(model, captionsMenuIndex) {\r\n        let track = null;\r\n        if (captionsMenuIndex !== 0) {\r\n            track = _tracks[captionsMenuIndex - 1];\r\n        }\r\n        model.set('captionsTrack', track);\r\n    }\r\n\r\n    function _addTrack(track) {\r\n        track.data = track.data || [];\r\n        track.name = track.label || track.name || track.language;\r\n        track._id = createId(track, _tracks.length);\r\n\r\n        if (!track.name) {\r\n            const labelInfo = createLabel(track, _unknownCount);\r\n            track.name = labelInfo.label;\r\n            _unknownCount = labelInfo.unknownCount;\r\n        }\r\n\r\n        // During the same playlist we may reu and readd tracks with the same _id; allow the new track to replace the old\r\n        _tracksById[track._id] = track;\r\n        _tracks.push(track);\r\n    }\r\n\r\n    function _captionsMenu() {\r\n        const list = [{\r\n            id: 'off',\r\n            label: 'Off'\r\n        }];\r\n        for (let i = 0; i < _tracks.length; i++) {\r\n            list.push({\r\n                id: _tracks[i]._id,\r\n                label: _tracks[i].name || 'Unknown CC'\r\n            });\r\n        }\r\n        return list;\r\n    }\r\n\r\n    function _selectDefaultIndex() {\r\n        let captionsMenuIndex = 0;\r\n        const label = _model.get('captionLabel');\r\n\r\n        // Because there is no explicit track for \"Off\"\r\n        //  it is the implied zeroth track\r\n        if (label === 'Off') {\r\n            _model.set('captionsIndex', 0);\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < _tracks.length; i++) {\r\n            const track = _tracks[i];\r\n            if (label && label === track.name) {\r\n                captionsMenuIndex = i + 1;\r\n                break;\r\n            } else if (track.default || track.defaulttrack || track._id === 'default') {\r\n                captionsMenuIndex = i + 1;\r\n            } else if (track.autoselect) {\r\n                // TODO: auto select track by comparing track.language to system lang\r\n            }\r\n        }\r\n        // set the index without the side effect of storing the Off label in _selectCaptions\r\n        _setCurrentIndex(captionsMenuIndex);\r\n    }\r\n\r\n    function _setCurrentIndex (index) {\r\n        if (_tracks.length) {\r\n            _model.setVideoSubtitleTrack(index, _tracks);\r\n        } else {\r\n            _model.set('captionsIndex', index);\r\n        }\r\n    }\r\n\r\n    this.getCurrentIndex = function() {\r\n        return _model.get('captionsIndex');\r\n    };\r\n\r\n    this.getCaptionsList = function() {\r\n        return _model.get('captionsList');\r\n    };\r\n\r\n    this.setCaptionsList = function(captionsMenu) {\r\n        _model.set('captionsList', captionsMenu);\r\n    };\r\n\r\n    this.destroy = function() {\r\n        this.off(null, null, this);\r\n    };\r\n};\r\n\r\nObject.assign(Captions.prototype, Events);\r\n\r\nexport default Captions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/captions.js","import playerTemplate from 'templates/player';\r\nimport ErrorContainer from 'view/error-container';\r\nimport { isAudioMode, CONTROLBAR_ONLY_HEIGHT } from 'view/utils/audio-mode';\r\nimport viewsManager from 'view/utils/views-manager';\r\nimport getVisibility from 'view/utils/visibility';\r\nimport activeTab from 'utils/active-tab';\r\nimport { requestAnimationFrame, cancelAnimationFrame } from 'utils/request-animation-frame';\r\nimport { getBreakpoint, setBreakpoint } from 'view/utils/breakpoint';\r\nimport { normalizeSkin, handleColorOverrides } from 'view/utils/skin';\r\nimport { Browser, OS, Features } from 'environment/environment';\r\nimport * as ControlsLoader from 'controller/controls-loader';\r\nimport { STATE_BUFFERING, STATE_IDLE, STATE_COMPLETE, STATE_PAUSED, STATE_PLAYING, STATE_ERROR, RESIZE, BREAKPOINT,\r\n    DISPLAY_CLICK, LOGO_CLICK, ERROR } from 'events/events';\r\nimport Events from 'utils/backbone.events';\r\nimport {\r\n    addClass,\r\n    hasClass,\r\n    removeClass,\r\n    replaceClass,\r\n    toggleClass,\r\n    createElement,\r\n    bounds,\r\n} from 'utils/dom';\r\nimport {\r\n    clearCss,\r\n    style,\r\n} from 'utils/css';\r\nimport _ from 'utils/underscore';\r\nimport requestFullscreenHelper from 'view/utils/request-fullscreen-helper';\r\nimport flagNoFocus from 'view/utils/flag-no-focus';\r\nimport ClickHandler from 'view/utils/clickhandler';\r\nimport CaptionsRenderer from 'view/captionsrenderer';\r\nimport Logo from 'view/logo';\r\nimport Preview from 'view/preview';\r\nimport Title from 'view/title';\r\n\r\nrequire('css/jwplayer.less');\r\n\r\nlet ControlsModule;\r\n\r\nconst _isMobile = OS.mobile;\r\nconst _isIE = Browser.ie;\r\n\r\nfunction View(_api, _model) {\r\n    const _this = Object.assign(this, Events, {\r\n        isSetup: false,\r\n        api: _api,\r\n        model: _model\r\n    });\r\n\r\n    // init/reset view model properties\r\n    Object.assign(_model.attributes, {\r\n        containerWidth: undefined,\r\n        containerHeight: undefined,\r\n        mediaContainer: undefined,\r\n        fullscreen: false,\r\n        inDom: undefined,\r\n        iFrame: undefined,\r\n        activeTab: undefined,\r\n        intersectionRatio: undefined,\r\n        visibility: undefined,\r\n        viewable: undefined,\r\n        viewSetup: false,\r\n        audioMode: undefined,\r\n        touchMode: undefined,\r\n        altText: '',\r\n        cues: undefined,\r\n        castClicked: false,\r\n        scrubbing: false,\r\n        logoWidth: 0,\r\n    });\r\n\r\n    const _playerElement = createElement(playerTemplate(_model.get('id'), _model.get('localization').player));\r\n    const _videoLayer = _playerElement.querySelector('.jw-media');\r\n\r\n    const _preview = new Preview(_model);\r\n    const _title = new Title(_model);\r\n\r\n    let _captionsRenderer = new CaptionsRenderer(_model);\r\n    _captionsRenderer.on('all', _this.trigger, _this);\r\n\r\n    let _logo;\r\n\r\n    let _playerState;\r\n\r\n    let _lastWidth;\r\n    let _lastHeight;\r\n\r\n    let _instreamModel;\r\n\r\n    let _resizeMediaTimeout = -1;\r\n    let _resizeContainerRequestId = -1;\r\n    let _stateClassRequestId = -1;\r\n\r\n    let displayClickHandler;\r\n    let fullscreenHelpers;\r\n    let focusHelper;\r\n\r\n    let _breakpoint = null;\r\n    let _controls;\r\n\r\n    function reasonInteraction() {\r\n        return { reason: 'interaction' };\r\n    }\r\n\r\n    this.updateBounds = function () {\r\n        cancelAnimationFrame(_resizeContainerRequestId);\r\n        const inDOM = document.body.contains(_playerElement);\r\n        const rect = bounds(_playerElement);\r\n        const containerWidth = Math.round(rect.width);\r\n        const containerHeight = Math.round(rect.height);\r\n\r\n        // If the container is the same size as before, return early\r\n        if (containerWidth === _lastWidth && containerHeight === _lastHeight) {\r\n            // Listen for player to be added to DOM\r\n            if (!_lastWidth || !_lastHeight) {\r\n                _responsiveListener();\r\n            }\r\n            _model.set('inDom', inDOM);\r\n            return;\r\n        }\r\n        // If we have bad values for either dimension, return early\r\n        if (!containerWidth || !containerHeight) {\r\n            // If we haven't established player size, try again\r\n            if (!_lastWidth || !_lastHeight) {\r\n                _responsiveListener();\r\n            }\r\n        }\r\n\r\n        // Don't update container dimensions to 0, 0 when not in DOM\r\n        if (containerWidth || containerHeight || inDOM) {\r\n            _model.set('containerWidth', containerWidth);\r\n            _model.set('containerHeight', containerHeight);\r\n        }\r\n        _model.set('inDom', inDOM);\r\n\r\n        if (inDOM) {\r\n            viewsManager.observe(_playerElement);\r\n        }\r\n    };\r\n\r\n    this.updateStyles = function() {\r\n        const containerWidth = _model.get('containerWidth');\r\n        const containerHeight = _model.get('containerHeight');\r\n\r\n        if (_model.get('controls')) {\r\n            updateContainerStyles(containerWidth, containerHeight);\r\n        }\r\n\r\n        if (_controls) {\r\n            _controls.resize(containerWidth, containerHeight);\r\n        }\r\n\r\n        _resizeMedia(containerWidth, containerHeight);\r\n        _captionsRenderer.resize();\r\n    };\r\n\r\n    this.checkResized = function() {\r\n        const containerWidth = _model.get('containerWidth');\r\n        const containerHeight = _model.get('containerHeight');\r\n        if (containerWidth !== _lastWidth || containerHeight !== _lastHeight) {\r\n            _lastWidth = containerWidth;\r\n            _lastHeight = containerHeight;\r\n            _this.trigger(RESIZE, {\r\n                width: containerWidth,\r\n                height: containerHeight\r\n            });\r\n            const breakpoint = getBreakpoint(containerWidth);\r\n            if (_breakpoint !== breakpoint) {\r\n                _breakpoint = breakpoint;\r\n                _this.trigger(BREAKPOINT, {\r\n                    breakpoint: _breakpoint\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    function _responsiveListener() {\r\n        cancelAnimationFrame(_resizeContainerRequestId);\r\n        _resizeContainerRequestId = requestAnimationFrame(_responsiveUpdate);\r\n    }\r\n\r\n    function _responsiveUpdate() {\r\n        if (!_this.isSetup) {\r\n            return;\r\n        }\r\n        _this.updateBounds();\r\n        _this.updateStyles();\r\n        _this.checkResized();\r\n    }\r\n\r\n    function updateContainerStyles(width, height) {\r\n        const audioMode = isAudioMode(_model);\r\n        // Set timeslider flags\r\n        if (_.isNumber(width) && _.isNumber(height)) {\r\n            const breakpoint = getBreakpoint(width);\r\n            setBreakpoint(_playerElement, breakpoint);\r\n\r\n            const smallPlayer = breakpoint < 2;\r\n            toggleClass(_playerElement, 'jw-flag-small-player', smallPlayer);\r\n            toggleClass(_playerElement, 'jw-orientation-portrait', (height > width));\r\n        }\r\n        toggleClass(_playerElement, 'jw-flag-audio-player', audioMode);\r\n        _model.set('audioMode', audioMode);\r\n    }\r\n\r\n    this.setup = function () {\r\n        _preview.setup(_playerElement.querySelector('.jw-preview'));\r\n        _title.setup(_playerElement.querySelector('.jw-title'));\r\n\r\n        _logo = new Logo(_model);\r\n        _logo.setup();\r\n        _logo.setContainer(_playerElement);\r\n        _logo.on(LOGO_CLICK, _logoClickHandler);\r\n\r\n        // captions rendering\r\n        _captionsRenderer.setup(_playerElement.id, _model.get('captions'));\r\n\r\n        // captions should be placed behind controls, and not hidden when controls are hidden\r\n        _playerElement.insertBefore(_captionsRenderer.element(), _title.element());\r\n\r\n        // Display Click and Double Click Handling\r\n        displayClickHandler = clickHandlerHelper(_api, _model, _videoLayer);\r\n\r\n        focusHelper = flagNoFocus(_playerElement);\r\n        fullscreenHelpers = requestFullscreenHelper(_playerElement, document, _fullscreenChangeHandler);\r\n\r\n        _model.on('change:errorEvent', _errorHandler);\r\n        _model.on('change:hideAdsControls', function (model, val) {\r\n            toggleClass(_playerElement, 'jw-flag-ads-hide-controls', val);\r\n        });\r\n        _model.on('change:scrubbing', function (model, val) {\r\n            toggleClass(_playerElement, 'jw-flag-dragging', val);\r\n        });\r\n        _model.on('change:playRejected', function (model, val) {\r\n            toggleClass(_playerElement, 'jw-flag-play-rejected', val);\r\n        });\r\n\r\n        // Native fullscreen (coming through from the provider)\r\n        _model.mediaController.on('fullscreenchange', _fullscreenChangeHandler);\r\n\r\n        _model.change('mediaModel', (model, mediaModel) => {\r\n            mediaModel.change('mediaType', _onMediaTypeChange, this);\r\n            mediaModel.on('change:visualQuality', () => {\r\n                _resizeMedia();\r\n            }, this);\r\n        });\r\n        _model.change('stretching', onStretchChange);\r\n        _model.change('flashBlocked', onFlashBlockedChange);\r\n\r\n        const width = _model.get('width');\r\n        const height = _model.get('height');\r\n        _resizePlayer(width, height);\r\n        _model.change('aspectratio', onAspectRatioChange);\r\n        if (_model.get('controls')) {\r\n            updateContainerStyles(width, height);\r\n        } else {\r\n            addClass(_playerElement, 'jw-flag-controls-hidden');\r\n        }\r\n\r\n        if (_isIE) {\r\n            addClass(_playerElement, 'jw-ie');\r\n        }\r\n\r\n        const skin = _model.get('skin') || {};\r\n\r\n        if (skin.name) {\r\n            replaceClass(_playerElement, /jw-skin-\\S+/, 'jw-skin-' + skin.name);\r\n        }\r\n\r\n        const skinColors = normalizeSkin(skin);\r\n        handleColorOverrides(_model.get('id'), skinColors);\r\n\r\n        // adds video tag to video layer\r\n        _model.set('mediaContainer', _videoLayer);\r\n        _model.set('iFrame', Features.iframe);\r\n        _model.set('activeTab', activeTab());\r\n        _model.set('touchMode', _isMobile && (typeof height === 'string' || height >= CONTROLBAR_ONLY_HEIGHT));\r\n\r\n        viewsManager.add(this);\r\n\r\n        this.isSetup = true;\r\n        _model.set('viewSetup', true);\r\n\r\n        const inDOM = document.body.contains(_playerElement);\r\n        if (inDOM) {\r\n            viewsManager.observe(_playerElement);\r\n        }\r\n        _model.set('inDom', inDOM);\r\n    };\r\n\r\n    function updateVisibility() {\r\n        _model.set('visibility', getVisibility(_model, _playerElement));\r\n    }\r\n\r\n    this.init = function() {\r\n        this.updateBounds();\r\n\r\n        _model.on('change:fullscreen', _fullscreen);\r\n        _model.on('change:activeTab', updateVisibility);\r\n        _model.on('change:fullscreen', updateVisibility);\r\n        _model.on('change:intersectionRatio', updateVisibility);\r\n        _model.on('change:visibility', redraw);\r\n\r\n        updateVisibility();\r\n\r\n        // Always draw first player for icons to load\r\n        if (viewsManager.size() === 1 && !_model.get('visibility')) {\r\n            redraw(_model, 1, 0);\r\n        }\r\n\r\n        _model.change('state', _stateHandler);\r\n        _model.change('controls', changeControls);\r\n        // Set the title attribute of the video tag to display background media information on mobile devices\r\n        if (_isMobile) {\r\n            setMediaTitleAttribute(_model.get('playlistItem'));\r\n            _model.on('itemReady', setMediaTitleAttribute);\r\n        }\r\n\r\n        // Triggering 'resize' resulting in player 'ready'\r\n        _lastWidth = _lastHeight = null;\r\n        this.checkResized();\r\n    };\r\n\r\n    function changeControls(model, enable) {\r\n        if (enable) {\r\n            ControlsModule = ControlsLoader.module.controls;\r\n            if (!ControlsModule) {\r\n                ControlsLoader.load()\r\n                    .then(function (Controls) {\r\n                        ControlsModule = Controls;\r\n                        addControls();\r\n                    })\r\n                    .catch(function (reason) {\r\n                        _this.trigger(ERROR, {\r\n                            message: 'Controls failed to load',\r\n                            reason: reason\r\n                        });\r\n                    });\r\n            } else {\r\n                addControls();\r\n            }\r\n        } else {\r\n            _this.removeControls();\r\n        }\r\n    }\r\n\r\n    function addControls() {\r\n        const controls = new ControlsModule(document, _this.element());\r\n        _this.addControls(controls);\r\n    }\r\n\r\n    function setMediaTitleAttribute(item) {\r\n        var videotag = _videoLayer.querySelector('video, audio');\r\n        // chromecast and flash providers do no support video tags\r\n        if (!videotag) {\r\n            return;\r\n        }\r\n\r\n        // Writing a string to innerHTML completely decodes multiple-encoded strings\r\n        const dummyDiv = document.createElement('div');\r\n        dummyDiv.innerHTML = item.title || '';\r\n        videotag.setAttribute('title', dummyDiv.textContent);\r\n    }\r\n\r\n    function redraw(model, visibility, lastVisibility) {\r\n        if (visibility && !lastVisibility) {\r\n            _stateHandler(_instreamModel || model);\r\n            _this.updateStyles();\r\n        }\r\n    }\r\n\r\n    function clickHandlerHelper(api, model, videoLayer) {\r\n        const clickHandler = new ClickHandler(model, videoLayer, { useHover: true });\r\n        const controls = _model.get('controls');\r\n        clickHandler.on({\r\n            click: () => {\r\n                _this.trigger(DISPLAY_CLICK);\r\n\r\n                if (_controls) {\r\n                    if (settingsMenuVisible()) {\r\n                        _controls.settingsMenu.close();\r\n                    } else {\r\n                        api.playToggle(reasonInteraction());\r\n                    }\r\n                }\r\n            },\r\n            tap: () => {\r\n                _this.trigger(DISPLAY_CLICK);\r\n                if (settingsMenuVisible()) {\r\n                    _controls.settingsMenu.close();\r\n                }\r\n                const state = model.get('state');\r\n\r\n                if (controls &&\r\n                    ((state === STATE_IDLE || state === STATE_COMPLETE) ||\r\n                    (_instreamModel && _instreamModel.get('state') === STATE_PAUSED))) {\r\n                    api.playToggle(reasonInteraction());\r\n                }\r\n\r\n                if (controls && state === STATE_PAUSED) {\r\n                    // Toggle visibility of the controls when tapping the media\r\n                    // Do not add mobile toggle \"jw-flag-controls-hidden\" in these cases\r\n                    if (_instreamModel ||\r\n                        model.get('castActive') ||\r\n                        (model.mediaModel && model.mediaModel.get('mediaType') === 'audio')) {\r\n                        return;\r\n                    }\r\n                    toggleClass(_playerElement, 'jw-flag-controls-hidden');\r\n                    _captionsRenderer.renderCues(true);\r\n                } else if (_controls) {\r\n                    if (!_controls.showing) {\r\n                        _controls.userActive();\r\n                    } else {\r\n                        _controls.userInactive();\r\n                    }\r\n                }\r\n            },\r\n            doubleClick: () => _controls && api.setFullscreen(),\r\n            move: () => _controls && _controls.userActive(),\r\n            over: () => _controls && _controls.userActive()\r\n        });\r\n\r\n        return clickHandler;\r\n    }\r\n\r\n    function onStretchChange(model, newVal) {\r\n        replaceClass(_playerElement, /jw-stretch-\\S+/, 'jw-stretch-' + newVal);\r\n    }\r\n\r\n    function onAspectRatioChange(model, aspectratio) {\r\n        toggleClass(_playerElement, 'jw-flag-aspect-mode', !!aspectratio);\r\n        const aspectRatioContainer = _playerElement.querySelector('.jw-aspect');\r\n        style(aspectRatioContainer, {\r\n            paddingTop: aspectratio || null\r\n        });\r\n    }\r\n\r\n    function onFlashBlockedChange(model, isBlocked) {\r\n        toggleClass(_playerElement, 'jw-flag-flash-blocked', isBlocked);\r\n    }\r\n\r\n    function _logoClickHandler(evt) {\r\n        if (!evt.link) {\r\n            if (_model.get('controls')) {\r\n                _api.playToggle(reasonInteraction());\r\n            }\r\n        } else {\r\n            _api.pause(reasonInteraction());\r\n            _api.setFullscreen(false);\r\n            window.open(evt.link, evt.linktarget);\r\n        }\r\n    }\r\n\r\n    const _onChangeControls = function (model, bool) {\r\n        if (bool) {\r\n            // ignore model that triggered this event and use current state model\r\n            _stateHandler(_instreamModel || _model);\r\n        }\r\n    };\r\n\r\n    this.addControls = function (controls) {\r\n        _controls = controls;\r\n\r\n        removeClass(_playerElement, 'jw-flag-controls-hidden');\r\n\r\n        _model.change('streamType', _setLiveMode, this);\r\n\r\n        controls.enable(_api, _model);\r\n        controls.addActiveListeners(_logo.element());\r\n\r\n        const logoContainer = controls.logoContainer();\r\n        if (logoContainer) {\r\n            _logo.setContainer(logoContainer);\r\n        }\r\n\r\n        // refresh breakpoint and timeslider classes\r\n        if (_lastHeight) {\r\n            updateContainerStyles(_lastWidth, _lastHeight);\r\n            controls.resize(_lastWidth, _lastHeight);\r\n            _captionsRenderer.renderCues(true);\r\n        }\r\n\r\n        controls.on('userActive userInactive', function() {\r\n            if (_playerState === STATE_PLAYING || _playerState === STATE_BUFFERING) {\r\n                _captionsRenderer.renderCues(true);\r\n            }\r\n        });\r\n\r\n        controls.on('all', _this.trigger, _this);\r\n\r\n        if (_instreamModel) {\r\n            _controls.setupInstream(_instreamModel);\r\n        }\r\n\r\n        const overlaysElement = _playerElement.querySelector('.jw-overlays');\r\n        overlaysElement.addEventListener('mousemove', _userActivityCallback);\r\n    };\r\n\r\n    this.removeControls = function () {\r\n        _logo.setContainer(_playerElement);\r\n\r\n        if (_controls) {\r\n            _controls.removeActiveListeners(_logo.element());\r\n            _controls.disable(_model);\r\n            _controls = null;\r\n        }\r\n\r\n        const overlay = document.querySelector('.jw-overlays');\r\n        if (overlay) {\r\n            overlay.removeEventListener('mousemove', _userActivityCallback);\r\n        }\r\n\r\n        addClass(_playerElement, 'jw-flag-controls-hidden');\r\n    };\r\n\r\n    // Perform the switch to fullscreen\r\n    const _fullscreen = function (model, state) {\r\n\r\n        // If it supports DOM fullscreen\r\n        const provider = _model.getVideo();\r\n\r\n        // Unmute the video so volume can be adjusted with native controls in fullscreen\r\n        if (state && _controls && _model.get('autostartMuted')) {\r\n            _controls.unmuteAutoplay(_api, _model);\r\n        }\r\n\r\n        if (fullscreenHelpers.supportsDomFullscreen()) {\r\n            if (state) {\r\n                fullscreenHelpers.requestFullscreen();\r\n            } else {\r\n                fullscreenHelpers.exitFullscreen();\r\n            }\r\n            _toggleDOMFullscreen(_playerElement, state);\r\n        } else if (_isIE) {\r\n            _toggleDOMFullscreen(_playerElement, state);\r\n        } else {\r\n            // else use native fullscreen\r\n            if (_instreamModel && _instreamModel.getVideo()) {\r\n                _instreamModel.getVideo().setFullscreen(state);\r\n            }\r\n            provider.setFullscreen(state);\r\n        }\r\n        // pass fullscreen state to Flash provider\r\n        // provider.getName() is the same as _api.getProvider() or _model.get('provider')\r\n        if (provider && provider.getName().name.indexOf('flash') === 0) {\r\n            provider.setFullscreen(state);\r\n        }\r\n    };\r\n\r\n    function _resizePlayer(playerWidth, playerHeight, resetAspectMode) {\r\n        const widthSet = playerWidth !== undefined;\r\n        const heightSet = playerHeight !== undefined;\r\n        const playerStyle = {\r\n            width: playerWidth\r\n        };\r\n\r\n        // when jwResize is called remove aspectMode and force layout\r\n        if (heightSet && resetAspectMode) {\r\n            _model.set('aspectratio', null);\r\n        }\r\n        if (!_model.get('aspectratio')) {\r\n            // If the height is a pixel value (number) greater than 0, snap it to the minimum supported height\r\n            // Allow zero to mean \"hide the player\"\r\n            let height = playerHeight;\r\n            if (_.isNumber(height) && height !== 0) {\r\n                height = Math.max(height, CONTROLBAR_ONLY_HEIGHT);\r\n            }\r\n            playerStyle.height = height;\r\n        }\r\n\r\n        if (widthSet && heightSet) {\r\n            _model.set('width', playerWidth);\r\n            _model.set('height', playerHeight);\r\n        }\r\n\r\n        style(_playerElement, playerStyle);\r\n    }\r\n\r\n    function _resizeMedia(containerWidth, containerHeight) {\r\n        if (!containerWidth || isNaN(1 * containerWidth)) {\r\n            containerWidth = _model.get('containerWidth');\r\n            if (!containerWidth) {\r\n                return;\r\n            }\r\n        }\r\n        if (!containerHeight || isNaN(1 * containerHeight)) {\r\n            containerHeight = _model.get('containerHeight');\r\n            if (!containerHeight) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (_preview) {\r\n            _preview.resize(containerWidth, containerHeight, _model.get('stretching'));\r\n        }\r\n\r\n        const provider = _model.getVideo();\r\n        if (!provider) {\r\n            return;\r\n        }\r\n        const transformScale = provider.resize(containerWidth, containerHeight, _model.get('stretching'));\r\n\r\n        // poll resizing if video is transformed\r\n        if (transformScale) {\r\n            clearTimeout(_resizeMediaTimeout);\r\n            _resizeMediaTimeout = setTimeout(_resizeMedia, 250);\r\n        }\r\n    }\r\n\r\n    this.resize = function (playerWidth, playerHeight) {\r\n        const resetAspectMode = true;\r\n        _resizePlayer(playerWidth, playerHeight, resetAspectMode);\r\n        _responsiveUpdate();\r\n    };\r\n    this.resizeMedia = _resizeMedia;\r\n\r\n    /**\r\n     * Return whether or not we're in native fullscreen\r\n     */\r\n    function _isNativeFullscreen() {\r\n        if (fullscreenHelpers.supportsDomFullscreen()) {\r\n            const fsElement = fullscreenHelpers.fullscreenElement();\r\n            return !!(fsElement && fsElement.id === _model.get('id'));\r\n        }\r\n        // if player element view fullscreen not available, return video fullscreen state\r\n        return _instreamModel ? _instreamModel.getVideo().getFullScreen() :\r\n            _model.getVideo().getFullScreen();\r\n    }\r\n\r\n\r\n    function _fullscreenChangeHandler(event) {\r\n        const modelState = _model.get('fullscreen');\r\n        const newState = (event.jwstate !== undefined) ? event.jwstate : _isNativeFullscreen();\r\n\r\n        // If fullscreen was triggered by something other than the player\r\n        //  then we want to sync up our internal state\r\n        if (modelState !== newState) {\r\n            _model.set('fullscreen', newState);\r\n        }\r\n\r\n        _responsiveListener();\r\n        clearTimeout(_resizeMediaTimeout);\r\n        _resizeMediaTimeout = setTimeout(_resizeMedia, 200);\r\n    }\r\n\r\n    function _toggleDOMFullscreen(playerElement, fullscreenState) {\r\n        toggleClass(playerElement, 'jw-flag-fullscreen', fullscreenState);\r\n        style(document.body, { overflowY: (fullscreenState) ? 'hidden' : '' });\r\n\r\n        if (fullscreenState && _controls) {\r\n            // When going into fullscreen, we want the control bar to fade after a few seconds\r\n            _controls.userActive();\r\n        }\r\n\r\n        _resizeMedia();\r\n        _responsiveListener();\r\n    }\r\n\r\n    function _setLiveMode(model, streamType) {\r\n        if (!_instreamModel) {\r\n            const live = (streamType === 'LIVE');\r\n            toggleClass(_playerElement, 'jw-flag-live', live);\r\n        }\r\n    }\r\n\r\n    function _userActivityCallback(/* event */) {\r\n        _controls.userActive();\r\n    }\r\n\r\n    function _onMediaTypeChange(model, val) {\r\n        const isAudioFile = (val === 'audio');\r\n        const provider = _model.getVideo();\r\n        const isFlash = (provider && provider.getName().name.indexOf('flash') === 0);\r\n\r\n        toggleClass(_playerElement, 'jw-flag-media-audio', isAudioFile);\r\n\r\n        const element = (isAudioFile && !isFlash) ? _videoLayer : _videoLayer.nextSibling;\r\n        // Put the preview element before the media element in order to display browser captions\r\n        // otherwise keep it on top of the media element to display captions with the captions renderer\r\n        _playerElement.insertBefore(_preview.el, element);\r\n    }\r\n\r\n    function _errorHandler(model, evt) {\r\n        if (!evt) {\r\n            _title.playlistItem(model, model.get('playlistItem'));\r\n            return;\r\n        }\r\n        const errorContainer = ErrorContainer(_model, evt.message);\r\n        if (ErrorContainer.cloneIcon) {\r\n            errorContainer.querySelector('.jw-icon').appendChild(ErrorContainer.cloneIcon('error'));\r\n        }\r\n        _playerElement.appendChild(errorContainer.firstChild);\r\n        toggleClass(_playerElement, 'jw-flag-audio-player', !!model.get('audioMode'));\r\n    }\r\n\r\n    function _stateHandler(model, newState, oldState) {\r\n        if (!_model.get('viewSetup')) {\r\n            return;\r\n        }\r\n\r\n        _playerState = model.get('state');\r\n\r\n        instreamStateUpdate(_playerState);\r\n\r\n        if (oldState === STATE_ERROR) {\r\n            const errorContainer = _playerElement.querySelector('.jw-error-msg');\r\n            if (errorContainer) {\r\n                errorContainer.parentNode.removeChild(errorContainer);\r\n            }\r\n        }\r\n\r\n        cancelAnimationFrame(_stateClassRequestId);\r\n        if (_playerState === STATE_PLAYING || (_playerState === STATE_IDLE && _model.get('autostart'))) {\r\n            _stateUpdate(_playerState);\r\n        } else {\r\n            _stateClassRequestId = requestAnimationFrame(() => _stateUpdate(_playerState));\r\n        }\r\n    }\r\n\r\n    function instreamStateUpdate(state) {\r\n        let instreamState = null;\r\n        if (_instreamModel) {\r\n            instreamState = state;\r\n        }\r\n        if (_controls) {\r\n            _controls.instreamState = instreamState;\r\n        }\r\n    }\r\n\r\n    function _stateUpdate(state) {\r\n        if (_model.get('controls') && state !== STATE_PAUSED && hasClass(_playerElement, 'jw-flag-controls-hidden')) {\r\n            removeClass(_playerElement, 'jw-flag-controls-hidden');\r\n        }\r\n        replaceClass(_playerElement, /jw-state-\\S+/, 'jw-state-' + state);\r\n\r\n        _model.off('change:playlistItem', setPosterImage);\r\n        switch (state) {\r\n            case STATE_IDLE:\r\n            case STATE_ERROR:\r\n            case STATE_COMPLETE:\r\n                _model.change('playlistItem', setPosterImage);                \r\n                if (_captionsRenderer) {\r\n                    _captionsRenderer.hide();\r\n                }\r\n                break;\r\n            default:\r\n                if (_captionsRenderer) {\r\n                    _captionsRenderer.show();\r\n                    if (state === STATE_PAUSED && _controls && !_controls.showing) {\r\n                        _captionsRenderer.renderCues(true);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    function setPosterImage(model) {\r\n        const playlistItem = model.get('playlistItem');\r\n        _preview.setImage(playlistItem && playlistItem.image);\r\n    }\r\n\r\n    const settingsMenuVisible = () => {\r\n        const settingsMenu = _controls && _controls.settingsMenu;\r\n        return !!(settingsMenu && settingsMenu.visible);\r\n    };\r\n\r\n    this.setupInstream = function (instreamModel) {\r\n        this.instreamModel = _instreamModel = instreamModel;\r\n        _instreamModel.on('change:controls', _onChangeControls, this);\r\n        _instreamModel.on('change:state', _stateHandler, this);\r\n        _instreamModel.on('change:playRejected', function (model, val) {\r\n            toggleClass(_playerElement, 'jw-flag-play-rejected', val);\r\n        }, this);\r\n\r\n        addClass(_playerElement, 'jw-flag-ads');\r\n        removeClass(_playerElement, 'jw-flag-live');\r\n\r\n        if (_controls) {\r\n            _controls.setupInstream(instreamModel);\r\n        }\r\n    };\r\n\r\n    this.setAltText = function (text) {\r\n        _model.set('altText', text);\r\n    };\r\n\r\n    this.destroyInstream = function () {\r\n        if (_instreamModel) {\r\n            _instreamModel.off(null, null, this);\r\n            _instreamModel = null;\r\n        }\r\n        if (!displayClickHandler) {\r\n            // view was destroyed\r\n            return;\r\n        }\r\n        if (_controls) {\r\n            _controls.destroyInstream(_model);\r\n        }\r\n\r\n        this.setAltText('');\r\n        removeClass(_playerElement, ['jw-flag-ads', 'jw-flag-ads-hide-controls']);\r\n        _model.set('hideAdsControls', false);\r\n        const provider = _model.getVideo();\r\n        if (provider) {\r\n            provider.setContainer(_videoLayer);\r\n        }\r\n        _setLiveMode(_model, _model.get('streamType'));\r\n        // reset display click handler\r\n        displayClickHandler.revertAlternateClickHandlers();\r\n    };\r\n\r\n    this.addCues = function (cues) {\r\n        _model.set('cues', cues);\r\n    };\r\n\r\n    this.clickHandler = function () {\r\n        return displayClickHandler;\r\n    };\r\n\r\n    this.getContainer = this.element = function () {\r\n        return _playerElement;\r\n    };\r\n\r\n    this.controlsContainer = function() {\r\n        if (_controls) {\r\n            return _controls.element();\r\n        }\r\n        return null;\r\n    };\r\n\r\n    this.getSafeRegion = function (excludeControlbar = true) {\r\n        const safeRegion = {\r\n            x: 0,\r\n            y: 0,\r\n            width: _lastWidth || 0,\r\n            height: _lastHeight || 0\r\n        };\r\n        if (_controls) {\r\n            // Subtract controlbar from the bottom when using one\r\n            if (excludeControlbar) {\r\n                safeRegion.height -= _controls.controlbarHeight();\r\n            }\r\n        }\r\n        return safeRegion;\r\n    };\r\n\r\n    this.setCaptions = function (captionsStyle) {\r\n        _captionsRenderer.clear();\r\n        _captionsRenderer.setup(_model.get('id'), captionsStyle);\r\n        _captionsRenderer.resize();\r\n    };\r\n\r\n    this.destroy = function () {\r\n        viewsManager.unobserve(_playerElement);\r\n        viewsManager.remove(this);\r\n        this.isSetup = false;\r\n        this.off();\r\n        cancelAnimationFrame(_resizeContainerRequestId);\r\n        clearTimeout(_resizeMediaTimeout);\r\n        if (focusHelper) {\r\n            focusHelper.destroy();\r\n            focusHelper = null;\r\n        }\r\n        if (fullscreenHelpers) {\r\n            fullscreenHelpers.destroy();\r\n            fullscreenHelpers = null;\r\n        }\r\n        if (_model.mediaController) {\r\n            _model.mediaController.off('fullscreenchange', _fullscreenChangeHandler);\r\n        }\r\n        if (_controls) {\r\n            _controls.disable(_model);\r\n        }\r\n\r\n        if (_instreamModel) {\r\n            this.destroyInstream();\r\n        }\r\n        if (displayClickHandler) {\r\n            displayClickHandler.destroy();\r\n            displayClickHandler = null;\r\n        }\r\n        if (_captionsRenderer) {\r\n            _captionsRenderer.destroy();\r\n            _captionsRenderer = null;\r\n        }\r\n        if (_logo) {\r\n            _logo.destroy();\r\n            _logo = null;\r\n        }\r\n        clearCss(_model.get('id'));\r\n    };\r\n}\r\n\r\nexport default View;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/view.js","export default (id, ariaLabel = '') => {\r\n    return (\r\n        `<div id=\"${id}\" class=\"jwplayer jw-reset jw-state-setup\" tabindex=\"0\" aria-label=\"${ariaLabel}\">` +\r\n            `<div class=\"jw-aspect jw-reset\"></div>` +\r\n            `<div class=\"jw-media jw-reset\"></div>` +\r\n            `<div class=\"jw-preview jw-reset\"></div>` +\r\n            `<div class=\"jw-title jw-reset\">` +\r\n                `<div class=\"jw-title-primary jw-reset\"></div>` +\r\n                `<div class=\"jw-title-secondary jw-reset\"></div>` +\r\n            `</div>` +\r\n            `<div class=\"jw-overlays jw-reset\"></div>` +\r\n        `</div>`\r\n    );\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/player.js","export const CONTROLBAR_ONLY_HEIGHT = 44;\r\n\r\nexport const isAudioMode = function(model) {\r\n    const playerHeight = model.get('height');\r\n    if (model.get('aspectratio')) {\r\n        return false;\r\n    }\r\n    if (typeof playerHeight === 'string' && playerHeight.indexOf('%') > -1) {\r\n        return false;\r\n    }\r\n\r\n    // Coerce into Number (don't parse out CSS units)\r\n    let verticalPixels = (playerHeight * 1) || NaN;\r\n    verticalPixels = (!isNaN(verticalPixels) ? verticalPixels : model.get('containerHeight'));\r\n    if (!verticalPixels) {\r\n        return false;\r\n    }\r\n\r\n    return verticalPixels && verticalPixels <= CONTROLBAR_ONLY_HEIGHT;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/audio-mode.js","import activeTab from 'utils/active-tab';\r\nimport { requestAnimationFrame, cancelAnimationFrame } from 'utils/request-animation-frame';\r\n\r\nconst views = [];\r\nconst observed = {};\r\n\r\nlet intersectionObserver;\r\nlet responsiveRepaintRequestId = -1;\r\n\r\nfunction lazyInitIntersectionObserver() {\r\n    const IntersectionObserver = window.IntersectionObserver;\r\n    if (!intersectionObserver) {\r\n        // Fire the callback every time 25% of the player comes in/out of view\r\n        intersectionObserver = new IntersectionObserver((entries) => {\r\n            if (entries && entries.length) {\r\n                for (let i = entries.length; i--;) {\r\n                    const entry = entries[i];\r\n                    for (let j = views.length; j--;) {\r\n                        let view = views[j];\r\n                        if (entry.target === view.getContainer()) {\r\n                            view.model.set('intersectionRatio', entry.intersectionRatio);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, { threshold: [0, 0.25, 0.5, 0.75, 1] });\r\n    }\r\n}\r\n\r\nfunction scheduleResponsiveRedraw() {\r\n    cancelAnimationFrame(responsiveRepaintRequestId);\r\n    responsiveRepaintRequestId = requestAnimationFrame(function responsiveRepaint() {\r\n        views.forEach(view => {\r\n            view.updateBounds();\r\n        });\r\n        views.forEach(view => {\r\n            if (view.model.get('visibility')) {\r\n                view.updateStyles();\r\n            }\r\n        });\r\n        views.forEach(view => {\r\n            view.checkResized();\r\n        });\r\n    });\r\n}\r\n\r\nfunction onVisibilityChange() {\r\n    views.forEach(view => {\r\n        view.model.set('activeTab', activeTab());\r\n    });\r\n}\r\n\r\ndocument.addEventListener('visibilitychange', onVisibilityChange);\r\ndocument.addEventListener('webkitvisibilitychange', onVisibilityChange);\r\nwindow.addEventListener('resize', scheduleResponsiveRedraw);\r\nwindow.addEventListener('orientationchange', scheduleResponsiveRedraw);\r\n\r\nwindow.addEventListener('beforeunload', () => {\r\n    document.removeEventListener('visibilitychange', onVisibilityChange);\r\n    document.removeEventListener('webkitvisibilitychange', onVisibilityChange);\r\n    window.removeEventListener('resize', scheduleResponsiveRedraw);\r\n    window.removeEventListener('orientationchange', scheduleResponsiveRedraw);\r\n});\r\n\r\nexport default {\r\n    add: function(view) {\r\n        views.push(view);\r\n    },\r\n    remove: function(view) {\r\n        const index = views.indexOf(view);\r\n        if (index !== -1) {\r\n            views.splice(index, 1);\r\n        }\r\n    },\r\n    size: function() {\r\n        return views.length;\r\n    },\r\n    observe(container) {\r\n        lazyInitIntersectionObserver();\r\n\r\n        if (observed[container.id]) {\r\n            return;\r\n        }\r\n\r\n        observed[container.id] = true;\r\n        intersectionObserver.observe(container);\r\n    },\r\n    unobserve(container) {\r\n        if (intersectionObserver && observed[container.id]) {\r\n            delete observed[container.id];\r\n            intersectionObserver.unobserve(container);\r\n        }\r\n    },\r\n    getIntersectionObserver() {\r\n        return intersectionObserver;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/views-manager.js","export default function getVisibility(model, element) {\r\n    // Set visibility to 1 if we're in fullscreen\r\n    if (model.get('fullscreen')) {\r\n        return 1;\r\n    }\r\n\r\n    // Set visibility to 0 if we're not in the active tab\r\n    if (!model.get('activeTab')) {\r\n        return 0;\r\n    }\r\n    // Otherwise, set it to the intersection ratio reported from the intersection observer\r\n    let intersectionRatio = model.get('intersectionRatio');\r\n\r\n    if (intersectionRatio === undefined) {\r\n        // Get intersectionRatio through brute force\r\n        intersectionRatio = computeVisibility(element);\r\n    }\r\n\r\n    return intersectionRatio;\r\n}\r\n\r\nfunction computeVisibility(target) {\r\n    const html = document.documentElement;\r\n    const body = document.body;\r\n    const rootRect = {\r\n        top: 0,\r\n        left: 0,\r\n        right: html.clientWidth || body.clientWidth,\r\n        width: html.clientWidth || body.clientWidth,\r\n        bottom: html.clientHeight || body.clientHeight,\r\n        height: html.clientHeight || body.clientHeight\r\n    };\r\n\r\n    if (!body.contains(target)) {\r\n        return 0;\r\n    }\r\n    // If the element isn't displayed, an intersection can't happen.\r\n    if (window.getComputedStyle(target).display === 'none') {\r\n        return 0;\r\n    }\r\n\r\n    const targetRect = getBoundingClientRect(target);\r\n    if (!targetRect) {\r\n        return 0;\r\n    }\r\n\r\n    let intersectionRect = targetRect;\r\n    let parent = target.parentNode;\r\n    let atRoot = false;\r\n\r\n    while (!atRoot) {\r\n        let parentRect = null;\r\n        if (parent === body || parent === html || parent.nodeType !== 1) {\r\n            atRoot = true;\r\n            parentRect = rootRect;\r\n        } else if (window.getComputedStyle(parent).overflow !== 'visible') {\r\n            parentRect = getBoundingClientRect(parent);\r\n        }\r\n        if (parentRect) {\r\n            intersectionRect = computeRectIntersection(parentRect, intersectionRect);\r\n            if (!intersectionRect) {\r\n                return 0;\r\n            }\r\n        }\r\n        parent = parent.parentNode;\r\n    }\r\n    const targetArea = targetRect.width * targetRect.height;\r\n    const intersectionArea = intersectionRect.width * intersectionRect.height;\r\n    return targetArea ? (intersectionArea / targetArea) : 0;\r\n}\r\n\r\nfunction getBoundingClientRect(el) {\r\n    try {\r\n        return el.getBoundingClientRect();\r\n    } catch (e) {/* ignore Windows 7 IE11 \"Unspecified error\" */}\r\n}\r\n\r\nfunction computeRectIntersection(rect1, rect2) {\r\n    const top = Math.max(rect1.top, rect2.top);\r\n    const bottom = Math.min(rect1.bottom, rect2.bottom);\r\n    const left = Math.max(rect1.left, rect2.left);\r\n    const right = Math.min(rect1.right, rect2.right);\r\n    const width = right - left;\r\n    const height = bottom - top;\r\n    return (width >= 0 && height >= 0) && {\r\n        top: top,\r\n        bottom: bottom,\r\n        left: left,\r\n        right: right,\r\n        width: width,\r\n        height: height\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/visibility.js","import { prefix } from 'utils/strings';\r\nimport { css, getRgba } from 'utils/css';\r\n\r\nexport function normalizeSkin(skinConfig = {}) {\r\n\r\n    const active = skinConfig.active;\r\n    const inactive = skinConfig.inactive;\r\n    const background = skinConfig.background;\r\n\r\n    const colors = {};\r\n\r\n    colors.controlbar = getControlBar(skinConfig.controlbar);\r\n\r\n    colors.timeslider = getTimeSlider(skinConfig.timeslider);\r\n\r\n    colors.menus = getMenus(skinConfig.menus);\r\n\r\n    colors.tooltips = getTooltips(skinConfig.tooltips);\r\n\r\n    function getControlBar(controlBarConfig) {\r\n        if (controlBarConfig || active || inactive || background) {\r\n            const config = {};\r\n\r\n            controlBarConfig = controlBarConfig || {};\r\n            config.iconsActive = controlBarConfig.iconsActive || active;\r\n            config.icons = controlBarConfig.icons || inactive;\r\n            config.text = controlBarConfig.text || inactive;\r\n            config.background = controlBarConfig.background || background;\r\n\r\n            return config;\r\n        }\r\n    }\r\n\r\n    function getTimeSlider(timesliderConfig) {\r\n        if (timesliderConfig || active) {\r\n            const config = {};\r\n\r\n            timesliderConfig = timesliderConfig || {};\r\n            config.progress = timesliderConfig.progress || active;\r\n            config.rail = timesliderConfig.rail;\r\n\r\n            return config;\r\n        }\r\n    }\r\n\r\n    function getMenus(menusConfig) {\r\n        if (menusConfig || active || inactive || background) {\r\n            const config = {};\r\n\r\n            menusConfig = menusConfig || {};\r\n            config.text = menusConfig.text || inactive;\r\n            config.textActive = menusConfig.textActive || active;\r\n            config.background = menusConfig.background || background;\r\n\r\n            return config;\r\n        }\r\n    }\r\n\r\n    function getTooltips(tooltipsConfig) {\r\n        if (tooltipsConfig || inactive || background) {\r\n            const config = {};\r\n\r\n            tooltipsConfig = tooltipsConfig || {};\r\n            config.text = tooltipsConfig.text || inactive;\r\n            config.background = tooltipsConfig.background || background;\r\n\r\n            return config;\r\n        }\r\n    }\r\n\r\n    return colors;\r\n}\r\n\r\nexport function handleColorOverrides(playerId, skin) {\r\n    if (!skin) {\r\n        return;\r\n    }\r\n\r\n    function addStyle(elements, attr, value, extendParent) {\r\n        if (!value) {\r\n            return;\r\n        }\r\n        /* if extendParent is true, bundle the first selector of\r\n         element string to the player element instead of defining it as a\r\n         child of the player element (default). i.e. #player.sel-1 .sel-2 vs. #player .sel-1 .sel-2 */\r\n        elements = prefix(elements, '#' + playerId + (extendParent ? '' : ' '));\r\n\r\n        const o = {};\r\n        o[attr] = value;\r\n        css(elements.join(', '), o, playerId);\r\n    }\r\n\r\n    // These will use standard style names for CSS since they are added directly to a style sheet\r\n    // Using background instead of background-color so we don't have to clear gradients with background-image\r\n\r\n    if (skin.controlbar) {\r\n        styleControlbar(skin.controlbar);\r\n    }\r\n    if (skin.timeslider) {\r\n        styleTimeslider(skin.timeslider);\r\n    }\r\n    if (skin.menus) {\r\n        styleMenus(skin.menus);\r\n    }\r\n    if (skin.tooltips) {\r\n        styleTooltips(skin.tooltips);\r\n    }\r\n\r\n    insertGlobalColorClasses(skin.menus);\r\n\r\n    function styleControlbar(config) {\r\n\r\n        addStyle([\r\n            // controlbar text colors\r\n            '.jw-controlbar .jw-icon-inline.jw-text',\r\n            '.jw-title-primary',\r\n            '.jw-title-secondary',\r\n        ], 'color', config.text);\r\n\r\n        if (config.icons) {\r\n            addStyle([\r\n                // controlbar button colors\r\n                '.jw-button-color:not(.jw-icon-cast)',\r\n                '.jw-button-color.jw-toggle.jw-off:not(.jw-icon-cast)',\r\n            ], 'color', config.icons);\r\n\r\n            addStyle([\r\n                '.jw-display-icon-container .jw-button-color',\r\n            ], 'color', config.icons);\r\n\r\n            // Chromecast overrides\r\n            // Can't use addStyle since it will camel case the style name\r\n            css(`#${playerId} .jw-icon-cast button.jw-off`, `{--disconnected-color: ${config.icons}}`, playerId);\r\n        }\r\n        if (config.iconsActive) {\r\n            addStyle([\r\n                '.jw-display-icon-container .jw-button-color:hover',\r\n                '.jw-display-icon-container .jw-button-color:focus',\r\n            ], 'color', config.iconsActive);\r\n\r\n            // Apply active color\r\n            addStyle([\r\n                // Toggle and menu button active colors\r\n                '.jw-button-color.jw-toggle:not(.jw-icon-cast)',\r\n                '.jw-button-color:hover:not(.jw-icon-cast)',\r\n                '.jw-button-color:focus:not(.jw-icon-cast)',\r\n                '.jw-button-color.jw-toggle.jw-off:hover:not(.jw-icon-cast)'\r\n            ], 'color', config.iconsActive);\r\n\r\n            addStyle([\r\n                '.jw-svg-icon-buffer',\r\n            ], 'fill', config.icons);\r\n\r\n            // Chromecast overrides\r\n            // Can't use addStyle since it will camel case the style name\r\n            css(`#${playerId} .jw-icon-cast:hover button.jw-off`, `{--disconnected-color: ${config.iconsActive}}`, playerId);\r\n            css(`#${playerId} .jw-icon-cast:focus button.jw-off`, `{--disconnected-color: ${config.iconsActive}}`, playerId);\r\n            css(`#${playerId} .jw-icon-cast button.jw-off:focus`, `{--disconnected-color: ${config.iconsActive}}`, playerId);\r\n\r\n            css(`#${playerId} .jw-icon-cast button`, `{--connected-color: ${config.iconsActive}}`, playerId);\r\n            css(`#${playerId} .jw-icon-cast button:focus`, `{--connected-color: ${config.iconsActive}}`, playerId);\r\n            css(`#${playerId} .jw-icon-cast:hover button`, `{--connected-color: ${config.iconsActive}}`, playerId);\r\n            css(`#${playerId} .jw-icon-cast:focus button`, `{--connected-color: ${config.iconsActive}}`, playerId);\r\n        }\r\n\r\n        // A space is purposefully left before '.jw-settings-topbar' since extendParent is set to true in order to append ':not(.jw-state-idle)'\r\n        addStyle([\r\n            ' .jw-settings-topbar',\r\n            ':not(.jw-state-idle) .jw-controlbar',\r\n            '.jw-flag-audio-player .jw-controlbar'\r\n        ], 'background', config.background, true);\r\n    }\r\n\r\n    function styleTimeslider(config) {\r\n\r\n        addStyle([\r\n            '.jw-progress',\r\n            '.jw-knob'\r\n        ], 'background-color', config.progress);\r\n\r\n        addStyle([\r\n            '.jw-buffer',\r\n        ], 'background-color', getRgba(config.progress, 50));\r\n\r\n        addStyle([\r\n            '.jw-rail'\r\n        ], 'background-color', config.rail);\r\n\r\n        addStyle([\r\n            '.jw-background-color.jw-slider-time',\r\n            '.jw-slider-time .jw-cue'\r\n        ], 'background-color', config.background);\r\n    }\r\n\r\n    function styleMenus(config) {\r\n\r\n        addStyle([\r\n            '.jw-option',\r\n            '.jw-toggle.jw-off',\r\n            '.jw-skip .jw-skip-icon',\r\n            '.jw-nextup-tooltip',\r\n            '.jw-nextup-close',\r\n            '.jw-settings-content-item'\r\n        ], 'color', config.text);\r\n\r\n        addStyle([\r\n            '.jw-option.jw-active-option',\r\n            '.jw-option:not(.jw-active-option):hover',\r\n            '.jw-option:not(.jw-active-option):focus',\r\n            '.jw-settings-item-active',\r\n            '.jw-settings-content-item:hover',\r\n            '.jw-settings-content-item:focus',\r\n            '.jw-nextup-tooltip:hover',\r\n            '.jw-nextup-tooltip:focus',\r\n            '.jw-nextup-close:hover'\r\n        ], 'color', config.textActive);\r\n\r\n        addStyle([\r\n            '.jw-nextup',\r\n            '.jw-settings-menu',\r\n        ], 'background', config.background);\r\n    }\r\n\r\n    function styleTooltips(config) {\r\n\r\n        addStyle([\r\n            '.jw-skip',\r\n            '.jw-tooltip .jw-text',\r\n            '.jw-time-tip .jw-text'\r\n        ], 'background-color', config.background);\r\n\r\n        addStyle([\r\n            '.jw-time-tip',\r\n            '.jw-tooltip'\r\n        ], 'color', config.background);\r\n\r\n        addStyle([\r\n            '.jw-skip',\r\n        ], 'border', 'none');\r\n\r\n        addStyle([\r\n            '.jw-skip .jw-text',\r\n            '.jw-skip .jw-icon',\r\n            '.jw-time-tip .jw-text',\r\n            '.jw-tooltip .jw-text'\r\n        ], 'color', config.text);\r\n    }\r\n\r\n    // Set global colors, used by related plugin\r\n    // If a color is undefined simple-style-loader won't add their styles to the dom\r\n    function insertGlobalColorClasses(config = {}) {\r\n        if (config.textActive) {\r\n            const activeColorSet = {\r\n                color: config.textActive,\r\n                borderColor: config.textActive,\r\n                stroke: config.textActive\r\n            };\r\n            css('#' + playerId + ' .jw-color-active', activeColorSet, playerId);\r\n            css('#' + playerId + ' .jw-color-active-hover:hover', activeColorSet, playerId);\r\n        }\r\n        if (config.text) {\r\n            const inactiveColorSet = {\r\n                color: config.text,\r\n                borderColor: config.text,\r\n                stroke: config.text\r\n            };\r\n            css('#' + playerId + ' .jw-color-inactive', inactiveColorSet, playerId);\r\n            css('#' + playerId + ' .jw-color-inactive-hover:hover', inactiveColorSet, playerId);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/skin.js","const DOCUMENT_FULLSCREEN_EVENTS = [\r\n    'fullscreenchange',\r\n    'webkitfullscreenchange',\r\n    'mozfullscreenchange',\r\n    'MSFullscreenChange'\r\n];\r\n\r\nexport default function(elementContext, documentContext, changeCallback) {\r\n    const requestFullscreen = elementContext.requestFullscreen ||\r\n        elementContext.webkitRequestFullscreen ||\r\n        elementContext.webkitRequestFullScreen ||\r\n        elementContext.mozRequestFullScreen ||\r\n        elementContext.msRequestFullscreen;\r\n\r\n    const exitFullscreen = documentContext.exitFullscreen ||\r\n        documentContext.webkitExitFullscreen ||\r\n        documentContext.webkitCancelFullScreen ||\r\n        documentContext.mozCancelFullScreen ||\r\n        documentContext.msExitFullscreen;\r\n\r\n    const supportsDomFullscreen = !!(requestFullscreen && exitFullscreen);\r\n\r\n    for (let i = DOCUMENT_FULLSCREEN_EVENTS.length; i--;) {\r\n        documentContext.addEventListener(DOCUMENT_FULLSCREEN_EVENTS[i], changeCallback);\r\n    }\r\n\r\n    return {\r\n        events: DOCUMENT_FULLSCREEN_EVENTS,\r\n        supportsDomFullscreen: function() {\r\n            return supportsDomFullscreen;\r\n        },\r\n        requestFullscreen: function() {\r\n            requestFullscreen.apply(elementContext);\r\n        },\r\n        exitFullscreen: function() {\r\n            exitFullscreen.apply(documentContext);\r\n        },\r\n        fullscreenElement: function() {\r\n            return documentContext.fullscreenElement ||\r\n                documentContext.webkitCurrentFullScreenElement ||\r\n                documentContext.mozFullScreenElement ||\r\n                documentContext.msFullscreenElement;\r\n        },\r\n        destroy: function() {\r\n            for (let i = DOCUMENT_FULLSCREEN_EVENTS.length; i--;) {\r\n                documentContext.removeEventListener(DOCUMENT_FULLSCREEN_EVENTS[i], changeCallback);\r\n            }\r\n        }\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/request-fullscreen-helper.js","import { addClass, removeClass } from 'utils/dom';\r\n\r\n\r\nexport default function (elementContext) {\r\n    var _focusFromClick = false;\r\n\r\n    const onBlur = function () {\r\n        _focusFromClick = false;\r\n        removeClass(elementContext, 'jw-no-focus');\r\n    };\r\n\r\n    const onMouseDown = function () {\r\n        _focusFromClick = true;\r\n        addClass(elementContext, 'jw-no-focus');\r\n    };\r\n\r\n    const onFocus = function () {\r\n        if (!_focusFromClick) {\r\n            onBlur();\r\n        }\r\n    };\r\n\r\n    elementContext.addEventListener('focus', onFocus);\r\n    elementContext.addEventListener('blur', onBlur);\r\n    elementContext.addEventListener('mousedown', onMouseDown);\r\n\r\n    return {\r\n        destroy: function() {\r\n            elementContext.removeEventListener('focus', onFocus);\r\n            elementContext.removeEventListener('blur', onBlur);\r\n            elementContext.removeEventListener('mousedown', onMouseDown);\r\n        }\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/flag-no-focus.js","import { CLICK } from 'events/events';\r\nimport UI from 'utils/ui';\r\nimport Events from 'utils/backbone.events';\r\n\r\nexport default class ClickHandler {\r\n    constructor(model, element, options) {\r\n        Object.assign(this, Events);\r\n\r\n        this.revertAlternateClickHandlers();\r\n        this.domElement = element;\r\n        this.model = model;\r\n\r\n        const defaultOptions = { enableDoubleTap: true, useMove: true };\r\n        this.ui = new UI(element, Object.assign(defaultOptions, options)).on({\r\n            'click tap': this.clickHandler,\r\n            'doubleClick doubleTap': function() {\r\n                if (this.alternateDoubleClickHandler) {\r\n                    this.alternateDoubleClickHandler();\r\n                    return;\r\n                }\r\n                this.trigger('doubleClick');\r\n            },\r\n            move: function() {\r\n                this.trigger('move');\r\n            },\r\n            over: function() {\r\n                this.trigger('over');\r\n            },\r\n            out: function() {\r\n                this.trigger('out');\r\n            }\r\n        }, this);\r\n    }\r\n\r\n    destroy() {\r\n        if (this.ui) {\r\n            this.ui.destroy();\r\n            this.ui = this.domElement = this.model = null;\r\n            this.revertAlternateClickHandlers();\r\n        }\r\n    }\r\n\r\n    clickHandler(evt) {\r\n        if (this.model.get('flashBlocked')) {\r\n            return;\r\n        }\r\n        if (this.alternateClickHandler) {\r\n            this.alternateClickHandler(evt);\r\n            return;\r\n        }\r\n        this.trigger((evt.type === CLICK) ? 'click' : 'tap');\r\n    }\r\n\r\n    element() {\r\n        return this.domElement;\r\n    }\r\n\r\n    setAlternateClickHandlers(clickHandler, doubleClickHandler) {\r\n        this.alternateClickHandler = clickHandler;\r\n        this.alternateDoubleClickHandler = doubleClickHandler || null;\r\n    }\r\n\r\n    revertAlternateClickHandlers() {\r\n        this.alternateClickHandler = null;\r\n        this.alternateDoubleClickHandler = null;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/utils/clickhandler.js","import { Browser } from 'environment/environment';\r\nimport { chunkLoadErrorHandler } from '../api/core-loader';\r\nimport Events from 'utils/backbone.events';\r\nimport { ERROR } from 'events/events';\r\nimport { css, style, getRgba } from 'utils/css';\r\nimport { addClass, removeClass, empty } from 'utils/dom';\r\nimport _ from 'utils/underscore';\r\n\r\n/** Component that renders the actual captions on screen. **/\r\n\r\nlet _WebVTT;\r\n\r\nconst _defaults = {\r\n    back: true,\r\n    backgroundOpacity: 50,\r\n    edgeStyle: null,\r\n    fontSize: 14,\r\n    fontOpacity: 100,\r\n    fontScale: 0.05, // Default captions font size = 1/20th of the video's height\r\n    preprocessor: _.identity,\r\n    windowOpacity: 0\r\n};\r\n\r\nconst CaptionsRenderer = function (_model) {\r\n\r\n    let _options;\r\n    let _captionsTrack;\r\n    let _currentCues;\r\n    let _timeEvent;\r\n    let _display;\r\n    let _captionsWindow;\r\n    let _textContainer;\r\n    let _fontScale;\r\n    let _windowStyle;\r\n\r\n    _display = document.createElement('div');\r\n    _display.className = 'jw-captions jw-reset';\r\n\r\n    this.show = function () {\r\n        addClass(_display, 'jw-captions-enabled');\r\n    };\r\n\r\n    this.hide = function () {\r\n        removeClass(_display, 'jw-captions-enabled');\r\n    };\r\n\r\n    // Assign list of captions to the renderer\r\n    this.populate = function (captions) {\r\n        if (_model.get('renderCaptionsNatively')) {\r\n            return;\r\n        }\r\n\r\n        _currentCues = [];\r\n        _captionsTrack = captions;\r\n        if (!captions) {\r\n            _currentCues = [];\r\n            this.renderCues();\r\n            return;\r\n        }\r\n        this.selectCues(captions, _timeEvent);\r\n    };\r\n\r\n    this.resize = function () {\r\n        _setFontSize();\r\n        this.renderCues(true);\r\n    };\r\n\r\n    this.renderCues = function (updateBoxPosition) {\r\n        updateBoxPosition = !!updateBoxPosition;\r\n        if (_WebVTT) {\r\n            _WebVTT.processCues(window, _currentCues, _display, updateBoxPosition);\r\n        }\r\n    };\r\n\r\n    this.selectCues = function (track, timeEvent) {\r\n        if (!track || !track.data || !timeEvent) {\r\n            return;\r\n        }\r\n\r\n        const pos = this.getAlignmentPosition(track, timeEvent);\r\n        if (pos === false) {\r\n            return;\r\n        }\r\n\r\n        const cues = this.getCurrentCues(track.data, pos);\r\n\r\n        this.updateCurrentCues(cues);\r\n        this.renderCues(true);\r\n    };\r\n\r\n    this.getCurrentCues = function (allCues, pos) {\r\n        return _.filter(allCues, function (cue) {\r\n            return pos >= (cue.startTime) && (!cue.endTime || pos <= cue.endTime);\r\n        });\r\n    };\r\n\r\n    this.updateCurrentCues = function (cues) {\r\n        // Render with vtt.js if there are cues, clear if there are none\r\n        if (!cues.length) {\r\n            _currentCues = [];\r\n        } else if (_.difference(cues, _currentCues).length) {\r\n            addClass(_captionsWindow, 'jw-captions-window-active');\r\n            _currentCues = cues;\r\n        }\r\n\r\n        return _currentCues;\r\n    };\r\n\r\n    this.getAlignmentPosition = function (track, timeEvent) {\r\n        const source = track.source;\r\n        const metadata = timeEvent.metadata;\r\n\r\n        // subtitles with \"source\" time must be synced with \"metadata[source]\"\r\n        if (source) {\r\n            if (metadata && _.isNumber(metadata[source])) {\r\n                return metadata[source];\r\n            }\r\n            return;\r\n        } else if (timeEvent.duration < 0) {\r\n            // When the duration is negative (DVR mode), need to make alignmentPosition positive for captions to work\r\n            return timeEvent.position - timeEvent.duration;\r\n        }\r\n\r\n        // Default to syncing with current position\r\n        return timeEvent.position;\r\n    };\r\n\r\n    this.clear = function () {\r\n        empty(_display);\r\n    };\r\n\r\n    /** Constructor for the renderer. **/\r\n    this.setup = function (playerElementId, options) {\r\n        _captionsWindow = document.createElement('div');\r\n        _textContainer = document.createElement('span');\r\n        _captionsWindow.className = 'jw-captions-window jw-reset';\r\n        _textContainer.className = 'jw-captions-text jw-reset';\r\n\r\n        _options = Object.assign({}, _defaults, options);\r\n\r\n        _fontScale = _defaults.fontScale;\r\n        _setFontScale(_options.fontSize);\r\n\r\n        const windowColor = _options.windowColor;\r\n        const windowOpacity = _options.windowOpacity;\r\n        const edgeStyle = _options.edgeStyle;\r\n        _windowStyle = {};\r\n        const textStyle = {};\r\n\r\n        _addTextStyle(textStyle, _options);\r\n\r\n        if (windowColor || windowOpacity !== _defaults.windowOpacity) {\r\n            _windowStyle.backgroundColor = getRgba(windowColor || '#000000', windowOpacity);\r\n        }\r\n\r\n        _addEdgeStyle(edgeStyle, textStyle, _options.fontOpacity);\r\n\r\n        if (!_options.back && edgeStyle === null) {\r\n            _addEdgeStyle('uniform', textStyle);\r\n        }\r\n\r\n        style(_captionsWindow, _windowStyle);\r\n        style(_textContainer, textStyle);\r\n        _setupCaptionStyles(playerElementId, textStyle);\r\n\r\n        _captionsWindow.appendChild(_textContainer);\r\n        _display.appendChild(_captionsWindow);\r\n\r\n        this.populate(_model.get('captionsTrack'));\r\n        _model.set('captions', _options);\r\n    };\r\n\r\n    this.element = function () {\r\n        return _display;\r\n    };\r\n\r\n    this.destroy = function() {\r\n        this.off();\r\n        _model.off(null, null, this);\r\n    };\r\n\r\n    function _setFontScale() {\r\n        if (!_.isFinite(_options.fontSize)) {\r\n            return;\r\n        }\r\n\r\n        const height = _model.get('containerHeight');\r\n\r\n        if (!height) {\r\n            _model.once('change:containerHeight', _setFontScale, this);\r\n            return;\r\n        }\r\n\r\n        // Adjust scale based on font size relative to the default\r\n        _fontScale = _defaults.fontScale * _options.fontSize / _defaults.fontSize;\r\n    }\r\n\r\n    function _setFontSize() {\r\n        const height = _model.get('containerHeight');\r\n\r\n        if (!height) {\r\n            return;\r\n        }\r\n\r\n        const fontSize = Math.round(height * _fontScale);\r\n\r\n        if (_model.get('renderCaptionsNatively')) {\r\n            _setShadowDOMFontSize(_model.get('id'), fontSize);\r\n        } else {\r\n            style(_display, {\r\n                fontSize: fontSize + 'px'\r\n            });\r\n        }\r\n    }\r\n\r\n    function _setupCaptionStyles(playerId, textStyle) {\r\n        _setFontSize();\r\n        _styleNativeCaptions(playerId, textStyle);\r\n        _stylePlayerCaptions(playerId, textStyle);\r\n    }\r\n\r\n    function _stylePlayerCaptions(playerId, textStyle) {\r\n        // VTT.js DOM window and text styles\r\n        css('#' + playerId + ' .jw-text-track-display', _windowStyle, playerId);\r\n        css('#' + playerId + ' .jw-text-track-cue', textStyle, playerId);\r\n    }\r\n\r\n    function _styleNativeCaptions(playerId, textStyle) {\r\n        if (Browser.safari) {\r\n            // Only Safari uses a separate element for styling text background\r\n            css('#' + playerId + ' .jw-video::-webkit-media-text-track-display-backdrop', {\r\n                backgroundColor: textStyle.backgroundColor\r\n            }, playerId, true);\r\n        }\r\n\r\n        css('#' + playerId + ' .jw-video::-webkit-media-text-track-display', _windowStyle, playerId, true);\r\n        css('#' + playerId + ' .jw-video::cue', textStyle, playerId, true);\r\n    }\r\n\r\n    function _setShadowDOMFontSize(playerId, fontSize) {\r\n        // Set Shadow DOM font size (needs to be important to override browser's in line style)\r\n        _windowStyle.fontSize = fontSize + 'px';\r\n        css('#' + playerId + ' .jw-video::-webkit-media-text-track-display', _windowStyle, playerId, true);\r\n    }\r\n\r\n    function _addTextStyle(textStyle, options) {\r\n        const color = options.color;\r\n        const fontOpacity = options.fontOpacity;\r\n        if (color || fontOpacity !== _defaults.fontOpacity) {\r\n            textStyle.color = getRgba(color || '#ffffff', fontOpacity);\r\n        }\r\n\r\n        if (options.back) {\r\n            const bgColor = options.backgroundColor;\r\n            const bgOpacity = options.backgroundOpacity;\r\n            if (bgColor !== _defaults.backgroundColor || bgOpacity !== _defaults.backgroundOpacity) {\r\n                textStyle.backgroundColor = getRgba(bgColor, bgOpacity);\r\n            }\r\n        } else {\r\n            textStyle.background = 'transparent';\r\n        }\r\n\r\n        if (options.fontFamily) {\r\n            textStyle.fontFamily = options.fontFamily;\r\n        }\r\n\r\n        if (options.fontStyle) {\r\n            textStyle.fontStyle = options.fontStyle;\r\n        }\r\n\r\n        if (options.fontWeight) {\r\n            textStyle.fontWeight = options.fontWeight;\r\n        }\r\n\r\n        if (options.textDecoration) {\r\n            textStyle.textDecoration = options.textDecoration;\r\n        }\r\n    }\r\n\r\n    function _addEdgeStyle(option, styles, fontOpacity) {\r\n        const color = getRgba('#000000', fontOpacity);\r\n        if (option === 'dropshadow') { // small drop shadow\r\n            styles.textShadow = '0 2px 1px ' + color;\r\n        } else if (option === 'raised') { // larger drop shadow\r\n            styles.textShadow = '0 0 5px ' + color + ', 0 1px 5px ' + color + ', 0 2px 5px ' + color;\r\n        } else if (option === 'depressed') { // top down shadow\r\n            styles.textShadow = '0 -2px 1px ' + color;\r\n        } else if (option === 'uniform') { // outline\r\n            styles.textShadow = '-2px 0 1px ' + color + ',2px 0 1px ' + color +\r\n                ',0 -2px 1px ' + color + ',0 2px 1px ' + color + ',-1px 1px 1px ' +\r\n                color + ',1px 1px 1px ' + color + ',1px -1px 1px ' + color +\r\n                ',1px 1px 1px ' + color;\r\n        }\r\n    }\r\n\r\n    function _timeChange(e) {\r\n        if (_model.get('renderCaptionsNatively')) {\r\n            return;\r\n        }\r\n\r\n        _timeEvent = e;\r\n        this.selectCues(_captionsTrack, _timeEvent);\r\n    }\r\n\r\n    function _captionsListHandler(model, captionsList) {\r\n        if (captionsList.length === 1) {\r\n            // captionsList only contains 'off'\r\n            return;\r\n        }\r\n\r\n        // don't load the polyfill or do unnecessary work if rendering natively\r\n        if (!model.get('renderCaptionsNatively') && !_WebVTT) {\r\n            loadWebVttPolyfill().catch((error) => {\r\n                this.trigger(ERROR, {\r\n                    message: 'Captions renderer failed to load',\r\n                    reason: error\r\n                });\r\n            });\r\n            model.off('change:captionsList', _captionsListHandler, this);\r\n        }\r\n    }\r\n\r\n    function loadWebVttPolyfill() {\r\n        return require.ensure(['polyfills/webvtt'], function (require) {\r\n            _WebVTT = require('polyfills/webvtt').default;\r\n        }, chunkLoadErrorHandler, 'polyfills.webvtt');\r\n    }\r\n\r\n    _model.on('change:playlistItem', function () {\r\n        _timeEvent = null;\r\n        _currentCues = [];\r\n    }, this);\r\n\r\n    _model.on('change:captionsTrack', function (model, captionsTrack) {\r\n        this.populate(captionsTrack);\r\n    }, this);\r\n\r\n    _model.mediaController.on('seek', function () {\r\n        _currentCues = [];\r\n    }, this);\r\n\r\n    _model.mediaController.on('time seek', _timeChange, this);\r\n\r\n    _model.mediaController.on('subtitlesTrackData', function () {\r\n        // update captions after a provider's subtitle track changes\r\n        this.selectCues(_captionsTrack, _timeEvent);\r\n    }, this);\r\n\r\n    _model.on('change:captionsList', _captionsListHandler, this);\r\n};\r\n\r\nObject.assign(CaptionsRenderer.prototype, Events);\r\n\r\nexport default CaptionsRenderer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/captionsrenderer.js","import logoTemplate from 'templates/logo';\r\nimport { LOGO_CLICK } from 'events/events';\r\nimport UI from 'utils/ui';\r\nimport { style } from 'utils/css';\r\nimport { createElement } from 'utils/dom';\r\nimport Events from 'utils/backbone.events';\r\n\r\nconst LogoDefaults = {\r\n    linktarget: '_blank',\r\n    margin: 8,\r\n    hide: false,\r\n    position: 'top-right'\r\n};\r\n\r\nexport default function Logo(_model) {\r\n    Object.assign(this, Events);\r\n\r\n    var _logo;\r\n    var _settings;\r\n    const _img = new Image();\r\n\r\n    this.setup = function() {\r\n        _settings = Object.assign({}, LogoDefaults, _model.get('logo'));\r\n        _settings.position = _settings.position || LogoDefaults.position;\r\n        _settings.hide = (_settings.hide.toString() === 'true');\r\n\r\n        // We should only create a logo in the display container when\r\n        // it is not supposed to be in the control bar, as it will\r\n        // handle the creation in that case\r\n        if (!_settings.file || _settings.position === 'control-bar') {\r\n            return;\r\n        }\r\n\r\n        if (!_logo) {\r\n            _logo = createElement(logoTemplate(_settings.position, _settings.hide));\r\n        }\r\n\r\n        _model.set('logo', _settings);\r\n\r\n        // apply styles onload when image width and height are known\r\n        _img.onload = function () {\r\n            // update logo style\r\n            let height = this.height;\r\n            let width = this.width;\r\n            const styles = {\r\n                backgroundImage: 'url(\"' + this.src + '\")'\r\n            };\r\n            if (_settings.margin !== LogoDefaults.margin) {\r\n                const positions = (/(\\w+)-(\\w+)/).exec(_settings.position);\r\n                if (positions.length === 3) {\r\n                    styles['margin-' + positions[1]] = _settings.margin;\r\n                    styles['margin-' + positions[2]] = _settings.margin;\r\n                }\r\n            }\r\n\r\n            // Constraint logo size to 15% of their respective player dimension\r\n            const maxHeight = _model.get('containerHeight') * 0.15;\r\n            const maxWidth = _model.get('containerWidth') * 0.15;\r\n\r\n            if (height > maxHeight || width > maxWidth) {\r\n                const logoAR = width / height;\r\n                const videoAR = maxWidth / maxHeight;\r\n\r\n                if (videoAR > logoAR) {\r\n                    // height = max dimension\r\n                    height = maxHeight;\r\n                    width = maxHeight * logoAR;\r\n                } else {\r\n                    // width = max dimension\r\n                    width = maxWidth;\r\n                    height = maxWidth / logoAR;\r\n                }\r\n            }\r\n\r\n            styles.width = Math.round(width);\r\n            styles.height = Math.round(height);\r\n\r\n            style(_logo, styles);\r\n\r\n            // update title\r\n            _model.set('logoWidth', styles.width);\r\n        };\r\n\r\n        _img.src = _settings.file;\r\n\r\n        const logoInteractHandler = new UI(_logo);\r\n\r\n        if (_settings.link) {\r\n            _logo.setAttribute('tabindex', '0');\r\n            _logo.setAttribute('aria-label', 'Logo');\r\n        }\r\n\r\n        logoInteractHandler.on('click tap enter', function (evt) {\r\n            if (evt && evt.stopPropagation) {\r\n                evt.stopPropagation();\r\n            }\r\n\r\n            this.trigger(LOGO_CLICK, {\r\n                link: _settings.link,\r\n                linktarget: _settings.linktarget\r\n            });\r\n\r\n        }, this);\r\n    };\r\n\r\n    this.setContainer = function(container) {\r\n        if (_logo) {\r\n            container.appendChild(_logo);\r\n        }\r\n    };\r\n\r\n    this.element = function() {\r\n        return _logo;\r\n    };\r\n\r\n    this.position = function() {\r\n        return _settings.position;\r\n    };\r\n\r\n    this.destroy = function() {\r\n        _img.onload = null;\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/logo.js","export default (position, hide) => {\r\n    const jwhide = hide ? ' jw-hide' : '';\r\n    return `<div class=\"jw-logo jw-logo-${position}${jwhide} jw-reset\"></div>`;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/logo.js","import { style } from 'utils/css';\r\n\r\nconst Preview = function(_model) {\r\n    this.model = _model;\r\n    this.image = null;\r\n};\r\n\r\nfunction validState(state) {\r\n    return state === 'complete' || state === 'idle' || state === 'error';\r\n}\r\n\r\nObject.assign(Preview.prototype, {\r\n    setup: function(element) {\r\n        this.el = element;\r\n    },\r\n    setImage: function(img) {\r\n        // Remove onload function from previous image\r\n        var image = this.image;\r\n        if (image) {\r\n            image.onload = null;\r\n        }\r\n        this.image = null;\r\n        if (!validState(this.model.get('state'))) {\r\n            return;\r\n        }\r\n        this.model.off('change:state', null, this);\r\n        var backgroundImage = '';\r\n        if (typeof img === 'string') {\r\n            backgroundImage = 'url(\"' + img + '\")';\r\n            image = this.image = new Image();\r\n            image.src = img;\r\n        }\r\n        style(this.el, {\r\n            backgroundImage: backgroundImage\r\n        });\r\n    },\r\n    resize: function(width, height, stretching) {\r\n        if (stretching === 'uniform') {\r\n            if (width) {\r\n                this.playerAspectRatio = width / height;\r\n            }\r\n            if (!this.playerAspectRatio ||\r\n                !this.image ||\r\n                !validState(this.model.get('state'))) {\r\n                return;\r\n            }\r\n            // snap image to edges when the difference in aspect ratio is less than 9%\r\n            var image = this.image;\r\n            var backgroundSize = null;\r\n            if (image) {\r\n                if (image.width === 0) {\r\n                    var _this = this;\r\n                    image.onload = function() {\r\n                        _this.resize(width, height, stretching);\r\n                    };\r\n                    return;\r\n                }\r\n                var imageAspectRatio = image.width / image.height;\r\n                if (Math.abs(this.playerAspectRatio - imageAspectRatio) < 0.09) {\r\n                    backgroundSize = 'cover';\r\n                }\r\n            }\r\n            style(this.el, {\r\n                backgroundSize: backgroundSize\r\n            });\r\n        }\r\n    },\r\n    element: function() {\r\n        return this.el;\r\n    }\r\n});\r\n\r\nexport default Preview;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/preview.js","import { style } from 'utils/css';\r\n\r\nconst Title = function(_model) {\r\n    this.model = _model;\r\n};\r\n\r\nObject.assign(Title.prototype, {\r\n    // This is normally shown/hidden by states\r\n    //   these are only used for when no title exists\r\n    hide: function() {\r\n        style(this.el, { display: 'none' });\r\n    },\r\n    show: function() {\r\n        style(this.el, { display: '' });\r\n    },\r\n\r\n    setup: function(titleEl) {\r\n        this.el = titleEl;\r\n\r\n        // Perform the DOM search only once\r\n        var arr = this.el.getElementsByTagName('div');\r\n        this.title = arr[0];\r\n        this.description = arr[1];\r\n\r\n        this.model.on('change:logoWidth', this.update, this);\r\n        this.model.change('playlistItem', this.playlistItem, this);\r\n    },\r\n\r\n    update: function(model) {\r\n        var titleStyle = {};\r\n        var logo = model.get('logo');\r\n        if (logo) {\r\n            // Only use Numeric or pixel (\"Npx\") margin values\r\n            var margin = 1 * ('' + logo.margin).replace('px', '');\r\n            var padding = model.get('logoWidth') + (isNaN(margin) ? 0 : margin + 10);\r\n            if (logo.position === 'top-left') {\r\n                titleStyle.paddingLeft = padding;\r\n            } else if (logo.position === 'top-right') {\r\n                titleStyle.paddingRight = padding;\r\n            }\r\n        }\r\n        style(this.el, titleStyle);\r\n    },\r\n\r\n    playlistItem: function(model, item) {\r\n        if (!item) {\r\n            return;\r\n        }\r\n        if (model.get('displaytitle') || model.get('displaydescription')) {\r\n            var title = '';\r\n            var description = '';\r\n\r\n            if (item.title && model.get('displaytitle')) {\r\n                title = item.title;\r\n            }\r\n            if (item.description && model.get('displaydescription')) {\r\n                description = item.description;\r\n            }\r\n\r\n            this.updateText(title, description);\r\n        } else {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    updateText: function(title, description) {\r\n        this.title.innerHTML = title;\r\n        this.description.innerHTML = description;\r\n\r\n        if (this.title.firstChild || this.description.firstChild) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    element: function() {\r\n        return this.el;\r\n    }\r\n});\r\n\r\nexport default Title;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/view/title.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/postcss-loader/lib/index.js!../../node_modules/less-loader/dist/cjs.js??ref--0-3!./jwplayer.less\");\nif(typeof content === 'string') content = [['all-players', content, '']];\n// add the styles to the DOM\nrequire(\"!../../node_modules/simple-style-loader/addStyles.js\").style(content,'all-players');\nif(content.locals) module.exports = content.locals;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/jwplayer.less\n// module id = 161\n// module chunks = 0 1 2 3 5","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".jw-reset{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Arial,Helvetica,sans-serif;font-size:1em;line-height:1em;list-style:none;text-align:left;text-transform:none;vertical-align:baseline;border:0;direction:ltr;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}body .jw-error,body .jwplayer.jw-state-error{height:100%;width:100%}.jw-title{position:absolute;top:0}.jw-background-color{background:rgba(0,0,0,0.4)}.jw-text{color:rgba(255,255,255,0.8)}.jw-knob{color:rgba(255,255,255,0.8);background-color:#fff}.jw-button-color{color:rgba(255,255,255,0.8)}:not(.jw-flag-touch) .jw-button-color:not(.jw-logo-button):focus,:not(.jw-flag-touch) .jw-button-color:not(.jw-logo-button):hover{outline:none;color:#fff}.jw-toggle{color:#fff}.jw-toggle.jw-off{color:rgba(255,255,255,0.8)}.jw-toggle.jw-off:focus{color:#fff}.jw-toggle:focus{outline:none}:not(.jw-flag-touch) .jw-toggle.jw-off:hover{color:#fff}.jw-rail{background:rgba(255,255,255,0.3)}.jw-buffer{background:rgba(255,255,255,0.3)}.jw-progress{background:#f2f2f2}.jw-time-tip,.jw-volume-tip{border:0}.jw-slider-volume.jw-volume-tip.jw-background-color.jw-slider-vertical{background:none}.jw-skip{padding:.5em;outline:none}.jw-skip .jw-skiptext,.jw-skip .jw-skip-icon{color:rgba(255,255,255,0.8)}.jw-skip.jw-skippable:hover .jw-skip-icon,.jw-skip.jw-skippable:focus .jw-skip-icon{color:#fff}.jw-icon-cast button{--connected-color:#fff;--disconnected-color:rgba(255,255,255,0.8)}.jw-icon-cast button:focus{outline:none}.jw-icon-cast button.jw-off{--connected-color:rgba(255,255,255,0.8)}.jw-icon-cast:focus button{--connected-color:#fff;--disconnected-color:#fff}.jw-icon-cast:hover button{--connected-color:#fff;--disconnected-color:#fff}.jw-nextup-container{bottom:2.5em;padding:5px .5em}.jw-nextup{border-radius:0}.jw-color-active{color:#fff;stroke:#fff;border-color:#fff}:not(.jw-flag-touch) .jw-color-active-hover:hover{color:#fff;stroke:#fff;border-color:#fff}.jw-color-inactive{color:rgba(255,255,255,0.8);stroke:rgba(255,255,255,0.8);border-color:rgba(255,255,255,0.8)}:not(.jw-flag-touch) .jw-color-inactive-hover:hover{color:rgba(255,255,255,0.8);stroke:rgba(255,255,255,0.8);border-color:rgba(255,255,255,0.8)}.jw-option{color:rgba(255,255,255,0.8)}.jw-option.jw-active-option{color:#fff;background-color:rgba(255,255,255,0.1)}:not(.jw-flag-touch) .jw-option:hover{color:#fff}.jwplayer{width:100%;font-size:16px;position:relative;display:block;min-height:0;overflow:hidden;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;background-color:#000;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jwplayer *{box-sizing:inherit}.jwplayer.jw-flag-aspect-mode{height:auto !important}.jwplayer.jw-flag-aspect-mode .jw-aspect{display:block}.jwplayer .jw-aspect{display:none}.jwplayer.jw-no-focus:focus,.jwplayer .jw-swf{outline:none}.jwplayer.jw-ie:focus{outline:#585858 dotted 1px}.jw-media,.jw-preview{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jw-media{overflow:hidden;cursor:pointer}.jw-plugin{position:absolute;bottom:66px}.jw-plugin .jw-banner{max-width:100%;opacity:0;cursor:pointer;position:absolute;margin:auto auto 0;left:0;right:0;bottom:0;display:block}.jw-preview,.jw-captions,.jw-title{pointer-events:none}.jw-media,.jw-logo{pointer-events:all}.jwplayer video{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:auto;background:transparent}.jwplayer video::-webkit-media-controls-start-playback-button{display:none}.jwplayer.jw-stretch-uniform video{object-fit:contain}.jwplayer.jw-stretch-none video{object-fit:none}.jwplayer.jw-stretch-fill video{object-fit:cover}.jwplayer.jw-stretch-exactfit video{object-fit:fill}.jw-preview{position:absolute;display:none;opacity:1;visibility:visible;width:100%;height:100%;background:#000 no-repeat 50% 50%}.jwplayer .jw-preview,.jw-error .jw-preview{background-size:contain}.jw-stretch-none .jw-preview{background-size:auto auto}.jw-stretch-fill .jw-preview{background-size:cover}.jw-stretch-exactfit .jw-preview{background-size:100% 100%}.jw-title{display:none;padding-top:20px;width:100%;z-index:1}.jw-title-primary,.jw-title-secondary{color:#fff;padding-left:20px;padding-right:20px;padding-bottom:.5em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.jw-title-primary{font-size:1.625em}.jw-breakpoint-2 .jw-title-primary,.jw-breakpoint-3 .jw-title-primary{font-size:1.5em}.jw-flag-small-player .jw-title-primary{font-size:1.25em}.jw-flag-small-player .jw-title-secondary,.jw-title-secondary:empty{display:none}.jw-captions{position:absolute;width:100%;height:100%;text-align:center;display:none;max-height:calc(100% - 60px);letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;text-decoration:none;pointer-events:none;overflow:hidden;top:0}.jw-captions.jw-captions-enabled{display:block}.jw-captions-window{display:none;padding:.25em;border-radius:.25em}.jw-captions-window.jw-captions-window-active{display:inline-block}.jw-captions-text{display:inline-block;color:#fff;background-color:#000;word-wrap:normal;word-break:normal;white-space:pre-line;font-style:normal;font-weight:normal;text-align:center;text-decoration:none}.jw-text-track-display{font-size:inherit;line-height:1.5}.jw-text-track-cue{background-color:rgba(0,0,0,0.5);color:#fff;padding:.1em .3em}.jwplayer video::-webkit-media-controls{display:none;justify-content:flex-start}.jwplayer video::-webkit-media-text-track-container{max-height:calc(100% - 60px);line-height:normal}.jwplayer video::-webkit-media-text-track-display{min-width:-webkit-min-content}.jwplayer video::cue{background-color:rgba(0,0,0,0.5)}.jwplayer video::-webkit-media-controls-panel-container{display:none}.jw-logo{position:absolute;margin:20px;cursor:pointer;pointer-events:all;background-repeat:no-repeat;background-size:contain;top:auto;right:auto;left:auto;bottom:auto}.jw-flag-audio-player .jw-logo{display:none}.jw-logo-top-right{top:0;right:0}.jw-logo-top-left{top:0;left:0}.jw-logo-bottom-left{left:0}.jw-logo-bottom-right{right:0}.jw-logo-bottom-left,.jw-logo-bottom-right{bottom:44px;transition:bottom 150ms cubic-bezier(0, -0.25, .25, 1)}.jw-state-idle .jw-logo{z-index:1}.jw-state-setup{background-color:transparent}.jw-state-setup .jw-logo,.jw-state-setup .jw-controls,.jw-state-setup .jw-controls-backdrop{visibility:hidden}body .jw-error,body .jwplayer.jw-state-error{background-color:#333;color:#fff;font-size:16px;display:table;opacity:1;overflow:hidden;position:relative}body .jw-error .jw-display,body .jwplayer.jw-state-error .jw-display{display:none}body .jw-error .jw-media,body .jwplayer.jw-state-error .jw-media{cursor:default}body .jw-error .jw-preview,body .jwplayer.jw-state-error .jw-preview{background-color:#333}body .jw-error .jw-error-msg,body .jwplayer.jw-state-error .jw-error-msg{top:50%;position:absolute;left:50%;align-items:center;background-color:#000;border-radius:2px;display:flex;padding:20px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}body .jw-error .jw-error-msg .jw-icon,body .jwplayer.jw-state-error .jw-error-msg .jw-icon{height:30px;width:30px;margin-right:20px;flex:0 0 auto}body .jw-error .jw-error-msg .jw-icon:empty,body .jwplayer.jw-state-error .jw-error-msg .jw-icon:empty{display:none}body .jw-error .jw-error-msg .jw-title,body .jwplayer.jw-state-error .jw-error-msg .jw-title{display:block;position:static}body .jw-error .jw-error-msg .jw-title,body .jwplayer.jw-state-error .jw-error-msg .jw-title,body .jw-error .jw-error-msg .jw-title-primary,body .jwplayer.jw-state-error .jw-error-msg .jw-title-primary,body .jw-error .jw-error-msg .jw-title-secondary,body .jwplayer.jw-state-error .jw-error-msg .jw-title-secondary{font-size:14px;line-height:1.35;padding:0}body .jw-error .jw-error-msg .jw-title-primary,body .jwplayer.jw-state-error .jw-error-msg .jw-title-primary{font-weight:600;white-space:normal}.jwplayer.jw-state-error.jw-flag-audio-player .jw-error-msg{height:100%;width:100%;top:0;position:absolute;left:0;background:#000;-webkit-transform:none;transform:none;padding:0 16px;z-index:1}body .jwplayer.jw-state-error .jw-title,body .jw-error .jw-title,.jw-state-idle .jw-title,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player):not(.jw-flag-overlay-open-related) .jw-title{display:block}body .jwplayer.jw-state-error .jw-preview,body .jw-error .jw-preview,.jw-state-idle .jw-preview,.jwplayer.jw-state-complete:not(.jw-flag-casting):not(.jw-flag-audio-player):not(.jw-flag-overlay-open-related) .jw-preview{display:block}.jw-state-idle .jw-captions,.jwplayer.jw-state-complete .jw-captions,body .jwplayer.jw-state-error .jw-captions{display:none}.jw-state-idle video::-webkit-media-text-track-container,.jwplayer.jw-state-complete video::-webkit-media-text-track-container,body .jwplayer.jw-state-error video::-webkit-media-text-track-container{display:none}.jwplayer.jw-flag-fullscreen{width:100% !important;height:100% !important;top:0;right:0;bottom:0;left:0;z-index:1000;margin:0;position:fixed}body .jwplayer.jw-flag-flash-blocked .jw-title{display:block}.jwplayer.jw-flag-controls-hidden .jw-captions{max-height:none}.jwplayer.jw-flag-controls-hidden video::-webkit-media-text-track-container{max-height:none}.jwplayer.jw-flag-controls-hidden .jw-media{cursor:default}.jw-flag-audio-player:not(.jw-flag-flash-blocked) .jw-media{visibility:hidden}.jw-flag-audio-player .jw-title{background:none}.jw-flag-audio-player object{min-height:45px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/postcss-loader/lib!./node_modules/less-loader/dist/cjs.js?{\"compress\":true,\"strictMath\":true,\"noIeCompat\":true}!./src/css/jwplayer.less\n// module id = 162\n// module chunks = 0 1 2 3 5","export default function middleware(model, type, currentState) {\r\n    let newState = currentState;\r\n\r\n    switch (type) {\r\n        case 'time':\r\n        case 'beforePlay':\r\n        case 'pause':\r\n        case 'play':\r\n        case 'ready': {\r\n            const viewable = model.get('viewable');\r\n            // Don't add viewable to events if we don't know we're viewable\r\n            if (viewable !== undefined) {\r\n                // Emit viewable as 0 or 1\r\n                newState = Object.assign({}, currentState, { viewable: viewable });\r\n            }\r\n            break;\r\n        }\r\n        default: {\r\n            break;\r\n        }\r\n    }\r\n\r\n    return newState;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/controller/events-middleware.js","\r\n// It's DVR if the duration is above the minDvrWindow, Live otherwise\r\nexport function isDvr(duration, minDvrWindow) {\r\n    return Math.abs(duration) >= Math.max(minDvrWindow, 0);\r\n}\r\n\r\n// Determine the adaptive type - Live, DVR, or VOD\r\n// Duration can be positive or negative, but minDvrWindow should always be positive\r\nexport function streamType(duration, minDvrWindow) {\r\n    const _minDvrWindow = (minDvrWindow === undefined) ? 120 : minDvrWindow;\r\n    let type = 'VOD';\r\n\r\n    if (duration === Infinity) {\r\n        // Live streams are always Infinity duration\r\n        type = 'LIVE';\r\n    } else if (duration < 0) {\r\n        type = isDvr(duration, _minDvrWindow) ? 'DVR' : 'LIVE';\r\n    }\r\n\r\n    // Default option is VOD (i.e. positive or non-infinite)\r\n    return type;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/utils/stream-type.js","export default function endOfRange(timeRanges) {\r\n    if (!timeRanges || !timeRanges.length) {\r\n        return 0;\r\n    }\r\n\r\n    return timeRanges.end(timeRanges.length - 1);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/time-ranges.js","export function qualityLevel(level) {\r\n    return {\r\n        bitrate: level.bitrate,\r\n        label: level.label,\r\n        width: level.width,\r\n        height: level.height\r\n    };\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/data-normalizer.js","import { STATE_IDLE, STATE_COMPLETE, STATE_STALLED, STATE_LOADING, STATE_PLAYING, STATE_PAUSED,\r\n    PROVIDER_FIRST_FRAME, CLICK, MEDIA_BUFFER_FULL, MEDIA_RATE_CHANGE, MEDIA_ERROR,\r\n    MEDIA_BUFFER, MEDIA_META, MEDIA_TIME, MEDIA_SEEKED, MEDIA_VOLUME, MEDIA_MUTE, MEDIA_COMPLETE\r\n} from 'events/events';\r\nimport utils from 'utils/helpers';\r\n\r\n// This will trigger the events required by jwplayer model to\r\n//  properly follow the state of the video tag\r\n//\r\n// Assumptions\r\n//  1. All functions are bound to the \"this\" of the provider\r\n//  2. The provider has an attribute \"video\" which is the video tag\r\n\r\nconst VideoListenerMixin = {\r\n    canplay() {\r\n        this.trigger(MEDIA_BUFFER_FULL);\r\n    },\r\n\r\n    play() {\r\n        if (!this.video.paused && this.state !== STATE_PLAYING) {\r\n            this.setState(STATE_LOADING);\r\n        }\r\n    },\r\n\r\n    loadedmetadata() {\r\n        var metadata = {\r\n            duration: this.getDuration(),\r\n            height: this.video.videoHeight,\r\n            width: this.video.videoWidth\r\n        };\r\n        var drmUsed = this.drmUsed;\r\n        if (drmUsed) {\r\n            metadata.drm = drmUsed;\r\n        }\r\n        this.trigger(MEDIA_META, metadata);\r\n    },\r\n\r\n    timeupdate() {\r\n        this.stopStallCheck();\r\n        var height = this.video.videoHeight;\r\n        if (height !== this._helperLastVideoHeight) {\r\n            if (this.adaptation) {\r\n                this.adaptation({\r\n                    size: {\r\n                        width: this.video.videoWidth,\r\n                        height: height\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        this._helperLastVideoHeight = height;\r\n\r\n        const position = this.getCurrentTime();\r\n        const duration = this.getDuration();\r\n        if (isNaN(duration)) {\r\n            return;\r\n        }\r\n\r\n        if (!this.seeking && !this.video.paused && (this.state === STATE_STALLED || this.state === STATE_LOADING)) {\r\n            this.startStallCheck();\r\n            this.setState(STATE_PLAYING);\r\n        }\r\n\r\n        var timeEventObject = {\r\n            position: position,\r\n            duration: duration\r\n        };\r\n        if (this.getPtsOffset) {\r\n            var ptsOffset = this.getPtsOffset();\r\n            if (ptsOffset >= 0) {\r\n                timeEventObject.metadata = {\r\n                    mpegts: ptsOffset + position\r\n                };\r\n            }\r\n        }\r\n\r\n        // only emit time events when playing or seeking\r\n        if (this.state === STATE_PLAYING || this.seeking) {\r\n            this.trigger(MEDIA_TIME, timeEventObject);\r\n        }\r\n    },\r\n\r\n    click(evt) {\r\n        this.trigger(CLICK, evt);\r\n    },\r\n\r\n    volumechange() {\r\n        var video = this.video;\r\n\r\n        this.trigger(MEDIA_VOLUME, {\r\n            volume: Math.round(video.volume * 100)\r\n        });\r\n\r\n        this.trigger(MEDIA_MUTE, {\r\n            mute: video.muted\r\n        });\r\n    },\r\n\r\n    seeked() {\r\n        if (!this.seeking) {\r\n            return;\r\n        }\r\n        this.seeking = false;\r\n        this.trigger(MEDIA_SEEKED);\r\n    },\r\n\r\n    playing() {\r\n        if (!this.seeking) {\r\n            this.setState(STATE_PLAYING);\r\n        }\r\n        this.trigger(PROVIDER_FIRST_FRAME);\r\n    },\r\n\r\n    pause() {\r\n        // Sometimes the browser will fire \"complete\" and then a \"pause\" event\r\n        if (this.state === STATE_COMPLETE) {\r\n            return;\r\n        }\r\n        if (this.video.ended) {\r\n            return;\r\n        }\r\n        if (this.video.error) {\r\n            return;\r\n        }\r\n        // If \"pause\" fires before \"complete\", we still don't want to propagate it\r\n        if (this.video.currentTime === this.video.duration) {\r\n            return;\r\n        }\r\n        this.setState(STATE_PAUSED);\r\n    },\r\n\r\n    progress() {\r\n        var dur = this.getDuration();\r\n        if (dur <= 0 || dur === Infinity) {\r\n            return;\r\n        }\r\n        var buf = this.video.buffered;\r\n        if (!buf || buf.length === 0) {\r\n            return;\r\n        }\r\n\r\n        var buffered = utils.between(buf.end(buf.length - 1) / dur, 0, 1);\r\n        this.trigger(MEDIA_BUFFER, {\r\n            bufferPercent: buffered * 100,\r\n            position: this.getCurrentTime(),\r\n            duration: dur\r\n        });\r\n    },\r\n\r\n    ratechange() {\r\n        this.trigger(MEDIA_RATE_CHANGE, { playbackRate: this.video.playbackRate });\r\n    },\r\n\r\n    ended() {\r\n        this.stopStallCheck();\r\n        this._helperLastVideoHeight = 0;\r\n        if (this.state !== STATE_IDLE && this.state !== STATE_COMPLETE) {\r\n            this.trigger(MEDIA_COMPLETE);\r\n        }\r\n    },\r\n    loadeddata () {\r\n        // If we're not rendering natively text tracks will be provided from another source - don't duplicate them here\r\n        if (this.renderNatively) {\r\n            this.setTextTracks(this.video.textTracks);\r\n        }\r\n    },\r\n    error() {\r\n        var code = (this.video.error && this.video.error.code) || -1;\r\n        var message = ({\r\n            1: 'Unknown operation aborted',\r\n            2: 'Unknown network error',\r\n            3: 'Unknown decode error',\r\n            4: 'File could not be played'\r\n        }[code] || 'Unknown');\r\n        this.trigger(MEDIA_ERROR, {\r\n            code: code,\r\n            message: 'Error loading media: ' + message\r\n        });\r\n    }\r\n};\r\n\r\nexport default VideoListenerMixin;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/video-listener-mixin.js","import { style } from 'utils/css';\r\n\r\nconst VideoActionsMixin = {\r\n    container: null,\r\n\r\n    volume: function(vol) {\r\n        vol = Math.max(Math.min(vol / 100, 1), 0);\r\n        this.video.volume = vol;\r\n    },\r\n\r\n    mute: function(state) {\r\n        this.video.muted = !!state;\r\n        if (!this.video.muted) {\r\n            // Remove muted attribute once user unmutes so the video element doesn't get\r\n            // muted by the browser when the src changes or on replay\r\n            this.video.removeAttribute('muted');\r\n        }\r\n    },\r\n\r\n    resize: function(width, height, stretching) {\r\n        if (!width || !height || !this.video.videoWidth || !this.video.videoHeight) {\r\n            return false;\r\n        }\r\n        if (stretching === 'uniform') {\r\n            // snap video to edges when the difference in aspect ratio is less than 9%\r\n            var playerAspectRatio = width / height;\r\n            var videoAspectRatio = this.video.videoWidth / this.video.videoHeight;\r\n            var objectFit = null;\r\n            if (Math.abs(playerAspectRatio - videoAspectRatio) < 0.09) {\r\n                objectFit = 'fill';\r\n            }\r\n            style(this.video, {\r\n                objectFit,\r\n                width: null,\r\n                height: null\r\n            });\r\n        }\r\n        return false;\r\n    },\r\n\r\n    getContainer: function() {\r\n        return this.container;\r\n    },\r\n\r\n    setContainer: function(element) {\r\n        this.container = element;\r\n        if (this.video !== element.firstChild) {\r\n            element.insertBefore(this.video, element.firstChild);\r\n        }\r\n    },\r\n\r\n    remove: function() {\r\n        this.stop();\r\n        this.destroy();\r\n        if (this.container === this.video.parentNode) {\r\n            this.container.removeChild(this.video);\r\n        }\r\n    }\r\n};\r\n\r\nexport default VideoActionsMixin;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/video-actions-mixin.js","import { STATE_LOADING, STATE_STALLED, STATE_ERROR } from 'events/events';\r\nimport endOfRange from 'utils/time-ranges';\r\n\r\nconst STALL_DELAY = 256;\r\n\r\nconst VideoAttachedMixin = {\r\n    stallCheckTimeout_: -1,\r\n    lastStalledTime_: NaN,\r\n\r\n    attachMedia: function() {\r\n        this.eventsOn_();\r\n    },\r\n\r\n    detachMedia: function() {\r\n        this.stopStallCheck();\r\n        this.eventsOff_();\r\n\r\n        return this.video;\r\n    },\r\n\r\n    stopStallCheck: function() {\r\n        clearTimeout(this.stallCheckTimeout_);\r\n    },\r\n\r\n    startStallCheck: function() {\r\n        this.stopStallCheck();\r\n        this.stallCheckTimeout_ = setTimeout(this.stalledHandler.bind(this, this.video.currentTime), STALL_DELAY);\r\n    },\r\n\r\n    stalledHandler: function(checkStartTime) {\r\n        if (checkStartTime !== this.video.currentTime) {\r\n            return;\r\n        }\r\n\r\n        if (this.video.paused || this.video.ended) {\r\n            return;\r\n        }\r\n\r\n        // A stall after loading/error, should just stay loading/error\r\n        if (this.state === STATE_LOADING || this.state === STATE_ERROR) {\r\n            return;\r\n        }\r\n\r\n        // During seek we stay in paused state\r\n        if (this.seeking) {\r\n            return;\r\n        }\r\n\r\n        if (this.atEdgeOfLiveStream()) {\r\n            this.setPlaybackRate(1);\r\n        }\r\n        this.setState(STATE_STALLED);\r\n    },\r\n\r\n    atEdgeOfLiveStream: function() {\r\n        if (!this.isLive()) {\r\n            return false;\r\n        }\r\n\r\n        // currentTime doesn't always get to the end of the buffered range\r\n        const timeFudge = 2;\r\n        return (endOfRange(this.video.buffered) - this.video.currentTime) <= timeFudge;\r\n    },\r\n\r\n    setAutoplayAttributes: function() {\r\n        this.video.setAttribute('autoplay', '');\r\n        this.video.setAttribute('muted', '');\r\n    },\r\n\r\n    removeAutoplayAttributes: function() {\r\n        this.video.removeAttribute('autoplay');\r\n        this.video.removeAttribute('muted');\r\n    }\r\n};\r\n\r\nexport default VideoAttachedMixin;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/video-attached-mixin.js","import { loadFile, cancelXhr, convertToVTTCues } from 'controller/tracks-loader';\r\nimport { createId, createLabel } from 'controller/tracks-helper';\r\nimport { parseID3 } from 'providers/utils/id3Parser';\r\nimport { Browser } from 'environment/environment';\r\nimport { ERROR } from 'events/events';\r\nimport _ from 'utils/underscore';\r\n\r\n/**\r\n * Used across all providers for loading tracks and handling browser track-related events\r\n */\r\nconst Tracks = {\r\n    _itemTracks: null,\r\n    _textTracks: null,\r\n    _tracksById: null,\r\n    _cuesByTrackId: null,\r\n    _cachedVTTCues: null,\r\n    _metaCuesByTextTime: null,\r\n    _currentTextTrackIndex: -1,\r\n    _unknownCount: 0,\r\n    _activeCuePosition: null,\r\n    _initTextTracks: _initTextTracks,\r\n    addTracksListener: addTracksListener,\r\n    clearTracks: clearTracks,\r\n    clearCueData: clearCueData,\r\n    disableTextTrack: disableTextTrack,\r\n    enableTextTrack: enableTextTrack,\r\n    getSubtitlesTrack: getSubtitlesTrack,\r\n    removeTracksListener: removeTracksListener,\r\n    addTextTracks: addTextTracks,\r\n    setTextTracks: setTextTracks,\r\n    setupSideloadedTracks: setupSideloadedTracks,\r\n    setSubtitlesTrack: setSubtitlesTrack,\r\n    textTrackChangeHandler: null,\r\n    addTrackHandler: null,\r\n    addCuesToTrack: addCuesToTrack,\r\n    addCaptionsCue: addCaptionsCue,\r\n    addVTTCue: addVTTCue,\r\n    addVTTCuesToTrack: addVTTCuesToTrack,\r\n    renderNatively: false\r\n};\r\n\r\nfunction setTextTracks(tracks) {\r\n    this._currentTextTrackIndex = -1;\r\n    if (!tracks) {\r\n        return;\r\n    }\r\n\r\n    if (!this._textTracks) {\r\n        this._initTextTracks();\r\n    } else {\r\n        // Remove the 608 captions track that was mutated by the browser\r\n        this._unknownCount = 0;\r\n        this._textTracks = _.reject(this._textTracks, function(track) {\r\n            const trackId = track._id;\r\n            if (this.renderNatively && trackId && trackId.indexOf('nativecaptions') === 0) {\r\n                delete this._tracksById[trackId];\r\n                return true;\r\n            } else if (track.name.indexOf('Unknown') === 0) {\r\n                this._unknownCount++;\r\n            }\r\n        }, this);\r\n\r\n        // Remove the ID3 track from the cache\r\n        delete this._tracksById.nativemetadata;\r\n    }\r\n\r\n    // filter for 'subtitles' or 'captions' tracks\r\n    if (tracks.length) {\r\n        var i = 0;\r\n        var len = tracks.length;\r\n\r\n        for (i; i < len; i++) {\r\n            var track = tracks[i];\r\n            if (!track._id) {\r\n                if (track.kind === 'captions' || track.kind === 'metadata') {\r\n                    track._id = 'native' + track.kind + i;\r\n                    if (!track.label && track.kind === 'captions') {\r\n                        // track label is read only in Safari\r\n                        // 'captions' tracks without a label need a name in order for the cc menu to work\r\n                        var labelInfo = createLabel(track, this._unknownCount);\r\n                        track.name = labelInfo.label;\r\n                        this._unknownCount = labelInfo.unknownCount;\r\n                    }\r\n                } else {\r\n                    track._id = createId(track, this._textTracks.length);\r\n                }\r\n                if (this._tracksById[track._id]) {\r\n                    // tracks without unique ids must not be marked as \"inuse\"\r\n                    continue;\r\n                }\r\n                track.inuse = true;\r\n            }\r\n            if (!track.inuse || this._tracksById[track._id]) {\r\n                continue;\r\n            }\r\n            // setup TextTrack\r\n            if (track.kind === 'metadata') {\r\n                // track mode needs to be \"hidden\", not \"showing\", so that cues don't display as captions in Firefox\r\n                track.mode = 'hidden';\r\n                track.oncuechange = _cueChangeHandler.bind(this);\r\n                this._tracksById[track._id] = track;\r\n            } else if (_kindSupported(track.kind)) {\r\n                var mode = track.mode;\r\n                var cue;\r\n\r\n                // By setting the track mode to 'hidden', we can determine if the track has cues\r\n                track.mode = 'hidden';\r\n\r\n                if (!track.cues.length && track.embedded) {\r\n                    // There's no method to remove tracks added via: video.addTextTrack.\r\n                    // This ensures the 608 captions track isn't added to the CC menu until it has cues\r\n                    continue;\r\n                }\r\n\r\n                track.mode = mode;\r\n\r\n                // Parsed cues may not have been added to this track yet\r\n                if (this._cuesByTrackId[track._id] && !this._cuesByTrackId[track._id].loaded) {\r\n                    var cues = this._cuesByTrackId[track._id].cues;\r\n                    while ((cue = cues.shift())) {\r\n                        _addCueToTrack(this.renderNatively, track, cue);\r\n                    }\r\n                    track.mode = mode;\r\n                    this._cuesByTrackId[track._id].loaded = true;\r\n                }\r\n\r\n                _addTrackToList.call(this, track);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (this.renderNatively) {\r\n        // Only bind and set this.textTrackChangeHandler once so that removeEventListener works\r\n        this.textTrackChangeHandler = this.textTrackChangeHandler || textTrackChangeHandler.bind(this);\r\n        this.addTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler);\r\n\r\n        if (Browser.edge || Browser.firefox || Browser.safari) {\r\n            // Listen for TextTracks added to the videotag after the onloadeddata event in Edge and Firefox\r\n            this.addTrackHandler = this.addTrackHandler || addTrackHandler.bind(this);\r\n            this.addTracksListener(this.video.textTracks, 'addtrack', this.addTrackHandler);\r\n        }\r\n    }\r\n\r\n    if (this._textTracks.length) {\r\n        this.trigger('subtitlesTracks', { tracks: this._textTracks });\r\n    }\r\n}\r\n\r\nfunction setupSideloadedTracks(itemTracks) {\r\n    // Add tracks if we're starting playback or resuming after a midroll\r\n\r\n    if (!this.renderNatively) {\r\n        return;\r\n    }\r\n    // Determine if the tracks are the same and the embedded + sideloaded count = # of tracks in the controlbar\r\n    var alreadyLoaded = itemTracks === this._itemTracks;\r\n    if (!alreadyLoaded) {\r\n        cancelXhr(this._itemTracks);\r\n    }\r\n    this._itemTracks = itemTracks;\r\n    if (!itemTracks) {\r\n        return;\r\n    }\r\n\r\n    if (!alreadyLoaded) {\r\n        this.disableTextTrack();\r\n        _clearSideloadedTextTracks.call(this);\r\n        this.addTextTracks(itemTracks);\r\n    }\r\n}\r\n\r\nfunction getSubtitlesTrack() {\r\n    return this._currentTextTrackIndex;\r\n}\r\n\r\nfunction setSubtitlesTrack(menuIndex) {\r\n    if (!this.renderNatively) {\r\n        if (this.setCurrentSubtitleTrack) {\r\n            this.setCurrentSubtitleTrack(menuIndex - 1);\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (!this._textTracks) {\r\n        return;\r\n    }\r\n\r\n    // 0 = 'Off'\r\n    if (menuIndex === 0) {\r\n        _.each(this._textTracks, function (track) {\r\n            track.mode = track.embedded ? 'hidden' : 'disabled';\r\n        });\r\n    }\r\n\r\n    // Track index is 1 less than controlbar index to account for 'Off' = 0.\r\n    // Prevent unnecessary track change events\r\n    if (this._currentTextTrackIndex === menuIndex - 1) {\r\n        return;\r\n    }\r\n\r\n    // Turn off current track\r\n    this.disableTextTrack();\r\n\r\n    // Set the provider's index to the model's index, then show the selected track if it exists\r\n    this._currentTextTrackIndex = menuIndex - 1;\r\n\r\n    if (this._textTracks[this._currentTextTrackIndex]) {\r\n        this._textTracks[this._currentTextTrackIndex].mode = 'showing';\r\n    }\r\n\r\n    // Update the model index since the track change may have come from a browser event\r\n    this.trigger('subtitlesTrackChanged', {\r\n        currentTrack: this._currentTextTrackIndex + 1,\r\n        tracks: this._textTracks\r\n    });\r\n}\r\n\r\nfunction addCaptionsCue(cueData) {\r\n    if (!cueData.text || !cueData.begin || !cueData.end) {\r\n        return;\r\n    }\r\n    var trackId = cueData.trackid.toString();\r\n    var track = this._tracksById && this._tracksById[trackId];\r\n    if (!track) {\r\n        track = {\r\n            kind: 'captions',\r\n            _id: trackId,\r\n            data: []\r\n        };\r\n        this.addTextTracks([track]);\r\n        this.trigger('subtitlesTracks', { tracks: this._textTracks });\r\n    }\r\n\r\n    var cueId;\r\n\r\n    if (cueData.useDTS) {\r\n        // There may not be any 608 captions when the track is first created\r\n        // Need to set the source so position is determined from metadata\r\n        if (!track.source) {\r\n            track.source = cueData.source || 'mpegts';\r\n        }\r\n\r\n    }\r\n    cueId = cueData.begin + '_' + cueData.text;\r\n\r\n    var cue = this._metaCuesByTextTime[cueId];\r\n    if (!cue) {\r\n        cue = {\r\n            begin: cueData.begin,\r\n            end: cueData.end,\r\n            text: cueData.text\r\n        };\r\n        this._metaCuesByTextTime[cueId] = cue;\r\n        var vttCue = convertToVTTCues([cue])[0];\r\n        track.data.push(vttCue);\r\n    }\r\n}\r\n\r\nfunction addVTTCue(cueData) {\r\n    if (!this._tracksById) {\r\n        this._initTextTracks();\r\n    }\r\n\r\n    var trackId = cueData.track ? cueData.track : 'native' + cueData.type;\r\n    var track = this._tracksById[trackId];\r\n    var label = cueData.type === 'captions' ? 'Unknown CC' : 'ID3 Metadata';\r\n    var vttCue = cueData.cue;\r\n\r\n    if (!track) {\r\n        var itemTrack = {\r\n            kind: cueData.type,\r\n            _id: trackId,\r\n            label: label,\r\n            embedded: true\r\n        };\r\n\r\n        track = _createTrack.call(this, itemTrack);\r\n\r\n        if (this.renderNatively || track.kind === 'metadata') {\r\n            this.setTextTracks(this.video.textTracks);\r\n        } else {\r\n            addTextTracks.call(this, [track]);\r\n        }\r\n    }\r\n    if (_cacheVTTCue.call(this, track, vttCue)) {\r\n        if (this.renderNatively || track.kind === 'metadata') {\r\n            _addCueToTrack(this.renderNatively, track, vttCue);\r\n        } else {\r\n            track.data.push(vttCue);\r\n        }\r\n    }\r\n}\r\n\r\nfunction addCuesToTrack(cueData) {\r\n    // convert cues coming from the flash provider into VTTCues, then append them to track\r\n    var track = this._tracksById[cueData.name];\r\n    if (!track) {\r\n        return;\r\n    }\r\n\r\n    track.source = cueData.source;\r\n    var cues = cueData.captions || [];\r\n    var cuesToConvert = [];\r\n    var sort = false;\r\n\r\n    for (var i = 0; i < cues.length; i++) {\r\n        var cue = cues[i];\r\n        var cueId = cueData.name + '_' + cue.begin + '_' + cue.end;\r\n        if (!this._metaCuesByTextTime[cueId]) {\r\n            this._metaCuesByTextTime[cueId] = cue;\r\n            cuesToConvert.push(cue);\r\n            sort = true;\r\n        }\r\n    }\r\n    if (sort) {\r\n        cuesToConvert.sort(function(a, b) {\r\n            return a.begin - b.begin;\r\n        });\r\n    }\r\n    var vttCues = convertToVTTCues(cuesToConvert);\r\n    Array.prototype.push.apply(track.data, vttCues);\r\n}\r\n\r\nfunction addTracksListener(tracks, eventType, handler) {\r\n    if (!tracks) {\r\n        return;\r\n    }\r\n    // Always remove existing listener\r\n    removeTracksListener(tracks, eventType, handler);\r\n\r\n    if (this.instreamMode) {\r\n        return;\r\n    }\r\n\r\n    if (tracks.addEventListener) {\r\n        tracks.addEventListener(eventType, handler);\r\n    } else {\r\n        tracks['on' + eventType] = handler;\r\n    }\r\n}\r\n\r\nfunction removeTracksListener(tracks, eventType, handler) {\r\n    if (!tracks) {\r\n        return;\r\n    }\r\n    if (tracks.removeEventListener) {\r\n        tracks.removeEventListener(eventType, handler);\r\n    } else {\r\n        tracks['on' + eventType] = null;\r\n    }\r\n}\r\n\r\nfunction clearTracks() {\r\n    cancelXhr(this._itemTracks);\r\n    var metadataTrack = this._tracksById && this._tracksById.nativemetadata;\r\n    if (this.renderNatively || metadataTrack) {\r\n        _removeCues(this.renderNatively, this.video.textTracks);\r\n        if (metadataTrack) {\r\n            metadataTrack.oncuechange = null;\r\n        }\r\n    }\r\n\r\n    this._itemTracks = null;\r\n    this._textTracks = null;\r\n    this._tracksById = null;\r\n    this._cuesByTrackId = null;\r\n    this._metaCuesByTextTime = null;\r\n    this._unknownCount = 0;\r\n    this._activeCuePosition = null;\r\n    if (this.renderNatively) {\r\n        // Removing listener first to ensure that removing cues does not trigger it unnecessarily\r\n        this.removeTracksListener(this.video.textTracks, 'change', this.textTrackChangeHandler);\r\n        _removeCues(this.renderNatively, this.video.textTracks);\r\n    }\r\n}\r\n\r\n// Clear track cues to prevent duplicates\r\nfunction clearCueData(trackId) {\r\n    if (this._cachedVTTCues[trackId]) {\r\n        this._cachedVTTCues[trackId] = {};\r\n        if (this._tracksById) {\r\n            this._tracksById[trackId].data = [];\r\n        }\r\n    }\r\n}\r\n\r\nfunction disableTextTrack() {\r\n    if (this._textTracks) {\r\n        var track = this._textTracks[this._currentTextTrackIndex];\r\n        if (track) {\r\n            // FF does not remove the active cue from the dom when the track is hidden, so we must disable it\r\n            track.mode = 'disabled';\r\n            const trackId = track._id;\r\n            if (trackId && trackId.indexOf('nativecaptions') === 0) {\r\n                track.mode = 'hidden';\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction enableTextTrack() {\r\n    if (this._textTracks) {\r\n        var track = this._textTracks[this._currentTextTrackIndex];\r\n        if (track) {\r\n            track.mode = 'showing';\r\n        }\r\n    }\r\n}\r\n\r\nfunction textTrackChangeHandler() {\r\n    var textTracks = this.video.textTracks;\r\n    var inUseTracks = _.filter(textTracks, function (track) {\r\n        return (track.inuse || !track._id) && _kindSupported(track.kind);\r\n    });\r\n    if (!this._textTracks || _tracksModified.call(this, inUseTracks)) {\r\n        this.setTextTracks(textTracks);\r\n        return;\r\n    }\r\n    // If a caption/subtitle track is showing, find its index\r\n    var selectedTextTrackIndex = -1;\r\n    for (var i = 0; i < this._textTracks.length; i++) {\r\n        if (this._textTracks[i].mode === 'showing') {\r\n            selectedTextTrackIndex = i;\r\n            break;\r\n        }\r\n    }\r\n\r\n    // Notifying the model when the index changes keeps the current index in sync in iOS Fullscreen mode\r\n    if (selectedTextTrackIndex !== this._currentTextTrackIndex) {\r\n        this.setSubtitlesTrack(selectedTextTrackIndex + 1);\r\n    }\r\n}\r\n\r\n// Used in MS Edge to get tracks from the videotag as they're added\r\nfunction addTrackHandler() {\r\n    this.setTextTracks(this.video.textTracks);\r\n}\r\n\r\nfunction addTextTracks(tracksArray) {\r\n    if (!tracksArray) {\r\n        return;\r\n    }\r\n\r\n    if (!this._textTracks) {\r\n        this._initTextTracks();\r\n    }\r\n\r\n    tracksArray.forEach(itemTrack => {\r\n        // only add valid and supported kinds https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track\r\n        if (itemTrack.kind && !_kindSupported(itemTrack.kind)) {\r\n            return;\r\n        }\r\n        var textTrackAny = _createTrack.call(this, itemTrack);\r\n        _addTrackToList.call(this, textTrackAny);\r\n        if (itemTrack.file) {\r\n            itemTrack.data = [];\r\n            loadFile(itemTrack,\r\n                (vttCues) => {\r\n                    this.addVTTCuesToTrack(textTrackAny, vttCues);\r\n                },\r\n                (error) => {\r\n                    this.trigger(ERROR, {\r\n                        message: 'Captions failed to load',\r\n                        reason: error\r\n                    });\r\n                });\r\n        }\r\n    });\r\n\r\n    if (this._textTracks && this._textTracks.length) {\r\n        this.trigger('subtitlesTracks', { tracks: this._textTracks });\r\n    }\r\n}\r\n\r\nfunction addVTTCuesToTrack(track, vttCues) {\r\n    if (!this.renderNatively) {\r\n        return;\r\n    }\r\n\r\n    var textTrack = this._tracksById[track._id];\r\n    // the track may not be on the video tag yet\r\n    if (!textTrack) {\r\n\r\n        if (!this._cuesByTrackId) {\r\n            this._cuesByTrackId = {};\r\n        }\r\n        this._cuesByTrackId[track._id] = { cues: vttCues, loaded: false };\r\n        return;\r\n    }\r\n    // Cues already added\r\n    if (this._cuesByTrackId[track._id] && this._cuesByTrackId[track._id].loaded) {\r\n        return;\r\n    }\r\n\r\n    var cue;\r\n    this._cuesByTrackId[track._id] = { cues: vttCues, loaded: true };\r\n\r\n    while ((cue = vttCues.shift())) {\r\n        _addCueToTrack(this.renderNatively, textTrack, cue);\r\n    }\r\n}\r\n\r\n// ////////////////////\r\n// //// PRIVATE METHODS\r\n// ////////////////////\r\n\r\nfunction _addCueToTrack(renderNatively, track, vttCue) {\r\n    if (!(Browser.ie && renderNatively) || !window.TextTrackCue) {\r\n        track.addCue(vttCue);\r\n        return;\r\n    }\r\n    // There's no support for the VTTCue interface in IE/Edge.\r\n    // We need to convert VTTCue to TextTrackCue before adding them to the TextTrack\r\n    // This unfortunately removes positioning properties from the cues\r\n    var textTrackCue = new window.TextTrackCue(vttCue.startTime, vttCue.endTime, vttCue.text);\r\n    track.addCue(textTrackCue);\r\n}\r\n\r\nfunction _removeCues(renderNatively, tracks) {\r\n    if (tracks && tracks.length) {\r\n        _.each(tracks, function(track) {\r\n            // Let IE & Edge handle cleanup of non-sideloaded text tracks for native rendering\r\n            if (Browser.ie && renderNatively && /^(native|subtitle|cc)/.test(track._id)) {\r\n                return;\r\n            }\r\n\r\n            // Cues are inaccessible if the track is disabled. While hidden,\r\n            // we can remove cues while the track is in a non-visible state\r\n            // Set to disabled before hidden to ensure active cues disappear\r\n            track.mode = 'disabled';\r\n            track.mode = 'hidden';\r\n            for (var i = track.cues.length; i--;) {\r\n                track.removeCue(track.cues[i]);\r\n            }\r\n            if (!track.embedded) {\r\n                track.mode = 'disabled';\r\n            }\r\n            track.inuse = false;\r\n        });\r\n    }\r\n}\r\n\r\nfunction _kindSupported(kind) {\r\n    return kind === 'subtitles' || kind === 'captions';\r\n}\r\n\r\nfunction _initTextTracks() {\r\n    this._textTracks = [];\r\n    this._tracksById = {};\r\n    this._metaCuesByTextTime = {};\r\n    this._cuesByTrackId = {};\r\n    this._cachedVTTCues = {};\r\n    this._unknownCount = 0;\r\n}\r\n\r\nfunction _createTrack(itemTrack) {\r\n    var track;\r\n    var labelInfo = createLabel(itemTrack, this._unknownCount);\r\n    var label = labelInfo.label;\r\n    this._unknownCount = labelInfo.unknownCount;\r\n\r\n    if (this.renderNatively || itemTrack.kind === 'metadata') {\r\n        var tracks = this.video.textTracks;\r\n        // TextTrack label is read only, so we'll need to create a new track if we don't\r\n        // already have one with the same label\r\n        track = _.findWhere(tracks, { label: label });\r\n\r\n        if (!track) {\r\n            track = this.video.addTextTrack(itemTrack.kind, label, itemTrack.language || '');\r\n        }\r\n\r\n        track.default = itemTrack.default;\r\n        track.mode = 'disabled';\r\n        track.inuse = true;\r\n    } else {\r\n        track = itemTrack;\r\n        track.data = track.data || [];\r\n    }\r\n\r\n    if (!track._id) {\r\n        track._id = createId(itemTrack, this._textTracks.length);\r\n    }\r\n\r\n    return track;\r\n}\r\n\r\nfunction _addTrackToList(track) {\r\n    this._textTracks.push(track);\r\n    this._tracksById[track._id] = track;\r\n}\r\n\r\nfunction _clearSideloadedTextTracks() {\r\n    // Clear VTT textTracks\r\n    if (!this._textTracks) {\r\n        return;\r\n    }\r\n    var nonSideloadedTracks = _.filter(this._textTracks, function (track) {\r\n        return track.embedded || track.groupid === 'subs';\r\n    });\r\n    this._initTextTracks();\r\n    _.each(nonSideloadedTracks, function (track) {\r\n        this._tracksById[track._id] = track;\r\n    });\r\n    this._textTracks = nonSideloadedTracks;\r\n}\r\n\r\nfunction _cueChangeHandler(e) {\r\n    var activeCues = e.currentTarget.activeCues;\r\n    if (!activeCues || !activeCues.length) {\r\n        return;\r\n    }\r\n\r\n    // Get the most recent start time. Cues are sorted by start time in ascending order by the browser\r\n    var startTime = activeCues[activeCues.length - 1].startTime;\r\n    // Prevent duplicate meta events for the same list of cues since the cue change handler fires once\r\n    // for each activeCue in Safari\r\n    if (this._activeCuePosition === startTime) {\r\n        return;\r\n    }\r\n    var dataCues = [];\r\n\r\n    _.each(activeCues, function(cue) {\r\n        if (cue.startTime < startTime) {\r\n            return;\r\n        }\r\n        if (cue.data || cue.value) {\r\n            dataCues.push(cue);\r\n        } else if (cue.text) {\r\n            this.trigger('meta', {\r\n                metadataTime: startTime,\r\n                metadata: JSON.parse(cue.text)\r\n            });\r\n        }\r\n    }, this);\r\n\r\n    if (dataCues.length) {\r\n        var id3Data = parseID3(dataCues);\r\n        this.trigger('meta', {\r\n            metadataTime: startTime,\r\n            metadata: id3Data\r\n        });\r\n    }\r\n    this._activeCuePosition = startTime;\r\n}\r\n\r\nfunction _cacheVTTCue(track, vttCue) {\r\n    var trackKind = track.kind;\r\n    if (!this._cachedVTTCues[track._id]) {\r\n        this._cachedVTTCues[track._id] = {};\r\n    }\r\n    var cachedCues = this._cachedVTTCues[track._id];\r\n    var cacheKeyTime;\r\n\r\n    switch (trackKind) {\r\n        case 'captions':\r\n        case 'subtitles':\r\n            // VTTCues should have unique start and end times, even in cases where there are multiple\r\n            // active cues. This is safer than ensuring text is unique, which may be violated on seek.\r\n            // Captions within .05s of each other are treated as unique to account for\r\n            // quality switches where start/end times are slightly different.\r\n            cacheKeyTime = Math.floor(vttCue.startTime * 20);\r\n            var cacheLine = '_' + vttCue.line;\r\n            var cacheValue = Math.floor(vttCue.endTime * 20);\r\n            var cueExists = cachedCues[cacheKeyTime + cacheLine] || cachedCues[(cacheKeyTime + 1) + cacheLine] || cachedCues[(cacheKeyTime - 1) + cacheLine];\r\n\r\n            if (cueExists && Math.abs(cueExists - cacheValue) <= 1) {\r\n                return false;\r\n            }\r\n\r\n            cachedCues[cacheKeyTime + cacheLine] = cacheValue;\r\n            return true;\r\n        case 'metadata':\r\n            var text = vttCue.data ? new Uint8Array(vttCue.data).join('') : vttCue.text;\r\n            cacheKeyTime = vttCue.startTime + text;\r\n            if (cachedCues[cacheKeyTime]) {\r\n                return false;\r\n            }\r\n\r\n            cachedCues[cacheKeyTime] = vttCue.endTime;\r\n            return true;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\nfunction _tracksModified(inUseTracks) {\r\n    // Need to add new textTracks coming from the video tag\r\n    if (inUseTracks.length > this._textTracks.length) {\r\n        return true;\r\n    }\r\n\r\n    // Tracks may have changed in Safari after an ad\r\n    for (var i = 0; i < inUseTracks.length; i++) {\r\n        var track = inUseTracks[i];\r\n        if (!track._id || !this._tracksById[track._id]) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport default Tracks;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/tracks-mixin.js","\r\nconst friendlyNames = {\r\n    TIT2: 'title',\r\n    TT2: 'title',\r\n    WXXX: 'url',\r\n    TPE1: 'artist',\r\n    TP1: 'artist',\r\n    TALB: 'album',\r\n    TAL: 'album'\r\n};\r\n\r\nexport function utf8ArrayToStr(array, startingIndex) {\r\n    // Based on code by Masanao Izumo <iz@onicos.co.jp>\r\n    // posted at http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt\r\n\r\n    const len = array.length;\r\n    let c;\r\n    let char2;\r\n    let char3;\r\n    let out = '';\r\n    let i = startingIndex || 0;\r\n    while (i < len) {\r\n        c = array[i++];\r\n        // If the character is 3 (END_OF_TEXT) or 0 (NULL) then skip it\r\n        if (c === 0x00 || c === 0x03) {\r\n            continue;\r\n        }\r\n        switch (c >> 4) {\r\n            case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\r\n            // 0xxxxxxx\r\n                out += String.fromCharCode(c);\r\n                break;\r\n            case 12: case 13:\r\n            // 110x xxxx   10xx xxxx\r\n                char2 = array[i++];\r\n                out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\r\n                break;\r\n            case 14:\r\n                // 1110 xxxx  10xx xxxx  10xx xxxx\r\n                char2 = array[i++];\r\n                char3 = array[i++];\r\n                out += String.fromCharCode(((c & 0x0F) << 12) |\r\n                    ((char2 & 0x3F) << 6) |\r\n                    ((char3 & 0x3F) << 0));\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    return out;\r\n}\r\n\r\nfunction utf16BigEndianArrayToStr(array, startingIndex) {\r\n    const lastDoubleByte = array.length - 1;\r\n    let out = '';\r\n    let i = startingIndex || 0;\r\n    while (i < lastDoubleByte) {\r\n        if (array[i] === 254 && array[i + 1] === 255) {\r\n            // Byte order mark\r\n        } else {\r\n            out += String.fromCharCode((array[i] << 8) + array[i + 1]);\r\n        }\r\n        i += 2;\r\n    }\r\n    return out;\r\n}\r\n    \r\nexport function syncSafeInt(sizeArray) {\r\n    const size = arrayToInt(sizeArray);\r\n    return (size & 0x0000007F) |\r\n        ((size & 0x00007F00) >> 1) |\r\n        ((size & 0x007F0000) >> 2) |\r\n        ((size & 0x7F000000) >> 3);\r\n}\r\n\r\nfunction arrayToInt(array) {\r\n    let sizeString = '0x';\r\n    for (let i = 0; i < array.length; i++) {\r\n        if (array[i] < 16) {\r\n            sizeString += '0';\r\n        }\r\n        sizeString += array[i].toString(16);\r\n    }\r\n    return parseInt(sizeString);\r\n}\r\n    \r\nexport function parseID3(activeCues = []) {\r\n    return activeCues.reduce(function(data, cue) {\r\n        if (!('value' in cue)) {\r\n            // Cue is not in Safari's key/data format\r\n            if ('data' in cue && cue.data instanceof ArrayBuffer) {\r\n                // EdgeHTML 13.10586 cue point format - contains raw data in an ArrayBuffer.\r\n\r\n                const oldCue = cue;\r\n                const array = new Uint8Array(oldCue.data);\r\n                let arrayLength = array.length;\r\n\r\n                cue = { value: { key: '', data: '' } };\r\n\r\n                let i = 10;\r\n                while (i < 14 && i < array.length) {\r\n                    if (array[i] === 0) {\r\n                        break;\r\n                    }\r\n                    cue.value.key += String.fromCharCode(array[i]);\r\n                    i++;\r\n                }\r\n\r\n                // If the first byte is 3 (END_OF_TEXT) or 0 (NULL) then skip it\r\n                let startPos = 19;\r\n                let firstByte = array[startPos];\r\n                if (firstByte === 0x03 || firstByte === 0x00) {\r\n                    firstByte = array[++startPos];\r\n                    arrayLength--;\r\n                }\r\n\r\n                let infoDelimiterPosition = 0;\r\n                // Find info/value pair delimiter if present.\r\n                // If first byte shows theres utf 16 encoding, there is no info since info cannot be utf 16 encoded\r\n                if (firstByte !== 0x01 && firstByte !== 0x02) {\r\n                    for (let j = startPos + 1; j < arrayLength; j++) {\r\n                        if (array[j] === 0x00) {\r\n                            infoDelimiterPosition = j - startPos;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (infoDelimiterPosition > 0) {\r\n                    const info = utf8ArrayToStr(array.subarray(startPos, startPos += infoDelimiterPosition), 0);\r\n                    if (cue.value.key === 'PRIV') {\r\n                        if (info === 'com.apple.streaming.transportStreamTimestamp') {\r\n                            const ptsIs33Bit = syncSafeInt(array.subarray(startPos, startPos += 4)) & 0x00000001;\r\n                            const transportStreamTimestamp = syncSafeInt(array.subarray(startPos, startPos += 4)) +\r\n                                (ptsIs33Bit ? 0x100000000 : 0);\r\n                            cue.value.data = transportStreamTimestamp;\r\n                        } else {\r\n                            cue.value.data = utf8ArrayToStr(array, startPos + 1);\r\n                        }\r\n                        cue.value.info = info;\r\n                    } else {\r\n                        cue.value.info = info;\r\n                        cue.value.data = utf8ArrayToStr(array, startPos + 1);\r\n                    }\r\n                } else {\r\n                    const encoding = array[startPos];\r\n                    if (encoding === 1 || encoding === 2) {\r\n                        cue.value.data = utf16BigEndianArrayToStr(array, startPos + 1);\r\n                    } else {\r\n                        cue.value.data = utf8ArrayToStr(array, startPos + 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // These friendly names mapping provides compatibility with our implementation prior to 7.3\r\n        if (friendlyNames.hasOwnProperty(cue.value.key)) {\r\n            data[friendlyNames[cue.value.key]] = cue.value.data;\r\n        }\r\n        /* The meta event includes a metadata object with flattened cue key/data pairs\r\n         * If a cue also includes an info field, then create a collection of info/data pairs for the cue key\r\n         *   TLEN: 03:50                                        // key: \"TLEN\", data: \"03:50\"\r\n         *   WXXX: {\"artworkURL\":\"http://domain.com/cover.jpg\"} // key: \"WXXX\", info: \"artworkURL\" ...\r\n         */\r\n        if (cue.value.info) {\r\n            let collection = data[cue.value.key];\r\n            if (collection !== Object(collection)) {\r\n                collection = {};\r\n                data[cue.value.key] = collection;\r\n            }\r\n            collection[cue.value.info] = cue.value.data;\r\n        } else {\r\n            data[cue.value.key] = cue.value.data;\r\n        }\r\n        return data;\r\n    }, {});\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/utils/id3Parser.js","import Promise from 'polyfills/promise';\r\n\r\nexport default function createPlayPromise(video) {\r\n    return new Promise(function(resolve, reject) {\r\n        if (video.paused) {\r\n            return reject(new Error('Play refused.'));\r\n        }\r\n        const removeEventListeners = function() {\r\n            video.removeEventListener('playing', listener);\r\n            video.removeEventListener('pause', listener);\r\n            video.removeEventListener('abort', listener);\r\n            video.removeEventListener('error', listener);\r\n        };\r\n        const listener = function(e) {\r\n            removeEventListeners();\r\n            if (e.type === 'playing') {\r\n                resolve();\r\n            } else {\r\n                reject(new Error('The play() request was interrupted by a \"' + e.type + '\" event.'));\r\n            }\r\n        };\r\n\r\n        video.addEventListener('playing', listener);\r\n        video.addEventListener('abort', listener);\r\n        video.addEventListener('error', listener);\r\n        video.addEventListener('pause', listener);\r\n    });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/providers/utils/play-promise.js"],"sourceRoot":""}